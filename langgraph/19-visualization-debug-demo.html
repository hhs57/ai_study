<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å¯è§†åŒ–ä¸è°ƒè¯• - LangChain å­¦ä¹  19</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
            position: relative;
        }

        /* æµ®åŠ¨å…‰çƒ */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
            animation: float 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(14, 165, 233, 0.3) 0%, rgba(139, 92, 246, 0.1) 50%, transparent 70%);
            top: -200px;
            right: -200px;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.2) 0%, rgba(139, 92, 246, 0.1) 50%, transparent 70%);
            bottom: -150px;
            left: -150px;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(30px, -30px) scale(1.1); }
            50% { transform: translate(-20px, 20px) scale(0.9); }
            75% { transform: translate(-30px, -20px) scale(1.05); }
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(14, 165, 233, 0.3);
        }

        .header p {
            font-size: 1.3em;
            color: rgba(226, 232, 240, 0.8);
        }

        /* è¿›åº¦æ¡ */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #0ea5e9 0%, #8b5cf6 50%, #d946ef 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        /* åœºæ™¯å®¹å™¨ */
        .scene {
            display: none;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scene.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* åœºæ™¯æ ‡é¢˜ */
        .scene-title {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* åŠ¨ç”»ç”»å¸ƒ */
        .canvas-container {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        /* å›¾èŠ‚ç‚¹ */
        .graph-node {
            background: rgba(14, 165, 233, 0.2);
            border: 3px solid rgba(14, 165, 233, 0.5);
            border-radius: 20px;
            padding: 30px;
            text-align: center;
            min-width: 150px;
            transition: all 0.6s;
            transform: scale(0.8);
            opacity: 0;
            position: relative;
        }

        .graph-node.visible {
            transform: scale(1);
            opacity: 1;
        }

        .graph-node.active {
            background: rgba(34, 197, 94, 0.3);
            border-color: rgba(34, 197, 94, 0.7);
            box-shadow: 0 0 40px rgba(34, 197, 94, 0.6);
            transform: scale(1.15);
            animation: nodePulse 0.6s ease-in-out;
        }

        @keyframes nodePulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1.15); }
        }

        .graph-node.error {
            background: rgba(239, 68, 68, 0.3);
            border-color: rgba(239, 68, 68, 0.7);
            box-shadow: 0 0 40px rgba(239, 68, 68, 0.6);
            animation: errorPulse 0.5s ease-in-out infinite;
        }

        @keyframes errorPulse {
            0%, 100% { transform: scale(1.15); }
            50% { transform: scale(1.2); box-shadow: 0 0 60px rgba(239, 68, 68, 0.9); }
        }

        .graph-node.slow {
            background: rgba(251, 146, 60, 0.3);
            border-color: rgba(251, 146, 60, 0.7);
            box-shadow: 0 0 40px rgba(251, 146, 60, 0.6);
        }

        .graph-node .icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .graph-node h4 {
            color: #0ea5e9;
            margin-bottom: 8px;
            font-size: 1.2em;
        }

        .graph-node p {
            color: rgba(226, 232, 240, 0.7);
            font-size: 0.9em;
        }

        /* æ‰§è¡Œæ—¶é—´æ ‡ç­¾ */
        .execution-time {
            position: absolute;
            top: -10px;
            right: -10px;
            background: rgba(139, 92, 246, 0.9);
            color: white;
            padding: 4px 10px;
            border-radius: 10px;
            font-size: 0.75em;
            font-weight: bold;
            opacity: 0;
            animation: fadeIn 0.3s ease-out;
        }

        .execution-time.slow {
            background: rgba(251, 146, 60, 0.9);
        }

        .execution-time.error {
            background: rgba(239, 68, 68, 0.9);
        }

        .graph-arrow {
            font-size: 3em;
            color: #8b5cf6;
            opacity: 0;
            transition: all 0.6s;
            display: inline-block;
        }

        .graph-arrow.visible {
            opacity: 1;
        }

        .graph-arrow.flow {
            animation: arrowFlow 1s ease-in-out infinite;
        }

        @keyframes arrowFlow {
            0%, 100% { transform: translateX(0); opacity: 0.6; }
            50% { transform: translateX(5px); opacity: 1; }
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        /* çŠ¶æ€é¢æ¿ */
        .state-panel {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 2px solid rgba(14, 165, 233, 0.3);
        }

        .state-panel h4 {
            color: #0ea5e9;
            margin-bottom: 15px;
            font-size: 1.1em;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .state-content {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 8px;
            padding: 15px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            line-height: 1.8;
            color: #e2e8f0;
        }

        .state-diff {
            display: flex;
            gap: 20px;
            margin: 10px 0;
        }

        .state-before, .state-after {
            flex: 1;
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 12px;
        }

        .state-before {
            border-left: 3px solid #ef4444;
        }

        .state-after {
            border-left: 3px solid #22c55e;
        }

        .state-label {
            font-size: 0.75em;
            color: rgba(226, 232, 240, 0.6);
            margin-bottom: 8px;
            text-transform: uppercase;
            letter-spacing: 1px;
        }

        /* ç‰¹æ€§å¡ç‰‡ */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 30px;
            border-radius: 15px;
            text-align: center;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.6s;
            border: 2px solid rgba(255, 255, 255, 0.1);
        }

        .feature-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .feature-card:hover {
            background: rgba(14, 165, 233, 0.15);
            transform: translateY(-8px);
            box-shadow: 0 10px 30px rgba(14, 165, 233, 0.3);
        }

        .feature-icon {
            font-size: 4em;
            margin-bottom: 15px;
        }

        .feature-card h4 {
            color: #0ea5e9;
            margin-bottom: 12px;
            font-size: 1.3em;
        }

        .feature-card p {
            color: rgba(226, 232, 240, 0.7);
            line-height: 1.6;
        }

        /* ä»£ç ç‰‡æ®µ */
        .code-snippet {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            overflow-x: auto;
        }

        .keyword { color: #c792ea; font-weight: bold; }
        .string { color: #c3e88d; }
        .comment { color: #546e7a; font-style: italic; }
        .function { color: #82aaff; }

        /* é«˜äº®æ¡† */
        .highlight-box {
            background: rgba(14, 165, 233, 0.15);
            border-left: 5px solid #0ea5e9;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            animation: slideInRight 0.8s ease-out;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .highlight-box h3 {
            color: #0ea5e9;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .highlight-box p {
            line-height: 1.8;
            color: rgba(226, 232, 240, 0.9);
        }

        /* æ¼”ç¤ºæŒ‰é’® */
        .demo-btn {
            background: linear-gradient(135deg, #0ea5e9 0%, #8b5cf6 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 12px;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            box-shadow: 0 4px 15px rgba(14, 165, 233, 0.4);
            margin: 20px auto;
            display: block;
        }

        .demo-btn:hover:not(:disabled) {
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(14, 165, 233, 0.6);
        }

        .demo-btn:disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        /* å¯¼èˆªæŒ‰é’® */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            gap: 20px;
        }

        .nav-btn {
            padding: 15px 40px;
            background: rgba(14, 165, 233, 0.2);
            border: 2px solid rgba(14, 165, 233, 0.5);
            border-radius: 12px;
            color: #0ea5e9;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn:hover:not(:disabled) {
            background: rgba(14, 165, 233, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(14, 165, 233, 0.4);
        }

        /* é’ˆå¯¹ a æ ‡ç­¾çš„å¯¼èˆªæŒ‰é’®æ ·å¼ */
        .nav-btn.back-to-list {
            text-decoration: none;
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            color: #60a5fa;
        }

        .nav-btn.back-to-list:hover {
            background: rgba(59, 130, 246, 0.4);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .nav-btn.next {
            margin-left: auto;
        }

        /* åœºæ™¯æŒ‡ç¤ºå™¨ */
        .scene-indicators {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 40px 0;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }

        .indicator.active {
            background: #0ea5e9;
            transform: scale(1.3);
        }

        .indicator:hover {
            transform: scale(1.2);
        }

        /* æµç¨‹æ­¥éª¤ */
        .step-list {
            list-style: none;
            padding: 0;
            margin: 30px 0;
        }

        .step-item {
            background: rgba(255, 255, 255, 0.05);
            border-left: 4px solid #0ea5e9;
            padding: 20px 25px;
            margin-bottom: 15px;
            border-radius: 8px;
            transform: translateX(-50px);
            opacity: 0;
            transition: all 0.6s;
        }

        .step-item.visible {
            transform: translateX(0);
            opacity: 1;
        }

        .step-number {
            display: inline-block;
            background: #0ea5e9;
            color: white;
            width: 35px;
            height: 35px;
            border-radius: 50%;
            text-align: center;
            line-height: 35px;
            margin-right: 15px;
            font-weight: bold;
        }

        .step-content {
            display: inline-block;
            color: rgba(226, 232, 240, 0.9);
        }

        /* å›¾å½¢å¯è§†åŒ–åŒºåŸŸ */
        .graph-structure {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 30px;
            padding: 40px 20px;
            flex-wrap: wrap;
        }

        /* è¿½è¸ªæ—¥å¿— */
        .trace-log {
            background: rgba(0, 0, 0, 0.5);
            border-radius: 12px;
            padding: 20px;
            font-family: 'Consolas', 'Monaco', monospace;
            font-size: 0.85em;
            max-height: 300px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .trace-entry {
            padding: 10px;
            margin: 5px 0;
            border-left: 3px solid #0ea5e9;
            background: rgba(14, 165, 233, 0.1);
            animation: fadeIn 0.3s ease-out;
        }

        .trace-entry.success {
            border-left-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }

        .trace-entry.error {
            border-left-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .trace-timestamp {
            color: #8b5cf6;
            font-size: 0.85em;
        }

        .trace-node {
            color: #0ea5e9;
            font-weight: bold;
        }

        /* æ€§èƒ½æ¡ */
        .performance-bar {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin: 15px 0;
        }

        .perf-label {
            display: flex;
            justify-content: space-between;
            margin-bottom: 8px;
            color: rgba(226, 232, 240, 0.9);
        }

        .perf-progress {
            height: 20px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            overflow: hidden;
        }

        .perf-fill {
            height: 100%;
            background: linear-gradient(90deg, #0ea5e9 0%, #8b5cf6 100%);
            transition: width 1s ease-out;
            display: flex;
            align-items: center;
            justify-content: flex-end;
            padding-right: 10px;
            color: white;
            font-size: 0.8em;
            font-weight: bold;
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .graph-structure {
                flex-direction: column;
            }

            .graph-arrow {
                transform: rotate(90deg);
            }
        }
    
        /* æ ‡å‡†å¯¼èˆªæ ·å¼ */
        .nav-card {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 24px;
            margin-bottom: 32px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nav-card a {
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .nav-card a:hover {
            transform: translateY(-2px);
        }

        /* é¡¶éƒ¨å¯¼èˆªå¡ç‰‡ */
        .top-nav-card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 24px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .top-nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .top-nav-left,
        .top-nav-center,
        .top-nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .top-nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #9ca3af;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .top-nav-link:hover {
            color: #e5e7eb;
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
        }

        .top-nav-link.home {
            color: #4ade80;
        }

        .top-nav-link.home:hover {
            color: #86efac;
        }

        .top-nav-link svg {
            width: 20px;
            height: 20px;
        }

        .top-nav-divider {
            width: 1px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
        }

        .top-nav-text {
            color: #6b7280;
            font-size: 0.9em;
        }

        .top-nav-progress {
            color: #9ca3af;
            font-size: 0.9em;
            font-weight: 500;
        }
</style>
</head>
<body>
    <!-- æµ®åŠ¨å…‰çƒ -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>    <!-- é¡¶éƒ¨å¯¼èˆª - è·¨æ¨¡å— -->
    <div class="top-nav-card">
        <div class="top-nav-container">
            <div class="top-nav-left">
                <a href="index.html" class="top-nav-link home">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    è¿”å›LangGraphç›®å½•
                </a>
            </div>
            <div class="top-nav-center">
                <a href="18-multi-agent-demo.html" class="top-nav-link">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    ä¸Šä¸€è¯¾
                </a>
                <div class="top-nav-divider"></div>
                <a href="20-error-handling-demo.html" class="top-nav-link">
                    ä¸‹ä¸€è¯¾
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
            <div class="top-nav-right">
                <span class="top-nav-progress">è¯¾ç¨‹ 19 / 20</span>
            </div>
        </div>
    </div>

    <!-- è¿›åº¦æ¡ -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>å¯è§†åŒ–ä¸è°ƒè¯•</h1>
            <p>Visualization & Debugging - ç†è§£å’Œä¼˜åŒ–å›¾æ‰§è¡Œ</p>
        </div>

        <!-- åœºæ™¯ 1: ä¸ºä»€ä¹ˆéœ€è¦å¯è§†åŒ– -->
        <div class="scene active" id="scene1">
            <h2 class="scene-title">ä¸ºä»€ä¹ˆéœ€è¦å¯è§†åŒ–ä¸è°ƒè¯•ï¼Ÿ</h2>

            <div class="highlight-box">
                <h3>ğŸ’¡ æ ¸å¿ƒä»·å€¼</h3>
                <p>
                    éšç€å›¾çš„å¤æ‚åº¦å¢åŠ ï¼Œç†è§£å’Œè°ƒè¯•æ‰§è¡Œæµç¨‹å˜å¾—å›°éš¾ã€‚<br>
                    å¯è§†åŒ–å·¥å…·å’Œè°ƒè¯•æŠ€å·§å¸®åŠ©ä½ <strong>å¿«é€Ÿå®šä½é—®é¢˜ã€ä¼˜åŒ–æ€§èƒ½</strong>ã€‚<br><br>
                    <strong>æƒ³è±¡ä¸€ä¸‹ï¼š</strong><br>
                    æ²¡æœ‰å¯è§†åŒ–å°±åƒåœ¨<strong>é»‘æš—ä¸­èµ°è¿·å®«</strong>ï¼Œæœ‰å¯è§†åŒ–å°±åƒæœ‰äº†<strong>åœ°å›¾å’ŒGPS</strong>ï¼
                </p>
            </div>

            <div class="feature-grid">
                <div class="feature-card" data-delay="0">
                    <div class="feature-icon">ğŸ“Š</div>
                    <h4>å›¾å¯è§†åŒ–</h4>
                    <p>æ¸…æ™°æŸ¥çœ‹å›¾ç»“æ„å’ŒèŠ‚ç‚¹å…³ç³»</p>
                </div>

                <div class="feature-card" data-delay="100">
                    <div class="feature-icon">ğŸ”</div>
                    <h4>æ‰§è¡Œè¿½è¸ª</h4>
                    <p>è®°å½•æ¯ä¸ªèŠ‚ç‚¹çš„æ‰§è¡Œè¿‡ç¨‹</p>
                </div>

                <div class="feature-card" data-delay="200">
                    <div class="feature-icon">âš¡</div>
                    <h4>æ€§èƒ½åˆ†æ</h4>
                    <p>æµ‹é‡èŠ‚ç‚¹è€—æ—¶ï¼Œè¯†åˆ«ç“¶é¢ˆ</p>
                </div>

                <div class="feature-card" data-delay="300">
                    <div class="feature-icon">ğŸ›</div>
                    <h4>è°ƒè¯•å·¥å…·</h4>
                    <p>å¿«é€Ÿå®šä½å’Œä¿®å¤é—®é¢˜</p>
                </div>
            </div>
        </div>

        <!-- åœºæ™¯ 2: å›¾ç»“æ„å¯è§†åŒ– -->
        <div class="scene" id="scene2">
            <h2 class="scene-title">å›¾ç»“æ„å¯è§†åŒ–</h2>

            <div class="canvas-container">
                <h3 style="text-align: center; color: #0ea5e9; margin-bottom: 30px; font-size: 1.5em;">å¯è§†åŒ–æ–¹å¼æ¼”ç¤º</h3>

                <div class="graph-structure" id="visualGraph">
                    <div class="graph-node" data-step="1">
                        <div class="icon">ğŸ“¥</div>
                        <h4>è¾“å…¥</h4>
                        <p>åˆå§‹çŠ¶æ€</p>
                    </div>

                    <div class="graph-arrow" data-step="2">â†’</div>

                    <div class="graph-node" data-step="3">
                        <div class="icon">ğŸ”„</div>
                        <h4>èŠ‚ç‚¹A</h4>
                        <p>å¤„ç†æ•°æ®</p>
                    </div>

                    <div class="graph-arrow" data-step="4">â†’</div>

                    <div class="graph-node" data-step="5">
                        <div class="icon">âš¡</div>
                        <h4>èŠ‚ç‚¹B</h4>
                        <p>å¢å¼ºç»“æœ</p>
                    </div>

                    <div class="graph-arrow" data-step="6">â†’</div>

                    <div class="graph-node" data-step="7">
                        <div class="icon">âœ…</div>
                        <h4>è¾“å‡º</h4>
                        <p>æœ€ç»ˆç»“æœ</p>
                    </div>
                </div>

                <button class="demo-btn" id="visualBtn" onclick="animateVisualization()">â–¶ï¸ æ’­æ”¾å¯è§†åŒ–æ¼”ç¤º</button>
            </div>

            <div class="code-snippet">
                <span class="comment"># ä¸‰ç§å¯è§†åŒ–æ–¹å¼</span><br><br>
                <span class="keyword">from</span> langgraph.visualization <span class="keyword">import</span> visualize_graph<br>
                <span class="keyword">from</span> IPython.display <span class="keyword">import</span> Markdown, display<br><br>
                <span class="comment"># æ–¹å¼ 1: ASCII å›¾å½¢</span><br>
                <span class="function">print</span>(graph.get_graph().<span class="function">print_ascii</span>())<br><br>
                <span class="comment"># æ–¹å¼ 2: Mermaid å›¾å½¢</span><br>
                mermaid_code = graph.get_graph().<span class="function">draw_mermaid</span>()<br>
                <span class="function">display</span>(Markdown(mermaid_code))<br><br>
                <span class="comment"># æ–¹å¼ 3: å¯¼å‡ºå›¾ç‰‡</span><br>
                <span class="function">visualize_graph</span>(graph, output_path=<span class="string">"graph.png"</span>)
            </div>

            <!-- ASCII å›¾å½¢å®é™…è¾“å‡ºç¤ºä¾‹ -->
            <div style="margin-top: 30px; padding: 20px; background: rgba(15, 23, 42, 0.6); border-radius: 12px; border: 2px solid rgba(14, 165, 233, 0.3);">
                <h4 style="color: #0ea5e9; margin-bottom: 15px; display: flex; align-items: center; gap: 8px;">
                    <span style="font-size: 1.2em;">ğŸ“º</span> æ–¹å¼ 1 å®é™…è¾“å‡ºæ•ˆæœ
                </h4>
                <div style="background: rgba(0, 0, 0, 0.4); padding: 20px; border-radius: 8px; font-family: 'Courier New', monospace; font-size: 0.9em; line-height: 1.4; color: #22c55e; overflow-x: auto;">
                    <pre style="margin: 0; white-space: pre;">
        +-----------+
        |   è¾“å…¥    |
        +-----------+
             |
             v
    +------------------+
    |     èŠ‚ç‚¹A        |
    |  (å¤„ç†æ•°æ®)      |
    +------------------+
             |
             v
    +------------------+
    |     èŠ‚ç‚¹B        |
    |  (å¢å¼ºç»“æœ)      |
    +------------------+
             |
             v
        +-----------+
        |   è¾“å‡º    |
        +-----------+

å›¾ç»“æ„: 4ä¸ªèŠ‚ç‚¹, 3æ¡è¾¹
                    </pre>
                </div>
                <p style="margin-top: 15px; font-size: 0.9em; color: rgba(226, 232, 240, 0.7);">
                    ğŸ’¡ <strong>æç¤º:</strong> ASCII å›¾å½¢ä½¿ç”¨å­—ç¬¦ç»˜åˆ¶,é€‚åˆåœ¨ç»ˆç«¯æˆ–ç®€å•çš„æ–‡æœ¬ç¯å¢ƒä¸­å¿«é€ŸæŸ¥çœ‹å›¾ç»“æ„
                </p>
            </div>
        </div>

        <!-- åœºæ™¯ 3: æ‰§è¡Œè¿½è¸ª -->
        <div class="scene" id="scene3">
            <h2 class="scene-title">æ‰§è¡Œè¿½è¸ª</h2>

            <div class="canvas-container">
                <h3 style="text-align: center; color: #0ea5e9; margin-bottom: 30px; font-size: 1.5em;">å®æ—¶è¿½è¸ªæ¼”ç¤º</h3>

                <div class="graph-structure" id="traceGraph">
                    <div class="graph-node" data-step="1">
                        <div class="icon">ğŸš€</div>
                        <h4>å¼€å§‹</h4>
                    </div>
                    <div class="graph-arrow" data-step="2">â†’</div>
                    <div class="graph-node" data-step="3">
                        <div class="icon">ğŸ“</div>
                        <h4>æ­¥éª¤1</h4>
                    </div>
                    <div class="graph-arrow" data-step="4">â†’</div>
                    <div class="graph-node" data-step="5">
                        <div class="icon">âœ…</div>
                        <h4>æ­¥éª¤2</h4>
                    </div>
                </div>

                <div class="trace-log" id="traceLog">
                    <div style="color: #8b5cf6; text-align: center; padding: 20px;">
                        ç‚¹å‡»ä¸‹æ–¹æŒ‰é’®å¼€å§‹è¿½è¸ª...
                    </div>
                </div>

                <button class="demo-btn" id="traceBtn" onclick="animateTrace()">â–¶ï¸ å¼€å§‹è¿½è¸ªæ¼”ç¤º</button>
            </div>

            <div class="code-snippet">
                <span class="comment"># åœ¨çŠ¶æ€ä¸­è®°å½•è¿½è¸ªä¿¡æ¯</span><br><br>
                <span class="keyword">import</span> time<br><br>
                <span class="keyword">class</span> <span class="function">TracedState</span>(TypedDict):<br>
                &nbsp;&nbsp;step: int<br>
                &nbsp;&nbsp;value: str<br>
                &nbsp;&nbsp;trace: list[dict]<br><br>
                <span class="keyword">def</span> <span class="function">step_1</span>(state):<br>
                &nbsp;&nbsp;entry = {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"node"</span>: <span class="string">"step_1"</span>,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"timestamp"</span>: time.time(),<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"input"</span>: state.copy()<br>
                &nbsp;&nbsp;}<br>
                &nbsp;&nbsp;result = {<span class="string">"value"</span>: <span class="string">"æ­¥éª¤1å®Œæˆ"</span>}<br>
                &nbsp;&nbsp;entry[<span class="string">"output"</span>] = result<br>
                &nbsp;&nbsp;<span class="keyword">return</span> {<span class="string">"trace"</span>: state[<span class="string">"trace"</span>] + [entry]}
            </div>
        </div>

        <!-- åœºæ™¯ 4: æ€§èƒ½åˆ†æ -->
        <div class="scene" id="scene4">
            <h2 class="scene-title">æ€§èƒ½åˆ†æ</h2>

            <div class="canvas-container">
                <h3 style="text-align: center; color: #0ea5e9; margin-bottom: 30px; font-size: 1.5em;">èŠ‚ç‚¹è€—æ—¶åˆ†æ</h3>

                <div id="performanceBars">
                    <div class="performance-bar">
                        <div class="perf-label">
                            <span>èŠ‚ç‚¹ A - æ•°æ®åŠ è½½</span>
                            <span id="perf1-label">0.0s</span>
                        </div>
                        <div class="perf-progress">
                            <div class="perf-fill" id="perf1-bar" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="performance-bar">
                        <div class="perf-label">
                            <span>èŠ‚ç‚¹ B - æ•°æ®å¤„ç†</span>
                            <span id="perf2-label">0.0s</span>
                        </div>
                        <div class="perf-progress">
                            <div class="perf-fill" id="perf2-bar" style="width: 0%"></div>
                        </div>
                    </div>

                    <div class="performance-bar">
                        <div class="perf-label">
                            <span>èŠ‚ç‚¹ C - ç»“æœèšåˆ</span>
                            <span id="perf3-label">0.0s</span>
                        </div>
                        <div class="perf-progress">
                            <div class="perf-fill" id="perf3-bar" style="width: 0%"></div>
                        </div>
                    </div>
                </div>

                <button class="demo-btn" id="perfBtn" onclick="animatePerformance()">â–¶ï¸ è¿è¡Œæ€§èƒ½åˆ†æ</button>
            </div>

            <div class="code-snippet">
                <span class="comment"># æµ‹é‡èŠ‚ç‚¹æ‰§è¡Œæ—¶é—´</span><br><br>
                <span class="keyword">import</span> time<br><br>
                <span class="keyword">def</span> <span class="function">timed_node</span>(state):<br>
                &nbsp;&nbsp;start = time.time()<br>
                &nbsp;&nbsp;<span class="comment"># æ‰§è¡Œæ“ä½œ</span><br>
                &nbsp;&nbsp;result = process_data(state)<br>
                &nbsp;&nbsp;duration = time.time() - start<br><br>
                &nbsp;&nbsp;<span class="keyword">return</span> {<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"result"</span>: result,<br>
                &nbsp;&nbsp;&nbsp;&nbsp;<span class="string">"metrics"</span>: {<span class="string">"duration"</span>: duration}<br>
                &nbsp;&nbsp;}
            </div>
        </div>

        <!-- åœºæ™¯ 5: è°ƒè¯•æŠ€å·§ -->
        <div class="scene" id="scene5">
            <h2 class="scene-title">è°ƒè¯•æŠ€å·§å’Œæœ€ä½³å®è·µ</h2>

            <ul class="step-list">
                <li class="step-item" data-delay="0">
                    <span class="step-number">1</span>
                    <span class="step-content"><strong>å¯ç”¨ debug æ¨¡å¼</strong> - graph.compile(debug=True)</span>
                </li>

                <li class="step-item" data-delay="150">
                    <span class="step-number">2</span>
                    <span class="step-content"><strong>çŠ¶æ€å¿«ç…§</strong> - åœ¨å…³é”®ç‚¹ä¿å­˜çŠ¶æ€</span>
                </li>

                <li class="step-item" data-delay="300">
                    <span class="step-number">3</span>
                    <span class="step-content"><strong>æ—¥å¿—è®°å½•</strong> - è®°å½•è¾“å…¥è¾“å‡ºå’Œé”™è¯¯</span>
                </li>

                <li class="step-item" data-delay="450">
                    <span class="step-number">4</span>
                    <span class="step-content"><strong>çŠ¶æ€éªŒè¯</strong> - æ£€æŸ¥å¿…éœ€å­—æ®µ</span>
                </li>

                <li class="step-item" data-delay="600">
                    <span class="step-number">5</span>
                    <span class="step-content"><strong>åˆ†æ­¥æµ‹è¯•</strong> - ä»ç®€å•å¼€å§‹é€æ­¥å¢åŠ </span>
                </li>
            </ul>

            <div class="highlight-box" style="background: rgba(34, 197, 94, 0.15); border-left-color: #22c55e;">
                <h3 style="color: #22c55e;">ğŸ¯ é—®é¢˜è¯Šæ–­æ¸…å•</h3>
                <p>
                    <strong>å›¾æ‰§è¡Œå¡ä½ï¼Ÿ</strong> â†’ æ£€æŸ¥å¾ªç¯æ¡ä»¶å’Œé€€å‡ºæ¡ä»¶<br>
                    <strong>çŠ¶æ€ä¸¢å¤±ï¼Ÿ</strong> â†’ æ£€æŸ¥èŠ‚ç‚¹è¿”å›å€¼æ˜¯å¦æ­£ç¡®æ›´æ–°çŠ¶æ€<br>
                    <strong>æ€§èƒ½å·®ï¼Ÿ</strong> â†’ åˆ†æèŠ‚ç‚¹è€—æ—¶ï¼Œè¯†åˆ«æ…¢èŠ‚ç‚¹<br>
                    <strong>è¾“å‡ºä¸ç¬¦ï¼Ÿ</strong> â†’ éªŒè¯æ¡ä»¶è¾¹çš„é€»è¾‘æ˜¯å¦æ­£ç¡®
                </p>
            </div>

            <div class="highlight-box">
                <h3>ğŸš€ æ ¸å¿ƒè¦ç‚¹</h3>
                <p>
                    <strong>å¯è§†åŒ–</strong>ï¼šç†è§£å›¾ç»“æ„ï¼Œä¸€ç›®äº†ç„¶<br>
                    <strong>è¿½è¸ª</strong>ï¼šè®°å½•æ‰§è¡Œå†å²ï¼Œå®Œæ•´å®¡è®¡<br>
                    <strong>æ€§èƒ½</strong>ï¼šè¯†åˆ«ç“¶é¢ˆï¼Œä¼˜åŒ–æ…¢èŠ‚ç‚¹<br>
                    <strong>ç›‘æ§</strong>ï¼šæŒç»­è§‚å¯Ÿï¼ŒåŠæ—¶å‘ç°é—®é¢˜
                </p>
            </div>
        </div>

        <!-- åœºæ™¯æŒ‡ç¤ºå™¨ -->
        <div class="scene-indicators">
            <div class="indicator active" data-scene="1"></div>
            <div class="indicator" data-scene="2"></div>
            <div class="indicator" data-scene="3"></div>
            <div class="indicator" data-scene="4"></div>
            <div class="indicator" data-scene="5"></div>
        </div>

        <!-- å¯¼èˆªæŒ‰é’® -->
        <div class="nav-buttons">
            <button class="nav-btn" id="prevBtn" disabled>
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                ä¸Šä¸€èŠ‚
            </button>
            <a href="../langchain/index.html" class="nav-btn back-to-list">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
                </svg>
                è¯¾ç¨‹åˆ—è¡¨
            </a>
            <button class="nav-btn next" id="nextBtn">
                ä¸‹ä¸€èŠ‚
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // åœºæ™¯æ•°æ®
        const totalScenes = 5;
        let currentScene = 1;

        // DOM å…ƒç´ 
        const progressBar = document.getElementById('progressBar');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const indicators = document.querySelectorAll('.indicator');

        // åˆå§‹åŒ–
        function init() {
            setupEventListeners();
            updateScene();
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬
        function setupEventListeners() {
            // å¯¼èˆªæŒ‰é’®
            prevBtn.addEventListener('click', () => {
                if (currentScene > 1) {
                    currentScene--;
                    updateScene();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentScene < totalScenes) {
                    currentScene++;
                    updateScene();
                }
            });

            // æŒ‡ç¤ºå™¨
            indicators.forEach(indicator => {
                indicator.addEventListener('click', () => {
                    currentScene = parseInt(indicator.dataset.scene);
                    updateScene();
                });
            });

            // é”®ç›˜å¯¼èˆª
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' && currentScene < totalScenes) {
                    currentScene++;
                    updateScene();
                } else if (e.key === 'ArrowLeft' && currentScene > 1) {
                    currentScene--;
                    updateScene();
                }
            });
        }

        // æ›´æ–°åœºæ™¯
        function updateScene() {
            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentScene - 1) / (totalScenes - 1)) * 100;
            progressBar.style.width = progress + '%';

            // æ›´æ–°åœºæ™¯æ˜¾ç¤º
            document.querySelectorAll('.scene').forEach((scene, index) => {
                if (index + 1 === currentScene) {
                    scene.classList.add('active');
                } else {
                    scene.classList.remove('active');
                }
            });

            // æ›´æ–°æŒ‡ç¤ºå™¨
            indicators.forEach((indicator, index) => {
                if (index + 1 === currentScene) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.remove('active');
                }
            });

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            prevBtn.disabled = currentScene === 1;
            nextBtn.disabled = currentScene === totalScenes;

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // é‡ç½®æ‰€æœ‰åŠ¨ç”»å…ƒç´ 
            document.querySelectorAll('.feature-card, .graph-node, .graph-arrow, .step-item').forEach(el => {
                el.classList.remove('visible');
            });

            // åŠ¨ç”»æ˜¾ç¤ºå…ƒç´ 
            setTimeout(() => {
                animateSceneElements();
            }, 100);
        }

        // åŠ¨ç”»æ˜¾ç¤ºåœºæ™¯å…ƒç´ 
        function animateSceneElements() {
            const currentSceneEl = document.querySelector(`#scene${currentScene}`);

            // ç‰¹æ€§å¡ç‰‡åŠ¨ç”»
            currentSceneEl.querySelectorAll('.feature-card').forEach((card, index) => {
                const delay = parseInt(card.dataset.delay) || index * 100;
                setTimeout(() => {
                    card.classList.add('visible');
                }, delay);
            });

            // å›¾èŠ‚ç‚¹åŠ¨ç”»
            currentSceneEl.querySelectorAll('.graph-node').forEach((node, index) => {
                const delay = parseInt(node.dataset.delay) || index * 200;
                setTimeout(() => {
                    node.classList.add('visible');
                }, delay);
            });

            // å›¾ç®­å¤´åŠ¨ç”»
            currentSceneEl.querySelectorAll('.graph-arrow').forEach((arrow, index) => {
                const delay = parseInt(arrow.dataset.delay) || index * 200;
                setTimeout(() => {
                    arrow.classList.add('visible');
                }, delay);
            });

            // æ­¥éª¤é¡¹åŠ¨ç”»
            currentSceneEl.querySelectorAll('.step-item').forEach((item, index) => {
                const delay = parseInt(item.dataset.delay) || index * 150;
                setTimeout(() => {
                    item.classList.add('visible');
                }, delay);
            });
        }

        // åœºæ™¯ 2: å¯è§†åŒ–æ¼”ç¤º - å±•ç¤ºçœŸå®çš„å›¾æ‰§è¡Œè¿‡ç¨‹
        async function animateVisualization() {
            const btn = document.getElementById('visualBtn');
            const canvas = document.getElementById('scene2').querySelector('.canvas-container');

            btn.disabled = true;
            btn.textContent = 'â³ æ¼”ç¤ºä¸­...';

            // ç§»é™¤æ—§çš„æ€»ç»“(å¦‚æœæœ‰)
            const oldSummary = canvas.querySelector('.bottleneck-summary');
            if (oldSummary) oldSummary.remove();

            // è·å–æ‰€æœ‰èŠ‚ç‚¹å’Œç®­å¤´
            const nodes = document.querySelectorAll('#visualGraph .graph-node');
            const arrows = document.querySelectorAll('#visualGraph .graph-arrow');

            console.log('Nodes found:', nodes.length);
            console.log('Arrows found:', arrows.length);

            // éªŒè¯å…ƒç´ å­˜åœ¨
            if (nodes.length === 0 || arrows.length === 0) {
                console.error('No nodes or arrows found!');
                btn.disabled = false;
                btn.textContent = 'â–¶ï¸ æ’­æ”¾å¯è§†åŒ–æ¼”ç¤º';
                return;
            }

            // é‡ç½®æ‰€æœ‰çŠ¶æ€
            nodes.forEach(el => {
                el.classList.remove('visible', 'active', 'error', 'slow');
                const timeTag = el.querySelector('.execution-time');
                if (timeTag) timeTag.remove();
            });
            arrows.forEach(el => {
                el.classList.remove('visible', 'flow');
            });

            await new Promise(resolve => setTimeout(resolve, 600));

            // ============ æ¨¡æ‹ŸçœŸå®å›¾æ‰§è¡Œ ============
            // ä¿®æ­£: å®é™…æœ‰4ä¸ªèŠ‚ç‚¹(0-3)å’Œ3ä¸ªç®­å¤´(0-2)
            const executionPlan = [
                { nodeIndex: 0, duration: 800, status: 'success', name: 'è¾“å…¥' },      // node 0
                { arrowIndex: 0, duration: 500, status: 'transition' },                // arrow 0
                { nodeIndex: 1, duration: 1500, status: 'success', name: 'èŠ‚ç‚¹A' },    // node 1
                { arrowIndex: 1, duration: 400, status: 'transition' },                // arrow 1
                { nodeIndex: 2, duration: 2500, status: 'slow', name: 'èŠ‚ç‚¹B' },      // node 2 - æ…¢èŠ‚ç‚¹!
                { arrowIndex: 2, duration: 400, status: 'transition' },                // arrow 2
                { nodeIndex: 3, duration: 600, status: 'success', name: 'è¾“å‡º' }       // node 3
            ];

            for (let i = 0; i < executionPlan.length; i++) {
                const step = executionPlan[i];

                try {
                    if (step.status === 'transition') {
                        // æ˜¾ç¤ºç®­å¤´æµåŠ¨
                        if (arrows[step.arrowIndex]) {
                            arrows[step.arrowIndex].classList.add('visible', 'flow');
                            await new Promise(resolve => setTimeout(resolve, step.duration));
                        } else {
                            console.error('Arrow not found:', step.arrowIndex);
                        }
                    } else {
                        // æ¿€æ´»èŠ‚ç‚¹
                        if (!nodes[step.nodeIndex]) {
                            console.error('Node not found:', step.nodeIndex);
                            continue;
                        }

                        const node = nodes[step.nodeIndex];
                        node.classList.add('visible', 'active');

                        // æ·»åŠ æ‰§è¡Œæ—¶é—´æ ‡ç­¾
                        const timeTag = document.createElement('div');
                        timeTag.className = 'execution-time';
                        const durationSec = (step.duration / 1000).toFixed(1) + 's';
                        timeTag.textContent = durationSec;
                        timeTag.style.opacity = '1';

                        if (step.status === 'slow') {
                            timeTag.classList.add('slow');
                            node.classList.add('slow');
                        } else if (step.status === 'error') {
                            timeTag.classList.add('error');
                            node.classList.add('error');
                        }

                        node.appendChild(timeTag);

                        // æ¨¡æ‹Ÿæ‰§è¡Œæ—¶é—´
                        await new Promise(resolve => setTimeout(resolve, step.duration));

                        // èŠ‚ç‚¹æ‰§è¡Œå®Œæˆ,ç§»é™¤activeä½†ä¿æŒvisible
                        node.classList.remove('active');

                        if (step.status === 'slow') {
                            // æ…¢èŠ‚ç‚¹é¢å¤–åœç•™ä¸€ä¸‹,è®©ç”¨æˆ·æ³¨æ„åˆ°
                            await new Promise(resolve => setTimeout(resolve, 500));
                        }
                    }
                } catch (error) {
                    console.error('Error at step', i, ':', error);
                    btn.disabled = false;
                    btn.textContent = 'â–¶ï¸ æ’­æ”¾å¯è§†åŒ–æ¼”ç¤º';
                    return;
                }
            }

            // æ˜¾ç¤ºæ€»ç»“
            const summary = document.createElement('div');
            summary.className = 'bottleneck-summary';
            summary.style.cssText = `
                text-align: center;
                background: rgba(251, 146, 60, 0.2);
                border: 2px solid rgba(251, 146, 60, 0.5);
                border-radius: 12px;
                padding: 15px;
                margin: 20px auto;
                max-width: 500px;
                animation: fadeIn 0.5s ease-out;
            `;
            summary.innerHTML = `
                <h4 style="color: #fb923c; margin-bottom: 10px;">âš ï¸ æ€§èƒ½ç“¶é¢ˆæ£€æµ‹</h4>
                <p style="color: rgba(226, 232, 240, 0.9);">
                    <strong>èŠ‚ç‚¹B</strong> æ‰§è¡Œæ—¶é—´è¿‡é•¿ (2.5s)<br>
                    <span style="font-size: 0.9em; color: rgba(226, 232, 240, 0.7);">
                    å»ºè®®: ä¼˜åŒ–ç®—æ³•æˆ–æ·»åŠ ç¼“å­˜
                    </span>
                </p>
            `;
            canvas.appendChild(summary);

            await new Promise(resolve => setTimeout(resolve, 1000));

            btn.disabled = false;
            btn.textContent = 'ğŸ”„ é‡æ–°æ¼”ç¤º';
        }

        // åœºæ™¯ 3: è¿½è¸ªæ¼”ç¤º - å®æ—¶æ—¥å¿—æµ + çŠ¶æ€å˜åŒ–å¯è§†åŒ–
        async function animateTrace() {
            try {
                const btn = document.getElementById('traceBtn');
                const log = document.getElementById('traceLog');

                btn.disabled = true;
                btn.textContent = 'â³ è¿½è¸ªä¸­...';
                log.innerHTML = '';

                // é‡ç½®èŠ‚ç‚¹å’Œç®­å¤´
                const nodes = document.querySelectorAll('#traceGraph .graph-node');
                const arrows = document.querySelectorAll('#traceGraph .graph-arrow');

                console.log('Trace - Nodes:', nodes.length, 'Arrows:', arrows.length);

                nodes.forEach(el => {
                    el.classList.remove('visible', 'active', 'error');
                    const timeTag = el.querySelector('.execution-time');
                    if (timeTag) timeTag.remove();
                });
                arrows.forEach(el => {
                    el.classList.remove('visible', 'flow');
                });

                // æ·»åŠ çŠ¶æ€é¢æ¿åˆ°æ—¥å¿—åŒºåŸŸä¸Šæ–¹
                const statePanel = document.createElement('div');
                statePanel.className = 'state-panel';
                statePanel.innerHTML = `
                    <h4>ğŸ“Š çŠ¶æ€ç›‘æ§</h4>
                    <div class="state-diff">
                        <div class="state-before">
                            <div class="state-label">è¾“å…¥çŠ¶æ€</div>
                            <div class="state-content" id="stateBefore">ç­‰å¾…æ‰§è¡Œ...</div>
                        </div>
                        <div class="state-after">
                            <div class="state-label">è¾“å‡ºçŠ¶æ€</div>
                            <div class="state-content" id="stateAfter">ç­‰å¾…æ‰§è¡Œ...</div>
                        </div>
                    </div>
                `;
                log.insertBefore(statePanel, log.firstChild);

                await new Promise(resolve => setTimeout(resolve, 600));

                // ============ æ¨¡æ‹ŸçœŸå®çš„æ‰§è¡Œè¿½è¸ª ============
                const traceEvents = [
                    {
                        nodeIndex: 0,
                        nodeName: 'å¼€å§‹',
                        timestamp: '10:00:00.000',
                        input: '{ "messages": [], "step": 0 }',
                        output: '{ "messages": [], "step": 1 }',
                        duration: 120,
                        type: 'success'
                    },
                    {
                        nodeIndex: 1,
                        nodeName: 'æ­¥éª¤1',
                        timestamp: '10:00:00.120',
                        input: '{ "messages": [], "step": 1 }',
                        output: '{ "messages": ["ç”¨æˆ·æ¶ˆæ¯1"], "step": 2 }',
                        duration: 850,
                        type: 'success'
                    },
                    {
                        nodeIndex: 2,
                        nodeName: 'æ­¥éª¤2',
                        timestamp: '10:00:00.970',
                        input: '{ "messages": ["ç”¨æˆ·æ¶ˆæ¯1"], "step": 2 }',
                        output: '{ "messages": ["ç”¨æˆ·æ¶ˆæ¯1", "AIå›å¤"], "step": 3 }',
                        duration: 1500,
                        type: 'success'
                    }
                ];

                for (let i = 0; i < traceEvents.length; i++) {
                    const event = traceEvents[i];

                    // 1. æ¿€æ´»èŠ‚ç‚¹
                    if (nodes[event.nodeIndex]) {
                        nodes[event.nodeIndex].classList.add('visible', 'active');

                        // æ·»åŠ æ‰§è¡Œæ—¶é—´
                        const timeTag = document.createElement('div');
                        timeTag.className = 'execution-time';
                        timeTag.textContent = (event.duration / 1000).toFixed(2) + 's';
                        timeTag.style.opacity = '1';
                        nodes[event.nodeIndex].appendChild(timeTag);
                    }

                    // 2. æ›´æ–°çŠ¶æ€é¢æ¿
                    const stateBefore = document.getElementById('stateBefore');
                    const stateAfter = document.getElementById('stateAfter');
                    if (stateBefore && stateAfter) {
                        stateBefore.innerHTML =
                            `<pre style="margin: 0; white-space: pre-wrap; word-break: break-all;">${event.input}</pre>`;
                        stateAfter.innerHTML =
                            `<span style="color: #22c55e;">æ­£åœ¨å¤„ç†...</span>`;
                    }

                    // 3. æ·»åŠ è¿½è¸ªæ—¥å¿—
                    const entry = document.createElement('div');
                    entry.className = `trace-entry ${event.type}`;
                    entry.innerHTML = `
                        <div style="display: flex; gap: 10px; margin-bottom: 5px;">
                            <span class="trace-timestamp">[${event.timestamp}]</span>
                            <span class="trace-node" style="font-weight: bold;">${event.nodeName}</span>
                            <span style="color: rgba(226, 232, 240, 0.7);">æ‰§è¡Œä¸­...</span>
                        </div>
                        <div style="font-size: 0.85em; color: rgba(226, 232, 240, 0.8); margin-left: 140px;">
                            <strong>è¾“å…¥:</strong> ${event.input}
                        </div>
                    `;
                    log.appendChild(entry);
                    log.scrollTop = log.scrollHeight;

                    // 4. æ¨¡æ‹Ÿæ‰§è¡Œæ—¶é—´
                    await new Promise(resolve => setTimeout(resolve, event.duration));

                    // 5. æ›´æ–°æ—¥å¿—ä¸ºå®ŒæˆçŠ¶æ€
                    entry.innerHTML = `
                        <div style="display: flex; gap: 10px; margin-bottom: 5px;">
                            <span class="trace-timestamp">[${event.timestamp}]</span>
                            <span class="trace-node" style="font-weight: bold;">${event.nodeName}</span>
                            <span style="color: #22c55e;">âœ“ å®Œæˆ</span>
                        </div>
                        <div style="font-size: 0.85em; color: rgba(226, 232, 240, 0.8); margin-left: 140px;">
                            <strong>è¾“å…¥:</strong> ${event.input}<br>
                            <strong>è¾“å‡º:</strong> <span style="color: #22c55e;">${event.output}</span>
                        </div>
                    `;

                    // 6. æ›´æ–°çŠ¶æ€é¢æ¿çš„è¾“å‡º
                    if (stateAfter) {
                        stateAfter.innerHTML =
                            `<pre style="margin: 0; white-space: pre-wrap; word-break: break-all; color: #22c55e;">${event.output}</pre>`;
                    }

                    // 7. åœç”¨èŠ‚ç‚¹,æ˜¾ç¤ºç®­å¤´
                    if (nodes[event.nodeIndex]) {
                        nodes[event.nodeIndex].classList.remove('active');
                    }
                    if (arrows[event.nodeIndex]) {
                        arrows[event.nodeIndex].classList.add('visible', 'flow');
                    }

                    log.scrollTop = log.scrollHeight;
                    await new Promise(resolve => setTimeout(resolve, 400));
                }

                // æ·»åŠ æ€»ç»“
                const summary = document.createElement('div');
                summary.className = 'trace-entry success';
                summary.style.marginTop = '15px';
                summary.innerHTML = `
                    <div style="display: flex; gap: 10px; margin-bottom: 5px;">
                        <span class="trace-timestamp">[10:00:02.520]</span>
                        <span class="trace-node">âœ“ å›¾æ‰§è¡Œå®Œæˆ</span>
                    </div>
                    <div style="font-size: 0.85em; color: rgba(226, 232, 240, 0.8); margin-left: 140px;">
                        <strong>æ€»è€—æ—¶:</strong> 2.47s | <strong>æ‰§è¡ŒèŠ‚ç‚¹:</strong> 3 ä¸ª | <strong>çŠ¶æ€æ›´æ–°:</strong> 3 æ¬¡
                    </div>
                `;
                log.appendChild(summary);
                log.scrollTop = log.scrollHeight;

                await new Promise(resolve => setTimeout(resolve, 500));

                btn.disabled = false;
                btn.textContent = 'ğŸ”„ é‡æ–°è¿½è¸ª';
            } catch (error) {
                console.error('Trace animation error:', error);
                const btn = document.getElementById('traceBtn');
                if (btn) {
                    btn.disabled = false;
                    btn.textContent = 'â–¶ï¸ å¼€å§‹è¿½è¸ªæ¼”ç¤º';
                }
                alert('è¿½è¸ªæ¼”ç¤ºå‡ºé”™: ' + error.message);
            }
        }

        // åœºæ™¯ 4: æ€§èƒ½åˆ†ææ¼”ç¤º - è¯†åˆ«æ€§èƒ½ç“¶é¢ˆ
        async function animatePerformance() {
            try {
                const btn = document.getElementById('perfBtn');
                btn.disabled = true;
                btn.textContent = 'â³ åˆ†æä¸­...';

                // ç§»é™¤æ—§çš„åˆ†ææŠ¥å‘Š(å¦‚æœæœ‰)
                const oldAnalysis = document.querySelector('.perf-analysis-report');
                if (oldAnalysis) oldAnalysis.remove();

                // é‡ç½®æ‰€æœ‰è¿›åº¦æ¡
                for (let i = 1; i <= 3; i++) {
                    const bar = document.getElementById(`perf${i}-bar`);
                    const label = document.getElementById(`perf${i}-label`);
                    if (bar && label) {
                        bar.style.width = '0%';
                        label.textContent = '0.0s';
                        bar.classList.remove('slow', 'error');
                        bar.parentElement.parentElement.classList.remove('slow');
                    }
                }

                await new Promise(resolve => setTimeout(resolve, 600));

                // ============ æ¨¡æ‹Ÿæ€§èƒ½åˆ†ææ•°æ® ============
                const perfData = [
                    {
                        id: 1,
                        name: 'èŠ‚ç‚¹ A - æ•°æ®åŠ è½½',
                        time: 0.8,
                        threshold: 'good',  // å¿«é€Ÿ
                        color: '#22c55e'
                    },
                    {
                        id: 2,
                        name: 'èŠ‚ç‚¹ B - æ•°æ®å¤„ç†',
                        time: 4.2,  // æ…¢èŠ‚ç‚¹!
                        threshold: 'slow',
                        color: '#fb923c',
                        issue: 'æ€§èƒ½ç“¶é¢ˆï¼šå¤„ç†æ—¶é—´è¿‡é•¿'
                    },
                    {
                        id: 3,
                        name: 'èŠ‚ç‚¹ C - ç»“æœèšåˆ',
                        time: 1.5,
                        threshold: 'warning',  // å¯æ¥å—
                        color: '#fbbf24'
                    }
                ];

                const maxTime = 5.0; // æœ€å¤§æ—¶é—´ç”¨äºè®¡ç®—ç™¾åˆ†æ¯”

                for (let i = 0; i < perfData.length; i++) {
                    const data = perfData[i];
                    const percentage = (data.time / maxTime) * 100;

                    const bar = document.getElementById(`perf${data.id}-bar`);
                    const label = document.getElementById(`perf${data.id}-label`);

                    // éªŒè¯å…ƒç´ å­˜åœ¨
                    if (!bar || !label) {
                        console.error('Performance bar elements not found for ID:', data.id);
                        continue;
                    }

                    const perfBar = bar.parentElement.parentElement;

                    // åŠ¨ç”»æ˜¾ç¤ºè¿›åº¦æ¡
                    bar.style.width = percentage + '%';
                    bar.style.background = `linear-gradient(90deg, ${data.color} 0%, ${data.color}cc 100%)`;
                    label.textContent = data.time.toFixed(1) + 's';

                    // æ·»åŠ çŠ¶æ€ç±»
                    if (data.threshold === 'slow') {
                        bar.classList.add('slow');
                        perfBar.classList.add('slow');
                        bar.style.boxShadow = '0 0 20px rgba(251, 146, 60, 0.6)';
                    }

                    await new Promise(resolve => setTimeout(resolve, 1000));
                }

                // æ·»åŠ æ€§èƒ½åˆ†ææŠ¥å‘Š
                const perfContainer = document.getElementById('performanceBars');
                if (!perfContainer) {
                    throw new Error('Performance container not found');
                }

                const analysisDiv = document.createElement('div');
                analysisDiv.className = 'perf-analysis-report';
                analysisDiv.style.cssText = `
                    background: rgba(251, 146, 60, 0.15);
                    border: 2px solid rgba(251, 146, 60, 0.5);
                    border-radius: 12px;
                    padding: 20px;
                    margin: 20px auto;
                    max-width: 600px;
                    animation: fadeIn 0.5s ease-out;
                `;
                analysisDiv.innerHTML = `
                    <h4 style="color: #fb923c; margin-bottom: 15px; display: flex; align-items: center; gap: 10px;">
                        âš ï¸ æ€§èƒ½åˆ†ææŠ¥å‘Š
                    </h4>
                    <div style="color: rgba(226, 232, 240, 0.9); line-height: 1.8;">
                        <p style="margin-bottom: 12px;">
                            <strong style="color: #fb923c;">ğŸ”´ å‘ç°ç“¶é¢ˆ:</strong> èŠ‚ç‚¹ B æ‰§è¡Œæ—¶é—´ä¸º 4.2s,å æ€»æ—¶é—´çš„ 60%
                        </p>
                        <p style="margin-bottom: 12px; font-size: 0.95em; color: rgba(226, 232, 240, 0.8);">
                            <strong>ğŸ’¡ ä¼˜åŒ–å»ºè®®:</strong><br>
                            â€¢ æ£€æŸ¥æ˜¯å¦æœ‰é‡å¤è®¡ç®—<br>
                            â€¢ è€ƒè™‘ä½¿ç”¨ç¼“å­˜æœºåˆ¶<br>
                            â€¢ åˆ†ææ˜¯å¦æœ‰ I/O é˜»å¡<br>
                            â€¢ è¯„ä¼°æ˜¯å¦éœ€è¦å¼‚æ­¥å¤„ç†
                        </p>
                        <p style="font-size: 0.9em; color: rgba(34, 197, 94, 0.9);">
                            <strong>âœ… ä¼˜åŒ–åé¢„æœŸ:</strong> å¯å‡å°‘è‡³ 0.5-1.0s,æå‡ 75% æ€§èƒ½
                        </p>
                    </div>
                `;
                perfContainer.appendChild(analysisDiv);

                await new Promise(resolve => setTimeout(resolve, 500));

                btn.disabled = false;
                btn.textContent = 'ğŸ”„ é‡æ–°åˆ†æ';
            } catch (error) {
                console.error('Performance animation error:', error);
                const btn = document.getElementById('perfBtn');
                if (btn) {
                    btn.disabled = false;
                    btn.textContent = 'â–¶ï¸ å¼€å§‹æ€§èƒ½åˆ†æ';
                }
                alert('æ€§èƒ½åˆ†ææ¼”ç¤ºå‡ºé”™: ' + error.message);
            }
        }

        // å¯åŠ¨
        init();
    </script>
</body>
</html>
