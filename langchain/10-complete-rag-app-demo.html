<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>å®Œæ•´çš„ RAG åº”ç”¨ - LangChain å­¦ä¹  10</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
            position: relative;
        }

        /* æµ®åŠ¨å…‰çƒ */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
            animation: float 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, rgba(139, 92, 246, 0.1) 50%, transparent 70%);
            top: -200px;
            right: -200px;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.2) 0%, rgba(168, 85, 247, 0.1) 50%, transparent 70%);
            bottom: -150px;
            left: -150px;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(30px, -30px) scale(1.1); }
            50% { transform: translate(-20px, 20px) scale(0.9); }
            75% { transform: translate(-30px, -20px) scale(1.05); }
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(96, 165, 250, 0.3);
        }

        .header p {
            font-size: 1.3em;
            color: rgba(226, 232, 240, 0.8);
        }

        /* è¿›åº¦æ¡ */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #ec4899 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        /* åœºæ™¯å®¹å™¨ */
        .scene {
            display: none;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scene.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* åœºæ™¯æ ‡é¢˜ */
        .scene-title {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* åŠ¨ç”»ç”»å¸ƒ */
        .canvas-container {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        /* RAG æµç¨‹å›¾ */
        .rag-flow {
            display: flex;
            justify-content: center;
            align-items: center;
            gap: 20px;
            padding: 40px 20px;
            flex-wrap: wrap;
        }

        .flow-node {
            background: rgba(59, 130, 246, 0.2);
            border: 2px solid rgba(59, 130, 246, 0.5);
            border-radius: 15px;
            padding: 25px 30px;
            text-align: center;
            min-width: 160px;
            transition: all 0.6s;
            transform: scale(0.8);
            opacity: 0;
            position: relative;
        }

        .flow-node.visible {
            transform: scale(1);
            opacity: 1;
        }

        .flow-node:hover {
            transform: scale(1.1);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.6);
        }

        .flow-node h4 {
            color: #60a5fa;
            margin-bottom: 8px;
            font-size: 1.1em;
        }

        .flow-node p {
            color: rgba(226, 232, 240, 0.7);
            font-size: 0.85em;
        }

        .flow-node .step-number {
            position: absolute;
            top: -12px;
            left: -12px;
            width: 30px;
            height: 30px;
            background: #3b82f6;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: bold;
            font-size: 0.9em;
        }

        .flow-arrow {
            font-size: 2.5em;
            color: #3b82f6;
            opacity: 0;
            transition: all 0.6s;
        }

        .flow-arrow.visible {
            opacity: 1;
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 1; }
        }

        /* æ¶æ„å±‚çº§ */
        .architecture-layers {
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding: 30px 0;
        }

        .layer {
            background: rgba(255, 255, 255, 0.05);
            border-left: 5px solid;
            padding: 25px;
            border-radius: 12px;
            transform: translateX(-50px);
            opacity: 0;
            transition: all 0.6s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .layer.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .layer.offline {
            border-left-color: #3b82f6;
        }

        .layer.online {
            border-left-color: #8b5cf6;
        }

        .layer h3 {
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .layer.offline h3 {
            color: #60a5fa;
        }

        .layer.online h3 {
            color: #a78bfa;
        }

        .layer-content {
            display: flex;
            gap: 15px;
            flex-wrap: wrap;
        }

        .component {
            background: rgba(255, 255, 255, 0.08);
            padding: 15px 20px;
            border-radius: 8px;
            font-size: 0.95em;
            transition: all 0.3s;
        }

        .component:hover {
            background: rgba(255, 255, 255, 0.12);
            transform: translateY(-3px);
        }

        /* æµç¨‹åŠ¨ç”»å®¹å™¨ */
        .process-animation {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .process-step {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 15px;
            padding: 25px;
            text-align: center;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.6s;
            position: relative;
            overflow: hidden;
        }

        .process-step.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .process-step::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: linear-gradient(90deg, #3b82f6, #8b5cf6);
            transform: scaleX(0);
            transition: transform 0.6s;
        }

        .process-step.visible::before {
            transform: scaleX(1);
        }

        .process-step .icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .process-step h4 {
            color: #60a5fa;
            margin-bottom: 10px;
        }

        .process-step p {
            color: rgba(226, 232, 240, 0.7);
            font-size: 0.9em;
            line-height: 1.6;
        }

        /* ä»£ç ç‰‡æ®µ */
        .code-snippet {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.85em;
            line-height: 1.6;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.6s;
        }

        .code-snippet.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .code-snippet code {
            color: #e2e8f0;
        }

        .keyword { color: #c792ea; }
        .string { color: #c3e88d; }
        .comment { color: #546e7a; font-style: italic; }
        .function { color: #82aaff; }

        /* é«˜äº®æ¡† */
        .highlight-box {
            background: rgba(59, 130, 246, 0.15);
            border-left: 5px solid #3b82f6;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            animation: slideInRight 0.8s ease-out;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .highlight-box.success {
            background: rgba(34, 197, 94, 0.15);
            border-left-color: #22c55e;
        }

        .highlight-box h3 {
            color: #60a5fa;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .highlight-box.success h3 {
            color: #22c55e;
        }

        .highlight-box p {
            line-height: 1.8;
            color: rgba(226, 232, 240, 0.9);
        }

        /* ç‰¹æ€§ç½‘æ ¼ */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-card {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.6s;
        }

        .feature-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .feature-card:hover {
            background: rgba(59, 130, 246, 0.15);
            transform: translateY(-5px);
        }

        .feature-icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .feature-card h4 {
            color: #60a5fa;
            margin-bottom: 10px;
        }

        .feature-card p {
            color: rgba(226, 232, 240, 0.7);
            font-size: 0.9em;
            line-height: 1.6;
        }

        /* å¯¼èˆªæŒ‰é’® */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            gap: 20px;
        }

        .nav-btn {
            padding: 15px 40px;
            background: rgba(59, 130, 246, 0.2);
            border: 2px solid rgba(59, 130, 246, 0.5);
            border-radius: 12px;
            color: #60a5fa;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn:hover:not(:disabled) {
            background: rgba(59, 130, 246, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        /* é’ˆå¯¹ a æ ‡ç­¾çš„å¯¼èˆªæŒ‰é’®æ ·å¼ */
        .nav-btn.back-to-list {
            text-decoration: none;
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            color: #60a5fa;
        }

        .nav-btn.back-to-list:hover {
            background: rgba(59, 130, 246, 0.4);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .nav-btn.next {
            margin-left: auto;
        }

        /* åœºæ™¯æŒ‡ç¤ºå™¨ */
        .scene-indicators {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 40px 0;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }

        .indicator.active {
            background: #3b82f6;
            transform: scale(1.3);
        }

        .indicator:hover {
            transform: scale(1.2);
        }

        /* äº¤äº’å¼æ¼”ç¤º */
        .demo-container {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin: 30px 0;
        }

        .demo-input {
            display: flex;
            gap: 15px;
            margin-bottom: 20px;
        }

        .demo-input input {
            flex: 1;
            padding: 15px 20px;
            background: rgba(255, 255, 255, 0.08);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 10px;
            color: #e2e8f0;
            font-size: 1em;
            transition: all 0.3s;
        }

        .demo-input input:focus {
            outline: none;
            border-color: #3b82f6;
            background: rgba(255, 255, 255, 0.12);
        }

        .demo-input button {
            padding: 15px 30px;
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .demo-input button:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .demo-output {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            min-height: 150px;
            font-size: 0.95em;
            line-height: 1.8;
            color: rgba(226, 232, 240, 0.9);
        }

        .demo-output .retrieved {
            background: rgba(59, 130, 246, 0.1);
            padding: 15px;
            border-radius: 8px;
            margin-bottom: 15px;
            border-left: 3px solid #3b82f6;
        }

        .demo-output .answer {
            background: rgba(34, 197, 94, 0.1);
            padding: 15px;
            border-radius: 8px;
            border-left: 3px solid #22c55e;
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .rag-flow {
                flex-direction: column;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }
        }
    
        /* æ ‡å‡†å¯¼èˆªæ ·å¼ */
        .nav-card {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 24px;
            margin-bottom: 32px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nav-card a {
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .nav-card a:hover {
            transform: translateY(-2px);
        }

        /* é¡¶éƒ¨å¯¼èˆªå¡ç‰‡ */
        .top-nav-card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 24px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .top-nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .top-nav-left,
        .top-nav-center,
        .top-nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .top-nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #9ca3af;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .top-nav-link:hover {
            color: #e5e7eb;
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
        }

        .top-nav-link.home {
            color: #4ade80;
        }

        .top-nav-link.home:hover {
            color: #86efac;
        }

        .top-nav-link svg {
            width: 20px;
            height: 20px;
        }

        .top-nav-divider {
            width: 1px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
        }

        .top-nav-text {
            color: #6b7280;
            font-size: 0.9em;
        }

        .top-nav-progress {
            color: #9ca3af;
            font-size: 0.9em;
            font-weight: 500;
        }
</style>
</head>
<body>
    <!-- æµ®åŠ¨å…‰çƒ -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>    <!-- é¡¶éƒ¨å¯¼èˆª - è·¨æ¨¡å— -->
    <div class="top-nav-card">
        <div class="top-nav-container">
            <div class="top-nav-left">
                <a href="index.html" class="top-nav-link home">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    è¿”å›LangChainç›®å½•
                </a>
            </div>
            <div class="top-nav-center">
                <a href="09-callbacks-streaming-demo.html" class="top-nav-link">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    ä¸Šä¸€è¯¾
                </a>
                <div class="top-nav-divider"></div>
                <a href="../langgraph/11-langgraph-intro-demo.html" class="top-nav-link">
                    ä¸‹ä¸€è¯¾
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
            <div class="top-nav-right">
                <span class="top-nav-progress">è¯¾ç¨‹ 10 / 20</span>
            </div>
        </div>
    </div>

    <!-- è¿›åº¦æ¡ -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>å®Œæ•´çš„ RAG åº”ç”¨</h1>
            <p>ä»æ–‡æ¡£åˆ°ç­”æ¡ˆï¼šæ„å»ºç”Ÿäº§çº§æ£€ç´¢å¢å¼ºç”Ÿæˆç³»ç»Ÿ</p>
        </div>

        <!-- åœºæ™¯ 1: RAG åº”ç”¨æ¦‚è§ˆ -->
        <div class="scene active" id="scene1">
            <h2 class="scene-title">RAG ç³»ç»Ÿå…¨æ™¯å›¾</h2>

            <div class="canvas-container">
                <div class="rag-flow">
                    <div class="flow-node" data-delay="0">
                        <div class="step-number">1</div>
                        <h4>æ–‡æ¡£åŠ è½½</h4>
                        <p>Load Documents</p>
                    </div>

                    <div class="flow-arrow" data-delay="200">â†’</div>

                    <div class="flow-node" data-delay="400">
                        <div class="step-number">2</div>
                        <h4>æ–‡æ¡£åˆ†å‰²</h4>
                        <p>Split Text</p>
                    </div>

                    <div class="flow-arrow" data-delay="600">â†’</div>

                    <div class="flow-node" data-delay="800">
                        <div class="step-number">3</div>
                        <h4>å‘é‡åŒ–</h4>
                        <p>Embed</p>
                    </div>

                    <div class="flow-arrow" data-delay="1000">â†’</div>

                    <div class="flow-node" data-delay="1200" style="background: rgba(139, 92, 246, 0.2); border-color: rgba(139, 92, 246, 0.5);">
                        <div class="step-number" style="background: #8b5cf6;">4</div>
                        <h4 style="color: #a78bfa;">å‘é‡å­˜å‚¨</h4>
                        <p>Vector Store</p>
                    </div>

                    <div class="flow-arrow" data-delay="1400" style="color: #8b5cf6;">â†’</div>

                    <div class="flow-node" data-delay="1600" style="background: rgba(236, 72, 153, 0.2); border-color: rgba(236, 72, 153, 0.5);">
                        <div class="step-number" style="background: #ec4899;">5</div>
                        <h4 style="color: #f472b6;">æ£€ç´¢+ç”Ÿæˆ</h4>
                        <p>Retrieve & Generate</p>
                    </div>
                </div>
            </div>

            <div class="process-animation">
                <div class="process-step" data-delay="0">
                    <div class="icon">ğŸ“š</div>
                    <h4>ç¦»çº¿å¤„ç†</h4>
                    <p>æ–‡æ¡£åŠ è½½ã€åˆ†å‰²ã€å‘é‡åŒ–å¹¶å­˜å‚¨åˆ°å‘é‡æ•°æ®åº“</p>
                </div>

                <div class="process-step" data-delay="100">
                    <div class="icon">ğŸ”</div>
                    <h4>åœ¨çº¿æ£€ç´¢</h4>
                    <p>ç”¨æˆ·æŸ¥è¯¢å‘é‡åŒ–ï¼Œä»å‘é‡åº“æ£€ç´¢ç›¸å…³æ–‡æ¡£</p>
                </div>

                <div class="process-step" data-delay="200">
                    <div class="icon">ğŸ¤–</div>
                    <h4>æ™ºèƒ½ç”Ÿæˆ</h4>
                    <p>LLM åŸºäºæ£€ç´¢åˆ°çš„ä¸Šä¸‹æ–‡ç”Ÿæˆå‡†ç¡®ç­”æ¡ˆ</p>
                </div>
            </div>

            <div class="highlight-box">
                <h3>ä¸ºä»€ä¹ˆéœ€è¦ RAGï¼Ÿ</h3>
                <p>
                    LLM è™½ç„¶å¼ºå¤§ï¼Œä½†æœ‰ä¸¤å¤§å±€é™ï¼š<strong>çŸ¥è¯†æˆªæ­¢</strong>å’Œ<strong>å¹»è§‰é—®é¢˜</strong>ã€‚<br><br>
                    RAG é€šè¿‡æ£€ç´¢å¤–éƒ¨çŸ¥è¯†åº“ï¼Œè®© LLM èƒ½å¤Ÿï¼š<br><br>
                    âœ… è®¿é—®æœ€æ–°ä¿¡æ¯ï¼ˆä¸å†å—è®­ç»ƒæ•°æ®é™åˆ¶ï¼‰<br>
                    âœ… æä¾›å‡†ç¡®ç­”æ¡ˆï¼ˆå‡å°‘å¹»è§‰ï¼‰<br>
                    âœ… å¯è¿½æº¯æ¥æºï¼ˆç”¨æˆ·å¯ä»¥éªŒè¯ä¿¡æ¯ï¼‰<br>
                    âœ… å®šåˆ¶åŒ–çŸ¥è¯†ï¼ˆä½¿ç”¨ä¼ä¸šç§æœ‰æ•°æ®ï¼‰
                </p>
            </div>
        </div>

        <!-- åœºæ™¯ 2: åº”ç”¨æ¶æ„ -->
        <div class="scene" id="scene2">
            <h2 class="scene-title">RAG åº”ç”¨æ¶æ„</h2>

            <div class="canvas-container">
                <div class="architecture-layers">
                    <div class="layer offline" data-delay="0">
                        <h3>é˜¶æ®µ 1ï¼šæ•°æ®å‡†å¤‡ï¼ˆç¦»çº¿ï¼‰</h3>
                        <div class="layer-content">
                            <div class="component">ğŸ“„ æ–‡æ¡£åŠ è½½å™¨</div>
                            <div class="component">âœ‚ï¸ æ–‡æœ¬åˆ†å‰²å™¨</div>
                            <div class="component">ğŸ”¢ åµŒå…¥æ¨¡å‹</div>
                            <div class="component">ğŸ—„ï¸ å‘é‡æ•°æ®åº“</div>
                        </div>
                    </div>

                    <div class="layer online" data-delay="300">
                        <h3>é˜¶æ®µ 2ï¼šæŸ¥è¯¢å¤„ç†ï¼ˆåœ¨çº¿ï¼‰</h3>
                        <div class="layer-content">
                            <div class="component">â“ ç”¨æˆ·æŸ¥è¯¢</div>
                            <div class="component">ğŸ”„ æŸ¥è¯¢é‡å†™</div>
                            <div class="component">ğŸ”¢ æŸ¥è¯¢å‘é‡åŒ–</div>
                            <div class="component">ğŸ” ç›¸ä¼¼åº¦æ£€ç´¢</div>
                        </div>
                    </div>

                    <div class="layer online" data-delay="600">
                        <h3>é˜¶æ®µ 3ï¼šç­”æ¡ˆç”Ÿæˆï¼ˆåœ¨çº¿ï¼‰</h3>
                        <div class="layer-content">
                            <div class="component">ğŸ“‹ ä¸Šä¸‹æ–‡ç»„è£…</div>
                            <div class="component">ğŸ’¬ æç¤ºè¯æ¨¡æ¿</div>
                            <div class="component">ğŸ¤– LLM æ¨ç†</div>
                            <div class="component">âœ… ç­”æ¡ˆè¾“å‡º</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="feature-grid">
                <div class="feature-card" data-delay="0">
                    <div class="feature-icon">âš¡</div>
                    <h4>é«˜æ•ˆæ£€ç´¢</h4>
                    <p>å‘é‡æ•°æ®åº“å®ç°æ¯«ç§’çº§ç›¸ä¼¼åº¦æœç´¢</p>
                </div>

                <div class="feature-card" data-delay="100">
                    <div class="feature-icon">ğŸ¯</div>
                    <h4>ç²¾å‡†ç­”æ¡ˆ</h4>
                    <p>åŸºäºçœŸå®æ–‡æ¡£å†…å®¹ï¼Œå‡å°‘å¹»è§‰</p>
                </div>

                <div class="feature-card" data-delay="200">
                    <div class="feature-icon">ğŸ“Š</div>
                    <h4>å¯æ‰©å±•</h4>
                    <p>è½»æ¾æ·»åŠ æ–°æ–‡æ¡£åˆ°çŸ¥è¯†åº“</p>
                </div>

                <div class="feature-card" data-delay="300">
                    <div class="feature-icon">ğŸ”</div>
                    <h4>å¯è¿½æº¯</h4>
                    <p>ç­”æ¡ˆæ ‡æ³¨ä¿¡æ¯æ¥æºï¼Œå¢å¼ºå¯ä¿¡åº¦</p>
                </div>
            </div>

            <div class="code-snippet" data-delay="400">
<code><span class="comment"># RAG ç³»ç»Ÿæ ¸å¿ƒæµç¨‹</span>
<span class="keyword">def</span> <span class="function">rag_pipeline</span>(query: str) -> str:
    <span class="comment"># 1. æ£€ç´¢ç›¸å…³æ–‡æ¡£</span>
    docs = vector_store.similarity_search(query, k=<span class="string">3</span>)

    <span class="comment"># 2. æ„å»ºæç¤ºè¯</span>
    context = format_docs(docs)
    prompt = rag_template.format(
        context=context,
        question=query
    )

    <span class="comment"># 3. ç”Ÿæˆç­”æ¡ˆ</span>
    answer = llm.predict(prompt)

    <span class="keyword">return</span> answer</code>
            </div>
        </div>

        <!-- åœºæ™¯ 3: æ–‡æ¡£å¤„ç†æµç¨‹ -->
        <div class="scene" id="scene3">
            <h2 class="scene-title">æ–‡æ¡£å¤„ç†ï¼šä»åŸå§‹æ–‡ä»¶åˆ°å‘é‡</h2>

            <div class="canvas-container">
                <div class="rag-flow">
                    <div class="flow-node" data-delay="0">
                        <div class="step-number">1</div>
                        <h4>åŠ è½½æ–‡æ¡£</h4>
                        <p>Load</p>
                    </div>

                    <div class="flow-arrow" data-delay="200">â†’</div>

                    <div class="flow-node" data-delay="400">
                        <div class="step-number">2</div>
                        <h4>åˆ†å‰²æ–‡æœ¬</h4>
                        <p>Split</p>
                    </div>

                    <div class="flow-arrow" data-delay="600">â†’</div>

                    <div class="flow-node" data-delay="800">
                        <div class="step-number">3</div>
                        <h4>åµŒå…¥å‘é‡</h4>
                        <p>Embed</p>
                    </div>

                    <div class="flow-arrow" data-delay="1000">â†’</div>

                    <div class="flow-node" data-delay="1200" style="background: rgba(34, 197, 94, 0.2); border-color: rgba(34, 197, 94, 0.5);">
                        <div class="step-number" style="background: #22c55e;">âœ“</div>
                        <h4 style="color: #22c55e;">å­˜å‚¨å®Œæˆ</h4>
                        <p>Stored</p>
                    </div>
                </div>
            </div>

            <div class="process-animation">
                <div class="process-step" data-delay="0">
                    <div class="icon">ğŸ“„</div>
                    <h4>æ–‡æ¡£åŠ è½½</h4>
                    <p>æ”¯æŒ PDFã€TXTã€Markdownã€Word ç­‰å¤šç§æ ¼å¼</p>
                </div>

                <div class="process-step" data-delay="100">
                    <div class="icon">âœ‚ï¸</div>
                    <h4>æ™ºèƒ½åˆ†å‰²</h4>
                    <p>chunk_size: 500-1500å­—ç¬¦ï¼Œä¿æŒè¯­ä¹‰å®Œæ•´æ€§</p>
                </div>

                <div class="process-step" data-delay="200">
                    <div class="icon">ğŸ”¢</div>
                    <h4>å‘é‡åŒ–</h4>
                    <p>ä½¿ç”¨åµŒå…¥æ¨¡å‹å°†æ–‡æœ¬è½¬ä¸ºé«˜ç»´å‘é‡</p>
                </div>

                <div class="process-step" data-delay="300">
                    <div class="icon">ğŸ—„ï¸</div>
                    <h4>å‘é‡å­˜å‚¨</h4>
                    <p>Chromaã€FAISSã€Pinecone ç­‰å‘é‡æ•°æ®åº“</p>
                </div>
            </div>

            <div class="code-snippet" data-delay="400">
<code><span class="keyword">from</span> langchain_community.document_loaders <span class="keyword">import</span> TextLoader
<span class="keyword">from</span> langchain_text_splitters <span class="keyword">import</span> RecursiveCharacterTextSplitter
<span class="keyword">from</span> langchain_openai <span class="keyword">import</span> OpenAIEmbeddings
<span class="keyword">from</span> langchain_community.vectorstores <span class="keyword">import</span> Chroma

<span class="comment"># 1. åŠ è½½æ–‡æ¡£</span>
loader = TextLoader(<span class="string">"documents.txt"</span>)
documents = loader.load()

<span class="comment"># 2. åˆ†å‰²æ–‡æ¡£</span>
text_splitter = RecursiveCharacterTextSplitter(
    chunk_size=<span class="string">1000</span>,
    chunk_overlap=<span class="string">200</span>
)
splits = text_splitter.split_documents(documents)

<span class="comment"># 3. å‘é‡åŒ–å¹¶å­˜å‚¨</span>
vectorstore = Chroma.from_documents(
    documents=splits,
    embedding=OpenAIEmbeddings()
)

retriever = vectorstore.as_retriever(search_kwargs={<span class="string">"k"</span>: <span class="string">3</span>})</code>
            </div>

            <div class="highlight-box">
                <h3>æœ€ä½³å®è·µ</h3>
                <p>
                    <strong>chunk_size:</strong> 500-1500å­—ç¬¦ï¼Œå¤ªå°ä¼šä¸¢å¤±ä¸Šä¸‹æ–‡ï¼Œå¤ªå¤§ä¼šé™ä½æ£€ç´¢ç²¾åº¦<br>
                    <strong>chunk_overlap:</strong> 10-20%ï¼Œç¡®ä¿è¾¹ç•Œä¿¡æ¯ä¸ä¸¢å¤±<br>
                    <strong>å…ƒæ•°æ®:</strong> ä¿ç•™æ–‡æ¡£æ¥æºã€é¡µç ã€æ—¶é—´ç­‰ä¿¡æ¯ï¼Œä¾¿äºè¿½æº¯
                </p>
            </div>
        </div>

        <!-- åœºæ™¯ 4: æ£€ç´¢æµç¨‹ -->
        <div class="scene" id="scene4">
            <h2 class="scene-title">æ™ºèƒ½æ£€ç´¢ï¼šæ‰¾åˆ°æœ€ç›¸å…³çš„çŸ¥è¯†</h2>

            <div class="canvas-container">
                <div class="demo-container">
                    <div class="demo-input">
                        <input type="text" id="queryInput" placeholder="è¾“å…¥ä½ çš„é—®é¢˜..." value="ä»€ä¹ˆæ˜¯ RAGï¼Ÿ">
                        <button onclick="runRetrievalDemo()">å¼€å§‹æ£€ç´¢</button>
                    </div>
                    <div class="demo-output" id="retrievalOutput">
                        <p style="color: rgba(226, 232, 240, 0.5);">ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹æ£€ç´¢è¿‡ç¨‹...</p>
                    </div>
                </div>
            </div>

            <div class="process-animation">
                <div class="process-step" data-delay="0">
                    <div class="icon">â“</div>
                    <h4>æŸ¥è¯¢è¾“å…¥</h4>
                    <p>ç”¨æˆ·æå‡ºè‡ªç„¶è¯­è¨€é—®é¢˜</p>
                </div>

                <div class="process-step" data-delay="100">
                    <div class="icon">ğŸ”„</div>
                    <h4>æŸ¥è¯¢é‡å†™</h4>
                    <p>ä¼˜åŒ–æŸ¥è¯¢ï¼Œæé«˜æ£€ç´¢å‡†ç¡®ç‡</p>
                </div>

                <div class="process-step" data-delay="200">
                    <div class="icon">ğŸ”¢</div>
                    <h4>å‘é‡åŒ–</h4>
                    <p>å°†æŸ¥è¯¢è½¬ä¸ºå‘é‡è¡¨ç¤º</p>
                </div>

                <div class="process-step" data-delay="300">
                    <div class="icon">ğŸ”</div>
                    <h4>ç›¸ä¼¼åº¦æœç´¢</h4>
                    <p>åœ¨å‘é‡åº“ä¸­æ‰¾åˆ°æœ€ç›¸å…³çš„ k ä¸ªæ–‡æ¡£</p>
                </div>
            </div>

            <div class="code-snippet" data-delay="400">
<code><span class="keyword">from</span> langchain.chains <span class="keyword">import</span> create_retrieval_chain

<span class="comment"># é…ç½®æ£€ç´¢å™¨</span>
retriever = vectorstore.as_retriever(
    search_type=<span class="string">"similarity"</span>,
    search_kwargs={<span class="string">"k"</span>: <span class="string">3</span>}
)

<span class="comment"># æ‰§è¡Œæ£€ç´¢</span>
query = <span class="string">"ä»€ä¹ˆæ˜¯ RAGï¼Ÿ"</span>
relevant_docs = retriever.invoke(query)

<span class="keyword">for</span> i, doc <span class="keyword">in</span> enumerate(relevant_docs, <span class="string">1</span>):
    <span class="keyword">print</span>(f<span class="string">"æ–‡æ¡£ {i}:"</span>)
    <span class="keyword">print</span>(f<span class="string">"å†…å®¹: {doc.page_content}"</span>)
    <span class="keyword">print</span>(f<span class="string">"æ¥æº: {doc.metadata}"</span>)
    <span class="keyword">print</span>(<span class="string">"---"</span>)</code>
            </div>

            <div class="highlight-box">
                <h3>æ£€ç´¢ç­–ç•¥å¯¹æ¯”</h3>
                <p>
                    <strong>ç›¸ä¼¼åº¦æ£€ç´¢ (Similarity):</strong> æœ€åŸºç¡€çš„å‘é‡æ£€ç´¢ï¼Œæ‰¾æœ€ç›¸ä¼¼çš„ k ä¸ª<br>
                    <strong>MMR (Maximal Marginal Relevance):</strong> å¹³è¡¡ç›¸å…³æ€§å’Œå¤šæ ·æ€§ï¼Œé¿å…é‡å¤<br>
                    <strong>ç›¸ä¼¼åº¦é˜ˆå€¼ (Similarity with Threshold):</strong> åªè¿”å›ç›¸ä¼¼åº¦é«˜äºé˜ˆå€¼çš„ç»“æœ<br>
                    <strong>æ··åˆæ£€ç´¢ (Hybrid):</strong> ç»“åˆå‘é‡æ£€ç´¢å’Œå…³é”®è¯æ£€ç´¢ï¼Œæé«˜å‡†ç¡®ç‡
                </p>
            </div>
        </div>

        <!-- åœºæ™¯ 5: ç”Ÿæˆæµç¨‹ -->
        <div class="scene" id="scene5">
            <h2 class="scene-title">ç­”æ¡ˆç”Ÿæˆï¼šLLM çš„æ¨ç†è¿‡ç¨‹</h2>

            <div class="canvas-container">
                <div class="rag-flow">
                    <div class="flow-node" data-delay="0" style="background: rgba(59, 130, 246, 0.2); border-color: rgba(59, 130, 246, 0.5);">
                        <div class="step-number">1</div>
                        <h4 style="color: #60a5fa;">é—®é¢˜</h4>
                        <p>Query</p>
                    </div>

                    <div class="flow-arrow" data-delay="200">+</div>

                    <div class="flow-node" data-delay="400" style="background: rgba(139, 92, 246, 0.2); border-color: rgba(139, 92, 246, 0.5);">
                        <div class="step-number" style="background: #8b5cf6;">2</div>
                        <h4 style="color: #a78bfa;">ä¸Šä¸‹æ–‡</h4>
                        <p>Context</p>
                    </div>

                    <div class="flow-arrow" data-delay="600">â†’</div>

                    <div class="flow-node" data-delay="800" style="background: rgba(236, 72, 153, 0.2); border-color: rgba(236, 72, 153, 0.5);">
                        <div class="step-number" style="background: #ec4899;">3</div>
                        <h4 style="color: #f472b6;">æç¤ºè¯</h4>
                        <p>Prompt</p>
                    </div>

                    <div class="flow-arrow" data-delay="1000">â†’</div>

                    <div class="flow-node" data-delay="1200" style="background: rgba(34, 197, 94, 0.2); border-color: rgba(34, 197, 94, 0.5);">
                        <div class="step-number" style="background: #22c55e;">âœ“</div>
                        <h4 style="color: #22c55e;">ç­”æ¡ˆ</h4>
                        <p>Answer</p>
                    </div>
                </div>
            </div>

            <div class="code-snippet" data-delay="0">
<code><span class="keyword">from</span> langchain_core.prompts <span class="keyword">import</span> ChatPromptTemplate
<span class="keyword">from</span> langchain_core.output_parsers <span class="keyword">import</span> StrOutputParser
<span class="keyword">from</span> langchain.chains <span class="keyword">import</span> create_retrieval_chain

<span class="comment"># RAG æç¤ºè¯æ¨¡æ¿</span>
prompt_template = <span class="string">"""ä½ æ˜¯ä¸€ä¸ªæœ‰å¸®åŠ©çš„ AI åŠ©æ‰‹ã€‚è¯·åŸºäºä»¥ä¸‹ä¸Šä¸‹æ–‡å›ç­”é—®é¢˜ã€‚

ä¸Šä¸‹æ–‡ï¼š
{context}

é—®é¢˜ï¼š{input}

å›ç­”è¦æ±‚ï¼š
1. åªä½¿ç”¨ä¸Šä¸‹æ–‡ä¸­çš„ä¿¡æ¯
2. å¦‚æœä¸Šä¸‹æ–‡ä¸­æ²¡æœ‰ç›¸å…³ä¿¡æ¯ï¼Œè¯·æ˜ç¡®è¯´æ˜
3. ä¿æŒå›ç­”ç®€æ´å‡†ç¡®

å›ç­”ï¼š"""</span>

prompt = ChatPromptTemplate.from_template(prompt_template)

<span class="comment"># æ„å»º RAG é“¾</span>
rag_chain = create_retrieval_chain(
    retriever,
    prompt | llm | StrOutputParser()
)

<span class="comment"># ç”Ÿæˆç­”æ¡ˆ</span>
result = rag_chain.invoke({<span class="string">"input"</span>: <span class="string">"ä»€ä¹ˆæ˜¯ RAGï¼Ÿ"</span>})
<span class="keyword">print</span>(result[<span class="string">"answer"</span>])</code>
            </div>

            <div class="highlight-box">
                <h3>æç¤ºè¯å·¥ç¨‹è¦ç‚¹</h3>
                <p>
                    <strong>è§’è‰²å®šä¹‰:</strong> æ˜ç¡® AI çš„èº«ä»½å’ŒèŒè´£<br>
                    <strong>ä¸Šä¸‹æ–‡é™åˆ¶:</strong> è¦æ±‚åªä½¿ç”¨æä¾›çš„ä¿¡æ¯ï¼Œé¿å…å¹»è§‰<br>
                    <strong>æ‹’ç»ç­–ç•¥:</strong> æ˜ç¡®è¯´æ˜å¦‚ä½•å¤„ç†ä¿¡æ¯ä¸è¶³çš„æƒ…å†µ<br>
                    <strong>è¾“å‡ºæ ¼å¼:</strong> æŒ‡å®šæœŸæœ›çš„ç­”æ¡ˆæ ¼å¼å’Œé£æ ¼<br>
                    <strong>å¼•ç”¨è¦æ±‚:</strong> è¦æ±‚æ ‡æ³¨ä¿¡æ¯æ¥æºï¼Œæé«˜å¯ä¿¡åº¦
                </p>
            </div>

            <div class="feature-grid">
                <div class="feature-card" data-delay="0">
                    <div class="feature-icon">ğŸ“‹</div>
                    <h4>ä¸Šä¸‹æ–‡æ„ŸçŸ¥</h4>
                    <p>LLM åŸºäºæ£€ç´¢åˆ°çš„æ–‡æ¡£ç”Ÿæˆç­”æ¡ˆ</p>
                </div>

                <div class="feature-card" data-delay="100">
                    <div class="feature-icon">ğŸ¯</div>
                    <h4>å‡†ç¡®æ€§é«˜</h4>
                    <p>å‡å°‘å¹»è§‰ï¼Œç­”æ¡ˆåŸºäºäº‹å®</p>
                </div>

                <div class="feature-card" data-delay="200">
                    <div class="feature-icon">ğŸ”—</div>
                    <h4>æ¥æºå¼•ç”¨</h4>
                    <p>æ ‡æ³¨ä¿¡æ¯æ¥æºï¼Œä¾¿äºéªŒè¯</p>
                </div>
            </div>
        </div>

        <!-- åœºæ™¯ 6: ä¼˜åŒ–å’Œæœ€ä½³å®è·µ -->
        <div class="scene" id="scene6">
            <h2 class="scene-title">ç”Ÿäº§çº§ RAG æœ€ä½³å®è·µ</h2>

            <div class="feature-grid">
                <div class="feature-card" data-delay="0">
                    <div class="feature-icon">ğŸ“„</div>
                    <h4>æ–‡æ¡£å‡†å¤‡</h4>
                    <p>æ¸…ç†é‡å¤å†…å®¹ã€ä¿ç•™å…ƒæ•°æ®ã€æ ‡å‡†åŒ–æ ¼å¼</p>
                </div>

                <div class="feature-card" data-delay="100">
                    <div class="feature-icon">âœ‚ï¸</div>
                    <h4>åˆç†åˆ†å‰²</h4>
                    <p>chunk_size: 1000, overlap: 200</p>
                </div>

                <div class="feature-card" data-delay="200">
                    <div class="feature-icon">ğŸ”</div>
                    <h4>æ£€ç´¢ä¼˜åŒ–</h4>
                    <p>k=3-5, ä½¿ç”¨æ··åˆæ£€ç´¢å’ŒæŸ¥è¯¢é‡å†™</p>
                </div>

                <div class="feature-card" data-delay="300">
                    <div class="feature-icon">ğŸ’¬</div>
                    <h4>æç¤ºè¯å·¥ç¨‹</h4>
                    <p>æ˜ç¡®è¦æ±‚ã€æ‹’ç»ç­–ç•¥ã€å¼•ç”¨æ¥æº</p>
                </div>

                <div class="feature-card" data-delay="400">
                    <div class="feature-icon">ğŸ§ª</div>
                    <h4>æŒç»­è¯„ä¼°</h4>
                    <p>ç›‘æµ‹æ£€ç´¢è´¨é‡ã€ç­”æ¡ˆç›¸å…³æ€§ã€ç”¨æˆ·æ»¡æ„åº¦</p>
                </div>

                <div class="feature-card" data-delay="500">
                    <div class="feature-icon">âš¡</div>
                    <h4>æ€§èƒ½ä¼˜åŒ–</h4>
                    <p>ç¼“å­˜æŸ¥è¯¢ã€å¹¶è¡Œå¤„ç†ã€ä½¿ç”¨æ›´å¿«çš„å‘é‡åº“</p>
                </div>
            </div>

            <div class="highlight-box">
                <h3>å¸¸è§é—®é¢˜åŠè§£å†³æ–¹æ¡ˆ</h3>
                <p>
                    <strong>âŒ æ£€ç´¢ç»“æœä¸ç›¸å…³</strong> â†’ æ”¹è¿›æ–‡æ¡£è´¨é‡ã€è°ƒæ•´ chunk_sizeã€ä½¿ç”¨æŸ¥è¯¢é‡å†™<br>
                    <strong>âŒ ç­”æ¡ˆä¸å‡†ç¡®</strong> â†’ æ”¹è¿›æç¤ºè¯ã€å¢åŠ  k å€¼ã€ä½¿ç”¨æ›´å¥½çš„ LLM<br>
                    <strong>âŒ å“åº”é€Ÿåº¦æ…¢</strong> â†’ å‡å°‘æ£€ç´¢æ–‡æ¡£æ•°ã€ä½¿ç”¨æ›´å¿«çš„å‘é‡æ•°æ®åº“ã€ç¼“å­˜æŸ¥è¯¢<br>
                    <strong>âŒ äº§ç”Ÿå¹»è§‰</strong> â†’ æ˜ç¡®è¦æ±‚ä½¿ç”¨ä¸Šä¸‹æ–‡ã€é™ä½ temperatureã€æ·»åŠ äº‹å®æ ¸æŸ¥
                </p>
            </div>

            <div class="highlight-box success">
                <h3>æ­å–œä½ å®Œæˆäº† LangChain åŸºç¡€å­¦ä¹ ï¼</h3>
                <p>
                    <strong>æŒæ¡çš„æ ¸å¿ƒæŠ€èƒ½ï¼š</strong><br><br>
                    âœ… LCEL å’Œé“¾å¼è°ƒç”¨<br>
                    âœ… æç¤ºè¯æ¨¡æ¿ç®¡ç†<br>
                    âœ… å¯¹è¯è®°å¿†æœºåˆ¶<br>
                    âœ… æ–‡æ¡£å¤„ç†æµæ°´çº¿<br>
                    âœ… å‘é‡å­˜å‚¨å’Œæ£€ç´¢<br>
                    âœ… RAG ç³»ç»Ÿæ„å»º<br>
                    âœ… è¾“å‡ºè§£æå™¨<br>
                    âœ… å›è°ƒå’Œæµå¼è¾“å‡º<br><br>
                    <strong>ä¸‹ä¸€æ­¥ï¼š</strong>å¼€å§‹æ„å»ºè‡ªå·±çš„ RAG åº”ç”¨ï¼Œåœ¨å®è·µä¸­ä¸æ–­æå‡ï¼
                </p>
            </div>
        </div>

        <!-- åœºæ™¯æŒ‡ç¤ºå™¨ -->
        <div class="scene-indicators">
            <div class="indicator active" data-scene="1"></div>
            <div class="indicator" data-scene="2"></div>
            <div class="indicator" data-scene="3"></div>
            <div class="indicator" data-scene="4"></div>
            <div class="indicator" data-scene="5"></div>
            <div class="indicator" data-scene="6"></div>
        </div>

        <!-- å¯¼èˆªæŒ‰é’® -->
        <div class="nav-buttons">
            <button class="nav-btn" id="prevBtn" disabled>
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                ä¸Šä¸€èŠ‚
            </button>
            <a href="index.html" class="nav-btn back-to-list">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
                </svg>
                è¯¾ç¨‹åˆ—è¡¨
            </a>
            <button class="nav-btn next" id="nextBtn">
                ä¸‹ä¸€èŠ‚
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // åœºæ™¯æ•°æ®
        const totalScenes = 6;
        let currentScene = 1;

        // DOM å…ƒç´ 
        const progressBar = document.getElementById('progressBar');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const indicators = document.querySelectorAll('.indicator');

        // æ¨¡æ‹Ÿæ£€ç´¢æ¼”ç¤º
        function runRetrievalDemo() {
            const output = document.getElementById('retrievalOutput');
            const query = document.getElementById('queryInput').value;

            output.innerHTML = '<p style="color: #60a5fa;">æ­£åœ¨å¤„ç†æŸ¥è¯¢...</p>';

            setTimeout(() => {
                output.innerHTML = `
                    <div style="color: #a78bfa; margin-bottom: 15px;">
                        <strong>æ­¥éª¤ 1:</strong> æŸ¥è¯¢å‘é‡åŒ–å®Œæˆ âœ“
                    </div>
                    <div style="color: #a78bfa; margin-bottom: 15px;">
                        <strong>æ­¥éª¤ 2:</strong> ç›¸ä¼¼åº¦æœç´¢å®Œæˆï¼Œæ‰¾åˆ° 3 ä¸ªç›¸å…³æ–‡æ¡£ âœ“
                    </div>
                    <div class="retrieved">
                        <strong>ğŸ“„ æ–‡æ¡£ 1 (ç›¸ä¼¼åº¦: 0.92):</strong><br>
                        RAGï¼ˆæ£€ç´¢å¢å¼ºç”Ÿæˆï¼‰ç»“åˆäº†ä¿¡æ¯æ£€ç´¢å’Œæ–‡æœ¬ç”ŸæˆæŠ€æœ¯ï¼Œé€šè¿‡ä»çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³æ–‡æ¡£æ¥å¢å¼º LLM çš„å›ç­”èƒ½åŠ›ã€‚
                    </div>
                    <div class="retrieved">
                        <strong>ğŸ“„ æ–‡æ¡£ 2 (ç›¸ä¼¼åº¦: 0.87):</strong><br>
                        å‘é‡æ•°æ®åº“å¦‚ Chromaã€FAISS ä¸“é—¨ç”¨äºå­˜å‚¨å’Œæ£€ç´¢æ–‡æ¡£å‘é‡ï¼Œå®ç°é«˜æ•ˆçš„è¯­ä¹‰æœç´¢ã€‚
                    </div>
                    <div class="retrieved">
                        <strong>ğŸ“„ æ–‡æ¡£ 3 (ç›¸ä¼¼åº¦: 0.81):</strong><br>
                        LangChain æä¾›äº†å®Œæ•´çš„ RAG å®ç°å·¥å…·ï¼ŒåŒ…æ‹¬æ–‡æ¡£åŠ è½½å™¨ã€æ–‡æœ¬åˆ†å‰²å™¨å’Œå‘é‡å­˜å‚¨é›†æˆã€‚
                    </div>
                    <div class="answer">
                        <strong>âœ… æ£€ç´¢å®Œæˆï¼</strong><br>
                        å·²å°†ç›¸å…³æ–‡æ¡£ä¼ é€’ç»™ LLM è¿›è¡Œç­”æ¡ˆç”Ÿæˆ...
                    </div>
                `;
            }, 1500);
        }

        // åˆå§‹åŒ–
        function init() {
            updateScene();
            setupEventListeners();
            animateSceneElements();
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬
        function setupEventListeners() {
            // å¯¼èˆªæŒ‰é’®
            prevBtn.addEventListener('click', () => {
                if (currentScene > 1) {
                    currentScene--;
                    updateScene();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentScene < totalScenes) {
                    currentScene++;
                    updateScene();
                }
            });

            // æŒ‡ç¤ºå™¨
            indicators.forEach(indicator => {
                indicator.addEventListener('click', () => {
                    currentScene = parseInt(indicator.dataset.scene);
                    updateScene();
                });
            });

            // é”®ç›˜å¯¼èˆª
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' && currentScene < totalScenes) {
                    currentScene++;
                    updateScene();
                } else if (e.key === 'ArrowLeft' && currentScene > 1) {
                    currentScene--;
                    updateScene();
                }
            });
        }

        // æ›´æ–°åœºæ™¯
        function updateScene() {
            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentScene - 1) / (totalScenes - 1)) * 100;
            progressBar.style.width = progress + '%';

            // æ›´æ–°åœºæ™¯æ˜¾ç¤º
            document.querySelectorAll('.scene').forEach((scene, index) => {
                if (index + 1 === currentScene) {
                    scene.classList.add('active');
                } else {
                    scene.classList.remove('active');
                }
            });

            // æ›´æ–°æŒ‡ç¤ºå™¨
            indicators.forEach((indicator, index) => {
                if (index + 1 === currentScene) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.remove('active');
                }
            });

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            prevBtn.disabled = currentScene === 1;
            nextBtn.disabled = currentScene === totalScenes;

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // åŠ¨ç”»æ˜¾ç¤ºå…ƒç´ 
            setTimeout(() => {
                animateSceneElements();
            }, 300);
        }

        // åŠ¨ç”»æ˜¾ç¤ºåœºæ™¯å…ƒç´ 
        function animateSceneElements() {
            const currentSceneEl = document.querySelector(`#scene${currentScene}`);

            // æµç¨‹èŠ‚ç‚¹åŠ¨ç”»
            currentSceneEl.querySelectorAll('.flow-node').forEach((node, index) => {
                const delay = parseInt(node.dataset.delay) || index * 200;
                setTimeout(() => {
                    node.classList.add('visible');
                }, delay);
            });

            // æµç¨‹ç®­å¤´åŠ¨ç”»
            currentSceneEl.querySelectorAll('.flow-arrow').forEach((arrow, index) => {
                const delay = parseInt(arrow.dataset.delay) || index * 200;
                setTimeout(() => {
                    arrow.classList.add('visible');
                }, delay);
            });

            // æ¶æ„å±‚çº§åŠ¨ç”»
            currentSceneEl.querySelectorAll('.layer').forEach((layer, index) => {
                const delay = parseInt(layer.dataset.delay) || index * 300;
                setTimeout(() => {
                    layer.classList.add('visible');
                }, delay);
            });

            // æµç¨‹æ­¥éª¤åŠ¨ç”»
            currentSceneEl.querySelectorAll('.process-step').forEach((step, index) => {
                const delay = parseInt(step.dataset.delay) || index * 100;
                setTimeout(() => {
                    step.classList.add('visible');
                }, delay);
            });

            // ç‰¹æ€§å¡ç‰‡åŠ¨ç”»
            currentSceneEl.querySelectorAll('.feature-card').forEach((card, index) => {
                const delay = parseInt(card.dataset.delay) || index * 100;
                setTimeout(() => {
                    card.classList.add('visible');
                }, delay);
            });

            // ä»£ç ç‰‡æ®µåŠ¨ç”»
            currentSceneEl.querySelectorAll('.code-snippet').forEach((snippet, index) => {
                const delay = parseInt(snippet.dataset.delay) || index * 200;
                setTimeout(() => {
                    snippet.classList.add('visible');
                }, delay);
            });
        }

        // å¯åŠ¨
        init();
    </script>
</body>
</html>
