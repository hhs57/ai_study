<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>04 - å¯¹è¯è®°å¿† | LangChain å­¦ä¹ å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
            position: relative;
        }

        /* æµ®åŠ¨å…‰çƒ */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
            animation: float 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(59, 130, 246, 0.3) 0%, rgba(139, 92, 246, 0.1) 50%, transparent 70%);
            top: -200px;
            right: -200px;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(168, 85, 247, 0.2) 0%, rgba(236, 72, 153, 0.1) 50%, transparent 70%);
            bottom: -150px;
            left: -150px;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(30px, -30px) scale(1.1); }
            50% { transform: translate(-20px, 20px) scale(0.9); }
            75% { transform: translate(-30px, -20px) scale(1.05); }
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(96, 165, 250, 0.3);
        }

        .header p {
            font-size: 1.3em;
            color: rgba(226, 232, 240, 0.8);
        }

        /* è¿›åº¦æ¡ */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #3b82f6 0%, #8b5cf6 50%, #d946ef 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        /* åœºæ™¯å®¹å™¨ */
        .scene {
            display: none;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scene.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* åœºæ™¯æ ‡é¢˜ */
        .scene-title {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #60a5fa 0%, #a78bfa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* åŠ¨ç”»ç”»å¸ƒ */
        .canvas-container {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            min-height: 400px;
            position: relative;
        }

        /* å¯¹è¯æ°”æ³¡ */
        .chat-container {
            max-width: 800px;
            margin: 0 auto;
        }

        .chat-bubble {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(10px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 20px 25px;
            margin-bottom: 20px;
            position: relative;
            animation: slideInUp 0.6s ease-out forwards;
            opacity: 0;
            transform: translateY(30px);
        }

        @keyframes slideInUp {
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .chat-bubble.user {
            background: linear-gradient(135deg, rgba(59, 130, 246, 0.2), rgba(59, 130, 246, 0.1));
            border-left: 4px solid #3b82f6;
            margin-left: auto;
            max-width: 80%;
        }

        .chat-bubble.ai {
            background: linear-gradient(135deg, rgba(139, 92, 246, 0.2), rgba(139, 92, 246, 0.1));
            border-left: 4px solid #8b5cf6;
            margin-right: auto;
            max-width: 80%;
        }

        .chat-bubble .sender {
            font-size: 0.85em;
            color: rgba(226, 232, 240, 0.6);
            margin-bottom: 8px;
            font-weight: 600;
        }

        .chat-bubble .message {
            font-size: 1.05em;
            line-height: 1.6;
            color: rgba(226, 232, 240, 0.95);
        }

        /* è®°å¿†å¯è§†åŒ– */
        .memory-visualization {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 16px;
            padding: 30px;
            margin-top: 40px;
            border: 2px dashed rgba(139, 92, 246, 0.3);
        }

        .memory-title {
            font-size: 1.3em;
            color: #a78bfa;
            margin-bottom: 20px;
            text-align: center;
        }

        .memory-items {
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .memory-item {
            background: rgba(139, 92, 246, 0.1);
            border: 1px solid rgba(139, 92, 246, 0.3);
            border-radius: 10px;
            padding: 15px 20px;
            font-size: 0.95em;
            transition: all 0.3s;
            animation: slideInRight 0.5s ease-out forwards;
            opacity: 0;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(-30px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .memory-item:hover {
            background: rgba(139, 92, 246, 0.2);
            border-color: rgba(139, 92, 246, 0.5);
            transform: translateX(5px);
        }

        /* è®°å¿†ç±»å‹å¡ç‰‡ */
        .memory-types-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .memory-type-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            padding: 30px;
            border-radius: 16px;
            border: 1px solid rgba(255, 255, 255, 0.1);
            text-align: center;
            transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
            transform: translateY(30px);
            opacity: 0;
        }

        .memory-type-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .memory-type-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 12px 40px rgba(139, 92, 246, 0.3);
            border-color: rgba(139, 92, 246, 0.4);
        }

        .memory-type-card .icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .memory-type-card h3 {
            color: #a78bfa;
            font-size: 1.4em;
            margin-bottom: 12px;
        }

        .memory-type-card p {
            color: rgba(226, 232, 240, 0.7);
            line-height: 1.6;
            font-size: 0.95em;
        }

        /* ä»£ç å±•ç¤º */
        .code-showcase {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 16px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 30px 0;
        }

        .code-showcase-header {
            background: rgba(139, 92, 246, 0.2);
            padding: 20px 30px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .code-showcase-header h3 {
            color: #a78bfa;
            font-size: 1.2em;
        }

        .code-showcase-body {
            padding: 30px;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.95em;
            line-height: 1.8;
            overflow-x: auto;
        }

        .code-showcase-body code {
            color: #e2e8f0;
        }

        .keyword { color: #c792ea; font-weight: 600; }
        .string { color: #c3e88d; }
        .comment { color: #546e7a; font-style: italic; }
        .function { color: #82aaff; }
        .class-name { color: #ffcb6b; }

        /* é«˜äº®æ¡† */
        .highlight-box {
            background: rgba(139, 92, 246, 0.15);
            border-left: 5px solid #8b5cf6;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            animation: slideInRight 0.8s ease-out;
        }

        .highlight-box.success {
            background: rgba(34, 197, 94, 0.15);
            border-left-color: #22c55e;
        }

        .highlight-box.warning {
            background: rgba(251, 191, 36, 0.15);
            border-left-color: #fbbf24;
        }

        .highlight-box.error {
            background: rgba(239, 68, 68, 0.15);
            border-left-color: #ef4444;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .highlight-box h3 {
            color: #a78bfa;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .highlight-box.success h3 {
            color: #22c55e;
        }

        .highlight-box.warning h3 {
            color: #fbbf24;
        }

        .highlight-box.error h3 {
            color: #ef4444;
        }

        .highlight-box p {
            line-height: 1.8;
            color: rgba(226, 232, 240, 0.9);
        }

        /* Token è®¡æ•°å™¨ */
        .token-counter {
            background: rgba(239, 68, 68, 0.1);
            border: 2px solid rgba(239, 68, 68, 0.3);
            border-radius: 12px;
            padding: 25px;
            text-align: center;
            margin: 30px 0;
            transition: all 0.3s;
        }

        .token-counter.warning {
            background: rgba(251, 191, 36, 0.1);
            border-color: rgba(251, 191, 36, 0.5);
        }

        .token-counter.danger {
            background: rgba(239, 68, 68, 0.15);
            border-color: rgba(239, 68, 68, 0.6);
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { box-shadow: 0 0 20px rgba(239, 68, 68, 0.3); }
            50% { box-shadow: 0 0 40px rgba(239, 68, 68, 0.6); }
        }

        .token-number {
            font-size: 4em;
            font-weight: bold;
            color: #ef4444;
            margin: 10px 0;
            animation: pulse 2s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        .token-label {
            color: rgba(226, 232, 240, 0.7);
            font-size: 1.1em;
        }

        /* å¯¹è¯æ¼”ç¤ºå®¹å™¨ */
        .conversation-demo {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 16px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid rgba(255, 255, 255, 0.1);
            min-height: 400px;
            max-height: 600px;
            overflow-y: auto;
        }

        .conversation-round {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 20px;
            margin-bottom: 20px;
            opacity: 0;
            transform: translateX(-30px);
            transition: all 0.5s;
            border-left: 4px solid #8b5cf6;
        }

        .conversation-round.visible {
            opacity: 1;
            transform: translateX(0);
        }

        .round-number {
            display: inline-block;
            background: rgba(139, 92, 246, 0.3);
            color: #a78bfa;
            padding: 4px 12px;
            border-radius: 6px;
            font-size: 0.85em;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .user-message {
            background: rgba(59, 130, 246, 0.1);
            border-left: 3px solid #3b82f6;
            padding: 12px 16px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .user-message::before {
            content: 'ğŸ‘¤ ç”¨æˆ·: ';
            color: #60a5fa;
            font-weight: bold;
        }

        .ai-message {
            background: rgba(34, 197, 94, 0.1);
            border-left: 3px solid #22c55e;
            padding: 12px 16px;
            margin: 10px 0;
            border-radius: 8px;
        }

        .ai-message::before {
            content: 'ğŸ¤– AI: ';
            color: #4ade80;
            font-weight: bold;
        }

        .round-token-count {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
            padding-top: 10px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            font-size: 0.9em;
        }

        .round-tokens {
            color: #fbbf24;
            font-weight: bold;
        }

        .total-tokens {
            color: #f472b6;
            font-weight: bold;
        }

        /* å¯¹æ¯”è¡¨æ ¼ */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 16px;
            overflow: hidden;
        }

        .comparison-table th {
            background: rgba(139, 92, 246, 0.2);
            padding: 20px;
            text-align: left;
            font-weight: 600;
            color: #a78bfa;
            font-size: 1.05em;
        }

        .comparison-table td {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
            color: rgba(226, 232, 240, 0.85);
        }

        .comparison-table tr:hover td {
            background: rgba(139, 92, 246, 0.1);
        }

        /* åŠ¨ç”»æ§åˆ¶æŒ‰é’® */
        .demo-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 30px 0;
        }

        .demo-btn {
            padding: 15px 30px;
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid rgba(139, 92, 246, 0.5);
            border-radius: 12px;
            color: #a78bfa;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
        }

        .demo-btn:hover:not(:disabled) {
            background: rgba(139, 92, 246, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.4);
        }

        .demo-btn:disabled {
            opacity: 0.4;
            cursor: not-allowed;
        }

        /* çª—å£å¯è§†åŒ– */
        .window-visualization {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 15px;
            padding: 40px;
            flex-wrap: wrap;
        }

        .window-item {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 12px;
            padding: 20px 30px;
            text-align: center;
            min-width: 150px;
            transition: all 0.5s;
            opacity: 0;
            transform: scale(0.8);
        }

        .window-item.visible {
            opacity: 1;
            transform: scale(1);
        }

        .window-item.active {
            border-color: #3b82f6;
            background: rgba(59, 130, 246, 0.2);
            box-shadow: 0 0 30px rgba(59, 130, 246, 0.4);
        }

        .window-item.discarded {
            opacity: 0.3;
            border-color: rgba(255, 255, 255, 0.1);
        }

        /* åº”ç”¨åœºæ™¯å¡ç‰‡ */
        .use-case-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .use-case-card {
            background: rgba(255, 255, 255, 0.03);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 30px;
            transition: all 0.4s;
            transform: translateY(30px);
            opacity: 0;
        }

        .use-case-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .use-case-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 30px rgba(139, 92, 246, 0.3);
            border-color: rgba(139, 92, 246, 0.3);
        }

        .use-case-card .emoji {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .use-case-card h4 {
            color: #a78bfa;
            font-size: 1.3em;
            margin-bottom: 10px;
        }

        .use-case-card p {
            color: rgba(226, 232, 240, 0.7);
            line-height: 1.6;
            font-size: 0.95em;
        }

        /* å¯¼èˆªæŒ‰é’® */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            gap: 20px;
        }

        .nav-btn {
            padding: 15px 40px;
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid rgba(139, 92, 246, 0.5);
            border-radius: 12px;
            color: #a78bfa;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn:hover:not(:disabled) {
            background: rgba(139, 92, 246, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.4);
        }

        /* é’ˆå¯¹ a æ ‡ç­¾çš„å¯¼èˆªæŒ‰é’®æ ·å¼ */
        .nav-btn.back-to-list {
            text-decoration: none;
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            color: #60a5fa;
        }

        .nav-btn.back-to-list:hover {
            background: rgba(59, 130, 246, 0.4);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .nav-btn.next {
            margin-left: auto;
        }

        /* åœºæ™¯æŒ‡ç¤ºå™¨ */
        .scene-indicators {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 40px 0;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }

        .indicator.active {
            background: #8b5cf6;
            transform: scale(1.3);
        }

        .indicator:hover {
            transform: scale(1.2);
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .chat-bubble {
                max-width: 95%;
            }

            .memory-types-grid,
            .use-case-grid {
                grid-template-columns: 1fr;
            }
        }
    
        /* æ ‡å‡†å¯¼èˆªæ ·å¼ */
        .nav-card {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 24px;
            margin-bottom: 32px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nav-card a {
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .nav-card a:hover {
            transform: translateY(-2px);
        }

        /* é¡¶éƒ¨å¯¼èˆªå¡ç‰‡ */
        .top-nav-card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 24px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .top-nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .top-nav-left,
        .top-nav-center,
        .top-nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .top-nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #9ca3af;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .top-nav-link:hover {
            color: #e5e7eb;
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
        }

        .top-nav-link.home {
            color: #4ade80;
        }

        .top-nav-link.home:hover {
            color: #86efac;
        }

        .top-nav-link svg {
            width: 20px;
            height: 20px;
        }

        .top-nav-divider {
            width: 1px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
        }

        .top-nav-text {
            color: #6b7280;
            font-size: 0.9em;
        }

        .top-nav-progress {
            color: #9ca3af;
            font-size: 0.9em;
            font-weight: 500;
        }
</style>
</head>
<body>
    <!-- æµ®åŠ¨å…‰çƒ -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>    <!-- é¡¶éƒ¨å¯¼èˆª - è·¨æ¨¡å— -->
    <div class="top-nav-card">
        <div class="top-nav-container">
            <div class="top-nav-left">
                <a href="index.html" class="top-nav-link home">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    è¿”å›LangChainç›®å½•
                </a>
            </div>
            <div class="top-nav-center">
                <a href="03-chains-sequentials-demo.html" class="top-nav-link">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    ä¸Šä¸€è¯¾
                </a>
                <div class="top-nav-divider"></div>
                <a href="05-agents-basic-demo.html" class="top-nav-link">
                    ä¸‹ä¸€è¯¾
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
            <div class="top-nav-right">
                <span class="top-nav-progress">è¯¾ç¨‹ 4 / 20</span>
            </div>
        </div>
    </div>

    <!-- è¿›åº¦æ¡ -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ’¾ å¯¹è¯è®°å¿† Memory</h1>
            <p>è®© AI è®°ä½ä¸€åˆ‡ï¼šä»æ— çŠ¶æ€åˆ°æ™ºèƒ½è®°å¿†ç®¡ç†</p>
        </div>

        <!-- åœºæ™¯ 1: å¯¹è¯è®°å¿†çš„æŒ‘æˆ˜ -->
        <div class="scene active" id="scene1">
            <h2 class="scene-title">ğŸ’­ å¯¹è¯è®°å¿†çš„æŒ‘æˆ˜</h2>

            <div class="canvas-container">
                <div class="chat-container" id="chat-demo-1">
                    <!-- å¯¹è¯å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <div class="highlight-box error">
                <h3>âŒ æ— çŠ¶æ€çš„é—®é¢˜</h3>
                <p>
                    <strong>LLM æœ¬èº«æ˜¯æ— çŠ¶æ€çš„</strong>ï¼Œæ¯æ¬¡è°ƒç”¨éƒ½æ˜¯ç‹¬ç«‹çš„ã€‚<br><br>
                    è¿™æ„å‘³ç€ï¼š<br>
                    â€¢ ç¬¬äºŒæ¬¡å¯¹è¯ä¸çŸ¥é“ç¬¬ä¸€æ¬¡è¯´äº†ä»€ä¹ˆ<br>
                    â€¢ æ— æ³•è®°ä½ç”¨æˆ·çš„ä¸ªäººä¿¡æ¯<br>
                    â€¢ æ— æ³•è¿›è¡Œå¤šè½®å¯¹è¯<br><br>
                    <strong>è§£å†³æ–¹æ¡ˆï¼š</strong>ä½¿ç”¨ Memory ç»„ä»¶è‡ªåŠ¨ç®¡ç†å¯¹è¯å†å²ï¼
                </p>
            </div>

            <div class="demo-controls">
                <button class="demo-btn" id="demo1Btn">â–¶ï¸ æ’­æ”¾å¯¹è¯æ¼”ç¤º</button>
            </div>
        </div>

        <!-- åœºæ™¯ 2: è®°å¿†ç±»å‹æ¦‚è§ˆ -->
        <div class="scene" id="scene2">
            <h2 class="scene-title">ğŸ“š è®°å¿†ç±»å‹æ¦‚è§ˆ</h2>

            <div class="memory-types-grid">
                <div class="memory-type-card" data-delay="0">
                    <div class="icon">ğŸ“¦</div>
                    <h3>BufferMemory</h3>
                    <p>ä¿å­˜æ‰€æœ‰å¯¹è¯å†å²ï¼Œä¿¡æ¯å®Œæ•´ä½† Token æ¶ˆè€—å¤§ã€‚é€‚åˆçŸ­å¯¹è¯ï¼ˆ&lt;10 è½®ï¼‰ã€‚</p>
                </div>

                <div class="memory-type-card" data-delay="100">
                    <div class="icon">ğŸªŸ</div>
                    <h3>WindowMemory</h3>
                    <p>åªä¿ç•™æœ€è¿‘ k è½®å¯¹è¯ï¼Œè‡ªåŠ¨ä¸¢å¼ƒæ—§æ¶ˆæ¯ã€‚å¹³è¡¡æ•ˆæœå’Œæˆæœ¬ï¼Œé€‚åˆä¸­ç­‰å¯¹è¯ã€‚</p>
                </div>

                <div class="memory-type-card" data-delay="200">
                    <div class="icon">ğŸ“</div>
                    <h3>SummaryMemory</h3>
                    <p>è‡ªåŠ¨æ€»ç»“å†å²å¯¹è¯ï¼Œå¤§å¹…å‡å°‘ Token æ¶ˆè€—ã€‚é€‚åˆé•¿å¯¹è¯ï¼ˆ&gt;50 è½®ï¼‰ã€‚</p>
                </div>
            </div>

            <div class="highlight-box">
                <h3>ğŸ’¡ å¦‚ä½•é€‰æ‹©ï¼Ÿ</h3>
                <p>
                    <strong>ğŸ“¯ çŸ­å¯¹è¯ï¼š</strong>BufferMemory - æœ€ç®€å•ï¼Œä¿¡æ¯å®Œæ•´<br>
                    <strong>ğŸ¯ ä¸­ç­‰å¯¹è¯ï¼š</strong>WindowMemory - å¹³è¡¡ä¹‹é€‰<br>
                    <strong>ğŸš€ é•¿å¯¹è¯ï¼š</strong>SummaryMemory - èŠ‚çœæˆæœ¬
                </p>
            </div>
        </div>

        <!-- åœºæ™¯ 3: ConversationBufferMemory -->
        <div class="scene" id="scene3">
            <h2 class="scene-title">ğŸ“¦ ConversationBufferMemory</h2>

            <div class="code-showcase">
                <div class="code-showcase-header">
                    <h3>ğŸ’» æ ¸å¿ƒä»£ç </h3>
                    <span style="color: rgba(226, 232, 240, 0.6); font-size: 0.9em;">ä¿å­˜æ‰€æœ‰å†å²</span>
                </div>
                <div class="code-showcase-body">
                    <code><span class="keyword">from</span> langchain.memory <span class="keyword">import</span> ConversationBufferMemory<br>
<span class="keyword">from</span> langchain.chains <span class="keyword">import</span> ConversationChain<br>
<br>
<span class="comment"># åˆ›å»ºè®°å¿†ç»„ä»¶ï¼ˆä¿å­˜æ‰€æœ‰å†å²ï¼‰</span><br>
memory = ConversationBufferMemory(return_messages=<span class="keyword">True</span>)<br>
<br>
<span class="comment"># åˆ›å»ºå¯¹è¯é“¾</span><br>
conversation = ConversationChain(<br>
&nbsp;&nbsp;&nbsp;&nbsp;llm=llm,<br>
&nbsp;&nbsp;&nbsp;&nbsp;memory=memory<br>
)<br>
<br>
<span class="comment"># å¤šè½®å¯¹è¯ - AI è‡ªåŠ¨è®°ä½æ‰€æœ‰å†…å®¹</span><br>
response1 = conversation.predict(input=<span class="string">"æˆ‘çš„åå­—æ˜¯å¼ ä¸‰"</span>)<br>
response2 = conversation.predict(input=<span class="string">"æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ"</span>)<br>
<span class="comment"># AI ä¼šå›ç­”ï¼šä½ å«å¼ ä¸‰</span></code>
                </div>
            </div>

            <div class="canvas-container">
                <div class="memory-visualization">
                    <div class="memory-title">ğŸ“ Memory å†…å®¹ï¼ˆç´¯ç§¯æ‰€æœ‰å¯¹è¯ï¼‰</div>
                    <div class="memory-items" id="bufferMemoryDemo">
                        <!-- å†…å­˜æ¡ç›®å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
            </div>

            <div class="highlight-box success">
                <h3>âœ… ä¼˜ç‚¹</h3>
                <p>
                    â€¢ ä¿ç•™æ‰€æœ‰å¯¹è¯ç»†èŠ‚ï¼Œä¿¡æ¯å®Œæ•´<br>
                    â€¢ å®ç°ç®€å•ï¼Œå¼€ç®±å³ç”¨<br>
                    â€¢ é€‚åˆçŸ­å¯¹è¯ï¼ˆ&lt;10 è½®ï¼‰
                </p>
            </div>

            <div class="highlight-box warning">
                <h3>âš ï¸ ç¼ºç‚¹</h3>
                <p>
                    â€¢ Token æ¶ˆè€—å¤§ï¼Œæˆæœ¬é«˜<br>
                    â€¢ å¯èƒ½è¶…å‡ºä¸Šä¸‹æ–‡é™åˆ¶<br>
                    â€¢ é•¿å¯¹è¯æ€§èƒ½å·®
                </p>
            </div>

            <div class="demo-controls">
                <button class="demo-btn" id="bufferDemoBtn">â–¶ï¸ æ’­æ”¾ç´¯ç§¯æ¼”ç¤º</button>
            </div>
        </div>

        <!-- åœºæ™¯ 4: è®°å¿†å®¹é‡é™åˆ¶ -->
        <div class="scene" id="scene4">
            <h2 class="scene-title">âš ï¸ è®°å¿†å®¹é‡é™åˆ¶</h2>

            <div class="canvas-container">
                <div class="token-counter" id="tokenCounter">
                    <div class="token-label">å½“å‰å¯¹è¯ Token æ•°é‡</div>
                    <div class="token-number" id="tokenCount">0</div>
                    <div class="token-label">ä¸Šä¸‹æ–‡çª—å£ï¼š4,096 tokens</div>
                </div>

                <div class="conversation-demo" id="conversationDemo">
                    <!-- å¯¹è¯å°†é€šè¿‡JSåŠ¨æ€æ’å…¥ -->
                </div>
            </div>

            <div class="highlight-box error">
                <h3>ğŸš¨ Token æº¢å‡ºé—®é¢˜</h3>
                <p>
                    éšç€å¯¹è¯è½®æ•°å¢åŠ ï¼ŒToken æ•°é‡çº¿æ€§å¢é•¿ï¼š<br><br>
                    â€¢ 10 è½®å¯¹è¯ â‰ˆ 2,000 tokens<br>
                    â€¢ 20 è½®å¯¹è¯ â‰ˆ 4,000 tokens<br>
                    â€¢ 30 è½®å¯¹è¯ â‰ˆ 6,000 tokensï¼ˆè¶…å‡ºé™åˆ¶ï¼ï¼‰<br><br>
                    <strong>åæœï¼š</strong>API è°ƒç”¨å¤±è´¥æˆ–æˆæœ¬çˆ†ç‚¸
                </p>
            </div>

            <div class="highlight-box">
                <h3>ğŸ’¡ è§£å†³æ–¹æ¡ˆ</h3>
                <p>
                    <strong>æ–¹æ¡ˆ 1ï¼š</strong>WindowMemory - åªä¿ç•™æœ€è¿‘ k è½®<br>
                    <strong>æ–¹æ¡ˆ 2ï¼š</strong>SummaryMemory - è‡ªåŠ¨æ€»ç»“å†å²<br>
                    <strong>æ–¹æ¡ˆ 3ï¼š</strong>æ··åˆä½¿ç”¨ - ç»“åˆå¤šç§ç­–ç•¥
                </p>
            </div>

            <div class="demo-controls">
                <button class="demo-btn" id="tokenDemoBtn">â–¶ï¸ æ’­æ”¾ Token å¢é•¿æ¼”ç¤º</button>
            </div>
        </div>

        <!-- åœºæ™¯ 5: WindowMemory å¯è§†åŒ– -->
        <div class="scene" id="scene5">
            <h2 class="scene-title">ğŸªŸ ConversationBufferWindowMemory</h2>

            <div class="code-showcase">
                <div class="code-showcase-header">
                    <h3>ğŸ’» æ ¸å¿ƒä»£ç </h3>
                    <span style="color: rgba(226, 232, 240, 0.6); font-size: 0.9em;">æ»‘åŠ¨çª—å£æœºåˆ¶</span>
                </div>
                <div class="code-showcase-body">
                    <code><span class="keyword">from</span> langchain.memory <span class="keyword">import</span> ConversationBufferWindowMemory<br>
<br>
<span class="comment"># åªä¿ç•™æœ€è¿‘ 2 è½®å¯¹è¯</span><br>
memory = ConversationBufferWindowMemory(k=<span class="number">2</span>, return_messages=<span class="keyword">True</span>)<br>
<br>
conversation = ConversationChain(llm=llm, memory=memory)<br>
<br>
<span class="comment"># è¿›è¡Œå¤šè½®å¯¹è¯</span><br>
conversation.predict(input=<span class="string">"æˆ‘å–œæ¬¢è‹¹æœ"</span>)<br>
conversation.predict(input=<span class="string">"æˆ‘è¿˜å–œæ¬¢é¦™è•‰"</span>)<br>
conversation.predict(input=<span class="string">"æˆ‘ä¹Ÿå–œæ¬¢æ©™å­"</span>)<br>
<br>
<span class="comment"># ç°åœ¨åªè®°å¾—é¦™è•‰å’Œæ©™å­ï¼Œä¸è®°å¾—ç¬¬ä¸€è½®çš„è‹¹æœ</span><br>
response = conversation.predict(input=<span class="string">"æˆ‘ä¹‹å‰è¯´å–œæ¬¢ä»€ä¹ˆæ°´æœï¼Ÿ"</span>)<br>
<span class="comment"># AI ä¼šè¯´ï¼šä½ æåˆ°å–œæ¬¢é¦™è•‰å’Œæ©™å­</span></code>
                </div>
            </div>

            <div class="canvas-container">
                <div class="window-visualization" id="windowDemo">
                    <!-- çª—å£å¯è§†åŒ–å°†é€šè¿‡ JS åŠ¨æ€ç”Ÿæˆ -->
                </div>
            </div>

            <div class="highlight-box success">
                <h3>âœ… ä¼˜åŠ¿</h3>
                <p>
                    â€¢ Token æ¶ˆè€—å¯æ§<br>
                    â€¢ ä¿æŒæœ€è¿‘çš„ä¸Šä¸‹æ–‡<br>
                    â€¢ é€‚åˆä¸­ç­‰é•¿åº¦å¯¹è¯
                </p>
            </div>

            <div class="demo-controls">
                <button class="demo-btn" id="windowDemoBtn">â–¶ï¸ æ’­æ”¾çª—å£æ»‘åŠ¨æ¼”ç¤º</button>
            </div>
        </div>

        <!-- åœºæ™¯ 6: è®°å¿†ç­–ç•¥å¯¹æ¯” -->
        <div class="scene" id="scene6">
            <h2 class="scene-title">âš–ï¸ è®°å¿†ç­–ç•¥å¯¹æ¯”</h2>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width: 20%;">ç±»å‹</th>
                        <th style="width: 25%;">å­˜å‚¨æ–¹å¼</th>
                        <th style="width: 25%;">é€‚ç”¨åœºæ™¯</th>
                        <th style="width: 15%;">Token æ¶ˆè€—</th>
                        <th style="width: 15%;">ä¿¡æ¯å®Œæ•´åº¦</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td><strong style="color: #60a5fa;">BufferMemory</strong></td>
                        <td>ä¿å­˜æ‰€æœ‰æ¶ˆæ¯</td>
                        <td>çŸ­å¯¹è¯ (&lt;10 è½®)</td>
                        <td style="color: #ef4444;">é«˜</td>
                        <td style="color: #22c55e;">100%</td>
                    </tr>
                    <tr>
                        <td><strong style="color: #a78bfa;">WindowMemory</strong></td>
                        <td>ä¿ç•™æœ€è¿‘ k è½®</td>
                        <td>ä¸­ç­‰å¯¹è¯ (10-50 è½®)</td>
                        <td style="color: #fbbf24;">ä¸­</td>
                        <td style="color: #fbbf24;">70%</td>
                    </tr>
                    <tr>
                        <td><strong style="color: #d946ef;">SummaryMemory</strong></td>
                        <td>è‡ªåŠ¨æ€»ç»“</td>
                        <td>é•¿å¯¹è¯ (&gt;50 è½®)</td>
                        <td style="color: #22c55e;">ä½</td>
                        <td style="color: #fbbf24;">80%</td>
                    </tr>
                </tbody>
            </table>

            <div class="highlight-box">
                <h3>ğŸ¯ é€‰æ‹©å»ºè®®</h3>
                <p>
                    <strong>ğŸ’¬ ç®€å•å®¢æœï¼š</strong>BufferMemory - å¯¹è¯é€šå¸¸å¾ˆçŸ­<br>
                    <strong>ğŸ“ æ•™å­¦åŠ©æ‰‹ï¼š</strong>WindowMemory - ä¿æŒå½“å‰è¯¾ç¨‹ä¸Šä¸‹æ–‡<br>
                    <strong>ğŸ“š çŸ¥è¯†åº“é—®ç­”ï¼š</strong>SummaryMemory - é•¿å¯¹è¯éœ€è¦æ€»ç»“
                </p>
            </div>
        </div>

        <!-- åœºæ™¯ 7: å®é™…åº”ç”¨åœºæ™¯ -->
        <div class="scene" id="scene7">
            <h2 class="scene-title">ğŸš€ å®é™…åº”ç”¨åœºæ™¯</h2>

            <div class="use-case-grid">
                <div class="use-case-card" data-delay="0">
                    <div class="emoji">ğŸ¤–</div>
                    <h4>æ™ºèƒ½å®¢æœ</h4>
                    <p>ä½¿ç”¨ WindowMemory ä¿æŒæœ€è¿‘å‡ è½®å¯¹è¯ï¼Œæä¾›è¿è´¯çš„å®¢æˆ·æœåŠ¡ä½“éªŒã€‚</p>
                </div>

                <div class="use-case-card" data-delay="100">
                    <div class="emoji">ğŸ“</div>
                    <h4>æ•™è‚²åŠ©æ‰‹</h4>
                    <p>ä½¿ç”¨ BufferMemory å®Œæ•´è®°å½•å­¦ä¹ è¿‡ç¨‹ï¼Œå¸®åŠ©å­¦ç”Ÿå¤ä¹ å’Œå·©å›ºã€‚</p>
                </div>

                <div class="use-case-card" data-delay="200">
                    <div class="emoji">ğŸ’¼</div>
                    <h4>èŒåœºå¯¼å¸ˆ</h4>
                    <p>ä½¿ç”¨ SummaryMemory é•¿æœŸè·Ÿè¸ªèŒä¸šå‘å±•ï¼Œæä¾›ä¸ªæ€§åŒ–å»ºè®®ã€‚</p>
                </div>

                <div class="use-case-card" data-delay="300">
                    <div class="emoji">ğŸ®</div>
                    <h4>æ¸¸æˆ NPC</h4>
                    <p>ä½¿ç”¨ WindowMemory è®© NPC è®°ä½æœ€è¿‘çš„äº’åŠ¨ï¼Œå¢å¼ºæ²‰æµ¸æ„Ÿã€‚</p>
                </div>

                <div class="use-case-card" data-delay="400">
                    <div class="emoji">ğŸ“</div>
                    <h4>å†™ä½œåŠ©æ‰‹</h4>
                    <p>ä½¿ç”¨ BufferMemory è®°ä½æ•…äº‹è®¾å®šå’Œäººç‰©å…³ç³»ï¼Œä¿æŒä¸€è‡´æ€§ã€‚</p>
                </div>

                <div class="use-case-card" data-delay="500">
                    <div class="emoji">ğŸ¥</div>
                    <h4>å¥åº·å’¨è¯¢</h4>
                    <p>ä½¿ç”¨ SummaryMemory è®°å½•ç—‡çŠ¶å†å²ï¼Œæä¾›é•¿æœŸå¥åº·å»ºè®®ã€‚</p>
                </div>
            </div>

            <div class="highlight-box success">
                <h3>ğŸ‰ æ€»ç»“</h3>
                <p>
                    <strong>Memory è®© AI ä»"æ— è®°å¿†"åˆ°"è¿‡ç›®ä¸å¿˜"ï¼š</strong><br><br>
                    â€¢ ConversationBufferMemoryï¼šå®Œæ•´ä½†æ˜‚è´µ<br>
                    â€¢ ConversationBufferWindowMemoryï¼šå¹³è¡¡ä¹‹é€‰<br>
                    â€¢ ConversationSummaryMemoryï¼šé«˜æ•ˆä½†å¯èƒ½ä¸¢å¤±ç»†èŠ‚<br><br>
                    <strong>é€‰æ‹©åˆé€‚çš„ Memory ç±»å‹ï¼Œè®©åº”ç”¨æ›´æ™ºèƒ½ï¼</strong>
                </p>
            </div>

            <div class="highlight-box">
                <h3>ğŸ¯ ä¸‹ä¸€æ­¥</h3>
                <p>
                    è¿”å›ä¸»é¡µï¼Œç»§ç»­å­¦ä¹ å…¶ä»–æ¨¡å—ï¼š<br>
                    â€¢ æ¨¡å— 05ï¼šRAG æ£€ç´¢å¢å¼ºç”Ÿæˆ<br>
                    â€¢ æ¨¡å— 06ï¼šAgent æ™ºèƒ½ä½“<br>
                    â€¢ æ¨¡å— 07ï¼šå·¥å…·è°ƒç”¨ Tools
                </p>
            </div>
        </div>

        <!-- åœºæ™¯æŒ‡ç¤ºå™¨ -->
        <div class="scene-indicators">
            <div class="indicator active" data-scene="1"></div>
            <div class="indicator" data-scene="2"></div>
            <div class="indicator" data-scene="3"></div>
            <div class="indicator" data-scene="4"></div>
            <div class="indicator" data-scene="5"></div>
            <div class="indicator" data-scene="6"></div>
            <div class="indicator" data-scene="7"></div>
        </div>

        <!-- å¯¼èˆªæŒ‰é’® -->
        <div class="nav-buttons">
            <button class="nav-btn" id="prevBtn" disabled>
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                ä¸Šä¸€èŠ‚
            </button>
            <a href="index.html" class="nav-btn back-to-list">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
                </svg>
                è¯¾ç¨‹åˆ—è¡¨
            </a>
            <button class="nav-btn next" id="nextBtn">
                ä¸‹ä¸€èŠ‚
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // åœºæ™¯æ•°æ®
        const totalScenes = 7;
        let currentScene = 1;

        // DOM å…ƒç´ 
        const progressBar = document.getElementById('progressBar');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const indicators = document.querySelectorAll('.indicator');

        // åˆå§‹åŒ–
        function init() {
            updateScene();
            setupEventListeners();
            animateSceneElements();
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬
        function setupEventListeners() {
            // å¯¼èˆªæŒ‰é’®
            prevBtn.addEventListener('click', () => {
                if (currentScene > 1) {
                    currentScene--;
                    updateScene();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentScene < totalScenes) {
                    currentScene++;
                    updateScene();
                }
            });

            // æŒ‡ç¤ºå™¨
            indicators.forEach(indicator => {
                indicator.addEventListener('click', () => {
                    currentScene = parseInt(indicator.dataset.scene);
                    updateScene();
                });
            });

            // é”®ç›˜å¯¼èˆª
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' && currentScene < totalScenes) {
                    currentScene++;
                    updateScene();
                } else if (e.key === 'ArrowLeft' && currentScene > 1) {
                    currentScene--;
                    updateScene();
                }
            });

            // æ¼”ç¤ºæŒ‰é’®
            document.getElementById('demo1Btn').addEventListener('click', runChatDemo1);
            document.getElementById('bufferDemoBtn').addEventListener('click', runBufferMemoryDemo);
            document.getElementById('tokenDemoBtn').addEventListener('click', runTokenDemo);
            document.getElementById('windowDemoBtn').addEventListener('click', runWindowDemo);
        }

        // æ›´æ–°åœºæ™¯
        function updateScene() {
            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentScene - 1) / (totalScenes - 1)) * 100;
            progressBar.style.width = progress + '%';

            // æ›´æ–°åœºæ™¯æ˜¾ç¤º
            document.querySelectorAll('.scene').forEach((scene, index) => {
                if (index + 1 === currentScene) {
                    scene.classList.add('active');
                } else {
                    scene.classList.remove('active');
                }
            });

            // æ›´æ–°æŒ‡ç¤ºå™¨
            indicators.forEach((indicator, index) => {
                if (index + 1 === currentScene) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.remove('active');
                }
            });

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            prevBtn.disabled = currentScene === 1;
            nextBtn.disabled = currentScene === totalScenes;

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // é‡ç½®æ‰€æœ‰åŠ¨ç”»å…ƒç´ 
            document.querySelectorAll('.memory-type-card, .use-case-card, .chat-bubble, .memory-item, .window-item, .code-showcase').forEach(el => {
                el.classList.remove('visible');
            });

            // åŠ¨ç”»æ˜¾ç¤ºå…ƒç´ 
            setTimeout(() => {
                animateSceneElements();
            }, 300);
        }

        // åŠ¨ç”»æ˜¾ç¤ºåœºæ™¯å…ƒç´ 
        function animateSceneElements() {
            const currentSceneEl = document.querySelector(`#scene${currentScene}`);

            // è®°å¿†ç±»å‹å¡ç‰‡
            currentSceneEl.querySelectorAll('.memory-type-card').forEach((card, index) => {
                const delay = parseInt(card.dataset.delay) || index * 100;
                setTimeout(() => {
                    card.classList.add('visible');
                }, delay);
            });

            // åº”ç”¨åœºæ™¯å¡ç‰‡
            currentSceneEl.querySelectorAll('.use-case-card').forEach((card, index) => {
                const delay = parseInt(card.dataset.delay) || index * 100;
                setTimeout(() => {
                    card.classList.add('visible');
                }, delay);
            });

            // å¯¹è¯æ°”æ³¡åŠ¨ç”»
            currentSceneEl.querySelectorAll('.chat-bubble').forEach((bubble, index) => {
                const delay = parseInt(bubble.dataset.delay) || index * 100;
                setTimeout(() => {
                    bubble.style.opacity = '1';
                    bubble.style.transform = 'translateY(0)';
                }, delay);
            });

            // è®°å¿†é¡¹åŠ¨ç”»
            currentSceneEl.querySelectorAll('.memory-item').forEach((item, index) => {
                const delay = parseInt(item.dataset.delay) || index * 100;
                setTimeout(() => {
                    item.classList.add('visible');
                }, delay);
            });

            // çª—å£å¯è§†åŒ–é¡¹åŠ¨ç”»
            currentSceneEl.querySelectorAll('.window-item').forEach((item, index) => {
                const delay = parseInt(item.dataset.delay) || index * 100;
                setTimeout(() => {
                    item.classList.add('visible');
                }, delay);
            });

            // ä»£ç å±•ç¤ºåŠ¨ç”»
            currentSceneEl.querySelectorAll('.code-showcase').forEach((code, index) => {
                const delay = parseInt(code.dataset.delay) || index * 200;
                setTimeout(() => {
                    code.classList.add('visible');
                }, delay);
            });
        }

        // å¯¹è¯æ¼”ç¤º 1 - æ— è®°å¿†é—®é¢˜
        function runChatDemo1() {
            const container = document.getElementById('chat-demo-1');
            container.innerHTML = '';

            const conversations = [
                { sender: 'AI', message: 'ä½ å¥½ï¼æœ‰ä»€ä¹ˆå¯ä»¥å¸®åŠ©ä½ çš„å—ï¼Ÿ', type: 'ai' },
                { sender: 'User', message: 'æˆ‘çš„åå­—æ˜¯å¼ ä¸‰', type: 'user' },
                { sender: 'AI', message: 'å¥½çš„ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼', type: 'ai' },
                { sender: 'User', message: 'æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ', type: 'user' },
                { sender: 'AI', message: 'æŠ±æ­‰ï¼Œæˆ‘ä¸è®°å¾—ä½ ä¹‹å‰è¯´çš„è¯ ğŸ˜', type: 'ai', highlight: true }
            ];

            conversations.forEach((conv, index) => {
                setTimeout(() => {
                    const bubble = document.createElement('div');
                    bubble.className = `chat-bubble ${conv.type}`;
                    if (conv.highlight) {
                        bubble.style.background = 'rgba(239, 68, 68, 0.2)';
                        bubble.style.borderColor = 'rgba(239, 68, 68, 0.5)';
                    }
                    bubble.innerHTML = `
                        <div class="sender">${conv.sender}</div>
                        <div class="message">${conv.message}</div>
                    `;
                    container.appendChild(bubble);
                }, index * 1000);
            });
        }

        // BufferMemory æ¼”ç¤º
        function runBufferMemoryDemo() {
            const container = document.getElementById('bufferMemoryDemo');
            container.innerHTML = '';

            const memoryItems = [
                { text: 'Human: æˆ‘çš„åå­—æ˜¯å¼ ä¸‰', delay: 0 },
                { text: 'AI: å¥½çš„å¼ ä¸‰ï¼Œå¾ˆé«˜å…´è®¤è¯†ä½ ï¼', delay: 800 },
                { text: 'Human: æˆ‘æ˜¯ä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆ', delay: 1600 },
                { text: 'AI: çœŸæ£’ï¼è½¯ä»¶å·¥ç¨‹å¸ˆæ˜¯ä¸ªå¾ˆæ£’çš„èŒä¸š', delay: 2400 },
                { text: 'Human: æˆ‘å«ä»€ä¹ˆåå­—ï¼Ÿ', delay: 3200 },
                { text: 'AI: ä½ å«å¼ ä¸‰ï¼Œæ˜¯ä¸€åè½¯ä»¶å·¥ç¨‹å¸ˆ ğŸ˜Š', delay: 4000, highlight: true }
            ];

            memoryItems.forEach(item => {
                setTimeout(() => {
                    const div = document.createElement('div');
                    div.className = 'memory-item';
                    if (item.highlight) {
                        div.style.background = 'rgba(34, 197, 94, 0.2)';
                        div.style.borderColor = 'rgba(34, 197, 94, 0.5)';
                    }
                    div.textContent = item.text;
                    container.appendChild(div);
                }, item.delay);
            });
        }

        // Token å¢é•¿æ¼”ç¤º - ä¼˜åŒ–ç‰ˆï¼ˆ6è½®å¯¹è¯ï¼Œå¿«é€Ÿæ¼”ç¤ºï¼‰
        async function runTokenDemo() {
            const container = document.getElementById('conversationDemo');
            const tokenCounter = document.getElementById('tokenCount');
            const counterBox = document.getElementById('tokenCounter');

            // æ¸…ç©ºå®¹å™¨
            container.innerHTML = '';
            tokenCounter.textContent = '0';
            counterBox.className = 'token-counter';

            // å®šä¹‰å¯¹è¯åœºæ™¯ï¼ˆä¼˜åŒ–ä¸º6è½®ï¼Œå¿«é€Ÿè¾¾åˆ°è­¦å‘Šçº¿ï¼‰
            const conversations = [
                {
                    round: 1,
                    user: 'ä½ å¥½ï¼Œæˆ‘æƒ³äº†è§£ä¸€ä¸‹ LangChain',
                    ai: 'ä½ å¥½ï¼LangChain æ˜¯ä¸€ä¸ªå¼ºå¤§çš„æ¡†æ¶ï¼Œç”¨äºå¼€å‘åŸºäºå¤§è¯­è¨€æ¨¡å‹çš„åº”ç”¨ã€‚å®ƒæä¾›äº†é“¾ã€è®°å¿†ã€ä»£ç†ç­‰ç»„ä»¶ï¼Œè®©æ„å»º AI åº”ç”¨å˜å¾—ç®€å•é«˜æ•ˆã€‚',
                    roundTokens: 200,
                    totalTokens: 200
                },
                {
                    round: 2,
                    user: 'LangChain çš„æ ¸å¿ƒç»„ä»¶æœ‰å“ªäº›ï¼Ÿ',
                    ai: 'LangChain çš„æ ¸å¿ƒç»„ä»¶åŒ…æ‹¬ï¼šModelsï¼ˆæ”¯æŒå¤šç§ LLMï¼‰ã€Chainsï¼ˆé“¾å¼è°ƒç”¨ï¼‰ã€Memoryï¼ˆå¯¹è¯è®°å¿†ï¼‰ã€Promptsï¼ˆæç¤ºç®¡ç†ï¼‰ã€Agentsï¼ˆæ™ºèƒ½å†³ç­–ï¼‰ã€Toolsï¼ˆå·¥å…·è°ƒç”¨ï¼‰ã€‚è¿™äº›ç»„ä»¶å¯ä»¥çµæ´»ç»„åˆï¼Œæ„å»ºå¤æ‚åº”ç”¨ã€‚',
                    roundTokens: 400,
                    totalTokens: 600
                },
                {
                    round: 3,
                    user: 'èƒ½è¯¦ç»†ä»‹ç»ä¸€ä¸‹ Chains å—ï¼Ÿ',
                    ai: 'Chains æ˜¯ LangChain çš„æ ¸å¿ƒæ¦‚å¿µï¼Œå…è®¸å°†å¤šä¸ªè°ƒç”¨ä¸²è”èµ·æ¥ã€‚ä¾‹å¦‚ï¼šSequentialChainï¼ˆé¡ºåºæ‰§è¡Œï¼‰ã€RouterChainï¼ˆè·¯ç”±é€‰æ‹©ï¼‰ã€‚é€šè¿‡ Chainsï¼Œå¯ä»¥æ„å»ºä»æ•°æ®å¤„ç†åˆ°æ–‡æœ¬ç”Ÿæˆçš„å®Œæ•´å·¥ä½œæµï¼Œå®ç°å¤æ‚çš„ä¸šåŠ¡é€»è¾‘ã€‚',
                    roundTokens: 550,
                    totalTokens: 1150
                },
                {
                    round: 4,
                    user: 'Memory ç»„ä»¶æ˜¯å¦‚ä½•å·¥ä½œçš„ï¼Ÿ',
                    ai: 'Memory ç»„ä»¶è´Ÿè´£åœ¨å¯¹è¯ä¸­ä¿å­˜å’Œæ£€ç´¢ä¸Šä¸‹æ–‡ã€‚ä¸»è¦ç±»å‹ï¼šBufferMemoryï¼ˆä¿å­˜æ‰€æœ‰å†å²ï¼‰ã€WindowMemoryï¼ˆæ»‘åŠ¨çª—å£ï¼‰ã€SummaryMemoryï¼ˆè‡ªåŠ¨æ€»ç»“ï¼‰ã€‚Memory è®© LLM èƒ½å¤Ÿè¿›è¡Œå¤šè½®å¯¹è¯ï¼Œè®°ä½ç”¨æˆ·ä¿¡æ¯å’Œä¸Šä¸‹æ–‡ï¼Œæå‡äº¤äº’ä½“éªŒã€‚',
                    roundTokens: 650,
                    totalTokens: 1800
                },
                {
                    round: 5,
                    user: 'Agents å’Œ Tools æœ‰ä»€ä¹ˆåŒºåˆ«ï¼Ÿ',
                    ai: 'Agents æ˜¯æ™ºèƒ½ä½“ï¼Œèƒ½å¤Ÿæ ¹æ®ç”¨æˆ·è¾“å…¥è‡ªä¸»å†³å®šä½¿ç”¨å“ªäº›å·¥å…·ã€‚Tools æ˜¯å…·ä½“çš„å·¥å…·å‡½æ•°ï¼Œå¦‚æœç´¢ã€è®¡ç®—ã€æ•°æ®åº“æŸ¥è¯¢ç­‰ã€‚Agent é€šè¿‡æ¨ç†é€‰æ‹©åˆé€‚çš„å·¥å…·å®Œæˆä»»åŠ¡ï¼Œå°±åƒç»™ LLM è£…ä¸Šäº†"æ‰‹"å’Œ"çœ¼ç›"ï¼Œä½¿å…¶èƒ½å¤Ÿæ‰§è¡Œå®é™…æ“ä½œã€‚',
                    roundTokens: 750,
                    totalTokens: 2550
                },
                {
                    round: 6,
                    user: 'å¦‚ä½•å¼€å§‹å­¦ä¹  LangChainï¼Ÿ',
                    ai: 'å­¦ä¹ è·¯å¾„å»ºè®®ï¼š1ï¼‰æŒæ¡ Python åŸºç¡€å’Œ LLM æ¦‚å¿µï¼›2ï¼‰ä»ç®€å•çš„ Chain å¼€å§‹å®è·µï¼›3ï¼‰å­¦ä¹  Memory ç®¡ç†ï¼›4ï¼‰æ¢ç´¢ Agents å’Œ Toolsï¼›5ï¼‰æ„å»ºå®é™…é¡¹ç›®ã€‚å®˜æ–¹æ–‡æ¡£å¾ˆå®Œå–„ï¼Œå»ºè®®è¾¹å­¦è¾¹åšï¼Œå¿«é€Ÿè¿­ä»£ã€‚å…³æ³¨ç¤¾åŒºåŠ¨æ€ï¼Œäº†è§£æœ€ä½³å®è·µã€‚',
                    roundTokens: 850,
                    totalTokens: 3400
                }
            ];

            // é€è½®æ˜¾ç¤ºå¯¹è¯
            for (let i = 0; i < conversations.length; i++) {
                const conv = conversations[i];
                await new Promise(resolve => setTimeout(resolve, 600)); // ç¼©çŸ­ç­‰å¾…æ—¶é—´

                // åˆ›å»ºå¯¹è¯è½®æ¬¡
                const roundDiv = document.createElement('div');
                roundDiv.className = 'conversation-round';
                roundDiv.innerHTML = `
                    <div class="round-number">ç¬¬ ${conv.round} è½®å¯¹è¯</div>
                    <div class="user-message">${conv.user}</div>
                    <div class="ai-message">${conv.ai}</div>
                    <div class="round-token-count">
                        <span class="round-tokens">æœ¬è½®: +${conv.roundTokens} tokens</span>
                        <span class="total-tokens">ç´¯è®¡: ${conv.totalTokens.toLocaleString()} tokens</span>
                    </div>
                `;

                container.appendChild(roundDiv);

                // è§¦å‘åŠ¨ç”»
                await new Promise(resolve => setTimeout(resolve, 100));
                roundDiv.classList.add('visible');

                // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
                container.scrollTop = container.scrollHeight;

                // åŠ¨ç”»æ›´æ–°tokenè®¡æ•°
                const startTokens = i === 0 ? 0 : conversations[i - 1].totalTokens;
                await animateTokenCount(tokenCounter, startTokens, conv.totalTokens, 600); // åŠ å¿«åŠ¨ç”»

                // æ›´æ–°è­¦å‘ŠçŠ¶æ€ï¼ˆæ›´æ—©è§¦å‘è­¦å‘Šï¼‰
                if (conv.totalTokens > 2000) {
                    counterBox.className = 'token-counter warning';
                }
                if (conv.totalTokens > 3000) {
                    counterBox.className = 'token-counter danger';
                    tokenCounter.style.color = '#ef4444';
                }
            }

            // æ¼”ç¤ºç»“æŸåæ·»åŠ è­¦å‘Šä¿¡æ¯
            await new Promise(resolve => setTimeout(resolve, 500));
            const warningDiv = document.createElement('div');
            warningDiv.className = 'conversation-round';
            warningDiv.style.background = 'rgba(239, 68, 68, 0.1)';
            warningDiv.style.borderColor = '#ef4444';
            warningDiv.innerHTML = `
                <div class="round-number" style="background: rgba(239, 68, 68, 0.3); color: #ef4444;">âš ï¸ è­¦å‘Š</div>
                <div style="color: #ef4444; font-weight: bold; text-align: center; padding: 20px;">
                    ä»… 6 è½®å¯¹è¯ï¼ŒToken æ€»æ•°å·²è¾¾ 3,400ï¼<br>
                    å¦‚æœç»§ç»­é•¿å¯¹è¯ï¼Œå¾ˆå¿«ä¼šè¶…å‡º 4,096 ä¸Šä¸‹æ–‡çª—å£é™åˆ¶ã€‚<br>
                    <strong style="margin-top: 10px; display: block;">è§£å†³æ–¹æ¡ˆï¼šä½¿ç”¨ WindowMemory æˆ– SummaryMemory æ§åˆ¶ Token å¢é•¿ã€‚</strong>
                </div>
            `;
            container.appendChild(warningDiv);
            await new Promise(resolve => setTimeout(resolve, 100));
            warningDiv.classList.add('visible');
            container.scrollTop = container.scrollHeight;
        }

        // Tokenè®¡æ•°åŠ¨ç”»è¾…åŠ©å‡½æ•°
        function animateTokenCount(element, start, end, duration) {
            return new Promise(resolve => {
                const startTime = performance.now();
                const difference = end - start;

                function update(currentTime) {
                    const elapsed = currentTime - startTime;
                    const progress = Math.min(elapsed / duration, 1);

                    // ä½¿ç”¨ç¼“åŠ¨å‡½æ•°
                    const easeOut = 1 - Math.pow(1 - progress, 3);
                    const current = Math.floor(start + difference * easeOut);

                    element.textContent = current.toLocaleString();

                    if (progress < 1) {
                        requestAnimationFrame(update);
                    } else {
                        resolve();
                    }
                }

                requestAnimationFrame(update);
            });
        }

        // WindowMemory æ¼”ç¤º
        async function runWindowDemo() {
            const container = document.getElementById('windowDemo');
            container.innerHTML = '';

            // è¯´æ˜ä¿¡æ¯
            const infoDiv = document.createElement('div');
            infoDiv.style.cssText = 'background: rgba(139, 92, 246, 0.1); padding: 15px; border-radius: 8px; margin-bottom: 20px; border-left: 4px solid #8b5cf6;';
            infoDiv.innerHTML = '<strong style="color: #a78bfa;">ğŸ’¡ è¯´æ˜ï¼š</strong> k=2 è¡¨ç¤ºä¿ç•™æœ€è¿‘ 2 è½®å¯¹è¯ï¼ˆå³æœ€å 2 ä¸ªç”¨æˆ·-AI å¯¹è¯å¯¹ï¼‰';
            container.appendChild(infoDiv);

            // å®šä¹‰æ‰€æœ‰è½®æ¬¡çš„å¯¹è¯
            const allRounds = [
                { round: 1, user: 'æˆ‘å–œæ¬¢è‹¹æœ', ai: 'å¥½çš„ï¼Œä½ å–œæ¬¢è‹¹æœ' },
                { round: 2, user: 'æˆ‘è¿˜å–œæ¬¢é¦™è•‰', ai: 'è®°ä½äº†ï¼Œä½ è¿˜å–œæ¬¢é¦™è•‰' },
                { round: 3, user: 'æˆ‘ä¹Ÿå–œæ¬¢æ©™å­', ai: 'äº†è§£ï¼Œä½ è¿˜å–œæ¬¢æ©™å­' },
                { round: 4, user: 'æˆ‘ä¹Ÿå–œæ¬¢è‘¡è„', ai: 'å¥½çš„ï¼Œä½ è¿˜å–œæ¬¢è‘¡è„' },
                { round: 5, user: 'æˆ‘è¿˜å–œæ¬¢è¥¿ç“œ', ai: 'æ˜ç™½ï¼Œä½ è¿˜å–œæ¬¢è¥¿ç“œ' }
            ];

            // é€è½®æ˜¾ç¤ºå¯¹è¯
            for (let i = 0; i < allRounds.length; i++) {
                await new Promise(resolve => setTimeout(resolve, 1000));

                const round = allRounds[i];
                const div = document.createElement('div');
                div.className = 'window-item';
                div.id = `window-round-${round.round}`;
                div.innerHTML = `
                    <div style="font-weight: bold; margin-bottom: 8px; color: #a78bfa;">ç¬¬ ${round.round} è½®å¯¹è¯</div>
                    <div style="margin-bottom: 5px;">ğŸ‘¤ ç”¨æˆ·: ${round.user}</div>
                    <div style="color: #22c55e;">ğŸ¤– AI: ${round.ai}</div>
                `;
                container.appendChild(div);

                // è§¦å‘è¿›å…¥åŠ¨ç”»
                await new Promise(resolve => setTimeout(resolve, 50));
                div.classList.add('visible', 'active');

                // æ»‘åŠ¨çª—å£é€»è¾‘ï¼šk=2ï¼Œåªä¿ç•™æœ€è¿‘2è½®å¯¹è¯
                // å½“è½®æ¬¡ > 2 æ—¶ï¼Œä¸¢å¼ƒæ›´æ—©çš„è½®æ¬¡
                if (i >= 2) {
                    await new Promise(resolve => setTimeout(resolve, 800));

                    // è®¡ç®—éœ€è¦ä¸¢å¼ƒçš„è½®æ¬¡
                    const discardRound = i - 2 + 1; // ä¸¢å¼ƒç¬¬ (i-1) è½®
                    const discardElement = document.getElementById(`window-round-${discardRound}`);

                    if (discardElement) {
                        discardElement.classList.add('discarded');
                        discardElement.classList.remove('active');
                    }

                    // æ›´æ–°çŠ¶æ€è¯´æ˜
                    let statusDiv = document.getElementById('window-status');
                    if (!statusDiv) {
                        statusDiv = document.createElement('div');
                        statusDiv.id = 'window-status';
                        statusDiv.style.cssText = 'background: rgba(34, 197, 94, 0.1); padding: 15px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #22c55e;';
                        container.appendChild(statusDiv);
                    }

                    const keptRounds = [];
                    for (let j = Math.max(1, i - 1 + 1); j <= i + 1; j++) {
                        keptRounds.push(j);
                    }

                    statusDiv.innerHTML = `
                        <strong style="color: #4ade80;">âœ… å½“å‰å†…å­˜çŠ¶æ€ï¼ˆç¬¬ ${round.round} è½®åï¼‰ï¼š</strong><br>
                        â€¢ å·²ä¸¢å¼ƒï¼šç¬¬ 1 åˆ°ç¬¬ ${discardRound} è½®å¯¹è¯<br>
                        â€¢ ä¿ç•™ä¸­ï¼šç¬¬ ${keptRounds.join('ã€')} è½®å¯¹è¯<br>
                        <span style="color: rgba(255,255,255,0.6); font-size: 0.9em;">(k=2ï¼Œå§‹ç»ˆä¿ç•™æœ€è¿‘ 2 è½®å¯¹è¯)</span>
                    `;

                    // è‡ªåŠ¨æ»šåŠ¨åˆ°åº•éƒ¨
                    container.scrollTop = container.scrollHeight;
                }
            }

            // æœ€ç»ˆæ€»ç»“
            await new Promise(resolve => setTimeout(resolve, 1000));
            const summaryDiv = document.createElement('div');
            summaryDiv.style.cssText = 'background: rgba(251, 191, 36, 0.1); padding: 20px; border-radius: 8px; margin-top: 20px; border-left: 4px solid #fbbf24;';
            summaryDiv.innerHTML = `
                <strong style="color: #fbbf24;">ğŸ“Š æ¼”ç¤ºæ€»ç»“ï¼š</strong><br>
                ç»è¿‡ 5 è½®å¯¹è¯åï¼Œå†…å­˜ä¸­åªä¿ç•™äº†ç¬¬ 3ã€4ã€5 è½®å¯¹è¯ã€‚<br>
                ç¬¬ 1ã€2 è½®å·²è¢«æ»‘åŠ¨çª—å£ç§»é™¤ï¼Œæœ‰æ•ˆæ§åˆ¶äº† Token å¢é•¿ï¼
            `;
            container.appendChild(summaryDiv);
            await new Promise(resolve => setTimeout(resolve, 100));
            summaryDiv.style.opacity = '0';
            summaryDiv.style.transform = 'translateY(20px)';
            summaryDiv.style.transition = 'all 0.5s';
            requestAnimationFrame(() => {
                summaryDiv.style.opacity = '1';
                summaryDiv.style.transform = 'translateY(0)';
            });
        }

        // å¯åŠ¨
        init();
    </script>
</body>
</html>
