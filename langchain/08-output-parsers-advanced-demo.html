<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è¾“å‡ºè§£æå™¨å¯è§†åŒ– - LangChain å­¦ä¹  08</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', 'Microsoft YaHei', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
            position: relative;
        }

        /* æµ®åŠ¨å…‰çƒ */
        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
            animation: float 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.3) 0%, rgba(59, 130, 246, 0.1) 50%, transparent 70%);
            top: -200px;
            right: -200px;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(236, 72, 153, 0.2) 0%, rgba(168, 85, 247, 0.1) 50%, transparent 70%);
            bottom: -150px;
            left: -150px;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            25% { transform: translate(30px, -30px) scale(1.1); }
            50% { transform: translate(-20px, 20px) scale(0.9); }
            75% { transform: translate(-30px, -20px) scale(1.05); }
        }

        /* ä¸»å®¹å™¨ */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        /* å¤´éƒ¨ */
        .header {
            text-align: center;
            margin-bottom: 60px;
            animation: fadeInDown 1s ease-out;
        }

        @keyframes fadeInDown {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .header h1 {
            font-size: 3.5em;
            margin-bottom: 20px;
            background: linear-gradient(135deg, #a78bfa 0%, #60a5fa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 0 40px rgba(167, 139, 250, 0.3);
        }

        .header p {
            font-size: 1.3em;
            color: rgba(226, 232, 240, 0.8);
        }

        /* è¿›åº¦æ¡ */
        .progress-container {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 4px;
            background: rgba(255, 255, 255, 0.1);
            z-index: 1000;
        }

        .progress-bar {
            height: 100%;
            background: linear-gradient(90deg, #8b5cf6 0%, #a855f7 50%, #d946ef 100%);
            width: 0%;
            transition: width 0.5s ease;
        }

        /* åœºæ™¯å®¹å™¨ */
        .scene {
            display: none;
            opacity: 0;
            transform: translateY(30px);
            transition: all 0.8s cubic-bezier(0.4, 0, 0.2, 1);
        }

        .scene.active {
            display: block;
            opacity: 1;
            transform: translateY(0);
        }

        /* åœºæ™¯æ ‡é¢˜ */
        .scene-title {
            font-size: 2.5em;
            margin-bottom: 30px;
            text-align: center;
            background: linear-gradient(135deg, #a78bfa 0%, #60a5fa 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            animation: fadeIn 1s ease-out;
        }

        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }

        /* åŠ¨ç”»ç”»å¸ƒ */
        .canvas-container {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        /* æ•°æ®æµå¯è§†åŒ– */
        .data-flow-container {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 40px;
            padding: 60px 20px;
            flex-wrap: wrap;
        }

        .flow-box {
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid rgba(139, 92, 246, 0.5);
            border-radius: 15px;
            padding: 30px;
            min-width: 250px;
            text-align: center;
            transition: all 0.6s;
            transform: scale(0.8);
            opacity: 0;
            position: relative;
        }

        .flow-box.visible {
            transform: scale(1);
            opacity: 1;
        }

        .flow-box.processing {
            animation: pulse 1s ease-in-out infinite;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); box-shadow: 0 0 20px rgba(139, 92, 246, 0.4); }
            50% { transform: scale(1.05); box-shadow: 0 0 40px rgba(139, 92, 246, 0.8); }
        }

        .flow-arrow {
            font-size: 3em;
            color: #8b5cf6;
            opacity: 0;
            transition: all 0.6s;
        }

        .flow-arrow.visible {
            opacity: 1;
            animation: flow 1.5s ease-in-out infinite;
        }

        @keyframes flow {
            0%, 100% { transform: translateX(0); }
            50% { transform: translateX(10px); }
        }

        .flow-box h4 {
            color: #a78bfa;
            margin-bottom: 15px;
            font-size: 1.3em;
        }

        .flow-box .content {
            color: rgba(226, 232, 240, 0.8);
            font-size: 0.95em;
            line-height: 1.6;
            text-align: left;
        }

        /* JSON å¯è§†åŒ– */
        .json-viewer {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 12px;
            padding: 25px;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.8;
            overflow-x: auto;
            margin: 20px 0;
        }

        .json-key { color: #a78bfa; }
        .json-string { color: #c3e88d; }
        .json-number { color: #f78c6c; }
        .json-boolean { color: #c792ea; }
        .json-bracket { color: #89ddff; }

        /* è§£æè¿‡ç¨‹åŠ¨ç”» */
        .parse-animation {
            display: flex;
            flex-direction: column;
            gap: 30px;
            padding: 40px;
        }

        .parse-step {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 12px;
            padding: 25px;
            border-left: 4px solid #8b5cf6;
            transform: translateX(-50px);
            opacity: 0;
            transition: all 0.6s;
        }

        .parse-step.visible {
            transform: translateX(0);
            opacity: 1;
        }

        .parse-step.success {
            border-left-color: #22c55e;
            background: rgba(34, 197, 94, 0.1);
        }

        .parse-step.error {
            border-left-color: #ef4444;
            background: rgba(239, 68, 68, 0.1);
        }

        .parse-step h4 {
            color: #a78bfa;
            margin-bottom: 12px;
            font-size: 1.2em;
        }

        .parse-step.success h4 {
            color: #22c55e;
        }

        .parse-step.error h4 {
            color: #ef4444;
        }

        /* å¯¹æ¯”è¡¨æ ¼ */
        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 30px 0;
            background: rgba(255, 255, 255, 0.03);
            border-radius: 15px;
            overflow: hidden;
        }

        .comparison-table th {
            background: rgba(139, 92, 246, 0.2);
            padding: 20px;
            text-align: left;
            font-weight: 600;
            color: #a78bfa;
        }

        .comparison-table td {
            padding: 20px;
            border-top: 1px solid rgba(255, 255, 255, 0.1);
        }

        .comparison-table tr:hover td {
            background: rgba(139, 92, 246, 0.1);
        }

        /* ç‰¹æ€§ç½‘æ ¼ */
        .feature-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .feature-item {
            background: rgba(255, 255, 255, 0.05);
            padding: 25px;
            border-radius: 12px;
            text-align: center;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.6s;
            border: 1px solid rgba(255, 255, 255, 0.1);
        }

        .feature-item.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .feature-item:hover {
            background: rgba(139, 92, 246, 0.15);
            transform: translateY(-5px);
            border-color: rgba(139, 92, 246, 0.3);
        }

        .feature-icon {
            font-size: 3em;
            margin-bottom: 15px;
        }

        .feature-item h4 {
            color: #a78bfa;
            margin-bottom: 10px;
            font-size: 1.2em;
        }

        .feature-item p {
            color: rgba(226, 232, 240, 0.7);
            font-size: 0.9em;
            line-height: 1.6;
        }

        /* ä»£ç å¡ç‰‡ */
        .code-card {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 15px;
            overflow: hidden;
            border: 1px solid rgba(255, 255, 255, 0.1);
            margin: 20px 0;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.6s;
        }

        .code-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .code-card-header {
            background: rgba(139, 92, 246, 0.2);
            padding: 15px 20px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            font-weight: 600;
            color: #a78bfa;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .code-card-body {
            padding: 20px;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.9em;
            line-height: 1.8;
            overflow-x: auto;
        }

        .keyword { color: #c792ea; font-weight: 600; }
        .string { color: #c3e88d; }
        .comment { color: #546e7a; font-style: italic; }
        .function { color: #82aaff; }

        /* é«˜äº®æ¡† */
        .highlight-box {
            background: rgba(139, 92, 246, 0.15);
            border-left: 5px solid #8b5cf6;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            animation: slideInRight 0.8s ease-out;
        }

        @keyframes slideInRight {
            from {
                opacity: 0;
                transform: translateX(50px);
            }
            to {
                opacity: 1;
                transform: translateX(0);
            }
        }

        .highlight-box h3 {
            color: #a78bfa;
            margin-bottom: 15px;
            font-size: 1.5em;
        }

        .highlight-box p {
            line-height: 1.8;
            color: rgba(226, 232, 240, 0.9);
        }

        /* è§£æå™¨ç±»å‹å¡ç‰‡ */
        .parser-type-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin: 30px 0;
        }

        .parser-type-card {
            background: rgba(255, 255, 255, 0.05);
            border: 2px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 30px;
            transform: translateY(30px);
            opacity: 0;
            transition: all 0.6s;
            position: relative;
            overflow: hidden;
        }

        .parser-type-card.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .parser-type-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #8b5cf6, #a855f7);
            transform: scaleX(0);
            transition: transform 0.3s;
        }

        .parser-type-card:hover::before {
            transform: scaleX(1);
        }

        .parser-type-card:hover {
            border-color: rgba(139, 92, 246, 0.3);
            transform: translateY(-5px);
        }

        .parser-type-card .icon {
            font-size: 2.5em;
            margin-bottom: 15px;
        }

        .parser-type-card h4 {
            color: #a78bfa;
            margin-bottom: 12px;
            font-size: 1.3em;
        }

        .parser-type-card p {
            color: rgba(226, 232, 240, 0.7);
            font-size: 0.9em;
            line-height: 1.6;
            margin-bottom: 15px;
        }

        .parser-type-card .example {
            background: rgba(0, 0, 0, 0.3);
            border-radius: 8px;
            padding: 12px;
            font-family: 'JetBrains Mono', 'Consolas', monospace;
            font-size: 0.85em;
            color: rgba(226, 232, 240, 0.8);
        }

        /* å¯¼èˆªæŒ‰é’® */
        .nav-buttons {
            display: flex;
            justify-content: space-between;
            margin-top: 60px;
            gap: 20px;
        }

        .nav-btn {
            padding: 15px 40px;
            background: rgba(139, 92, 246, 0.2);
            border: 2px solid rgba(139, 92, 246, 0.5);
            border-radius: 12px;
            color: #a78bfa;
            font-size: 1.1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .nav-btn:hover:not(:disabled) {
            background: rgba(139, 92, 246, 0.4);
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.4);
        }

        /* é’ˆå¯¹ a æ ‡ç­¾çš„å¯¼èˆªæŒ‰é’®æ ·å¼ */
        .nav-btn.back-to-list {
            text-decoration: none;
            background: rgba(59, 130, 246, 0.2);
            border-color: rgba(59, 130, 246, 0.5);
            color: #60a5fa;
        }

        .nav-btn.back-to-list:hover {
            background: rgba(59, 130, 246, 0.4);
            box-shadow: 0 5px 20px rgba(59, 130, 246, 0.4);
        }

        .nav-btn:disabled {
            opacity: 0.3;
            cursor: not-allowed;
        }

        .nav-btn.next {
            margin-left: auto;
        }

        /* åœºæ™¯æŒ‡ç¤ºå™¨ */
        .scene-indicators {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 40px 0;
        }

        .indicator {
            width: 12px;
            height: 12px;
            border-radius: 50%;
            background: rgba(255, 255, 255, 0.2);
            cursor: pointer;
            transition: all 0.3s;
        }

        .indicator.active {
            background: #8b5cf6;
            transform: scale(1.3);
        }

        .indicator:hover {
            transform: scale(1.2);
        }

        /* äº¤äº’æŒ‰é’® */
        .demo-btn {
            padding: 12px 30px;
            background: linear-gradient(135deg, #8b5cf6, #a855f7);
            border: none;
            border-radius: 10px;
            color: white;
            font-size: 1em;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s;
            margin: 10px;
        }

        .demo-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 5px 20px rgba(139, 92, 246, 0.5);
        }

        /* å“åº”å¼ */
        @media (max-width: 768px) {
            .header h1 {
                font-size: 2em;
            }

            .data-flow-container {
                flex-direction: column;
            }

            .flow-arrow {
                transform: rotate(90deg);
            }

            .comparison-table {
                font-size: 0.9em;
            }

            .comparison-table th,
            .comparison-table td {
                padding: 15px;
            }
        }
    
        /* æ ‡å‡†å¯¼èˆªæ ·å¼ */
        .nav-card {
            background: rgba(15, 23, 42, 0.6);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 24px;
            margin-bottom: 32px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .nav-card a {
            text-decoration: none;
            transition: all 0.3s ease;
        }

        .nav-card a:hover {
            transform: translateY(-2px);
        }

        /* é¡¶éƒ¨å¯¼èˆªå¡ç‰‡ */
        .top-nav-card {
            background: rgba(15, 23, 42, 0.8);
            backdrop-filter: blur(12px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 16px;
            padding: 16px 24px;
            margin: 20px 0;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
        }

        .top-nav-container {
            display: flex;
            justify-content: space-between;
            align-items: center;
            flex-wrap: wrap;
            gap: 16px;
        }

        .top-nav-left,
        .top-nav-center,
        .top-nav-right {
            display: flex;
            align-items: center;
            gap: 16px;
        }

        .top-nav-link {
            display: flex;
            align-items: center;
            gap: 8px;
            color: #9ca3af;
            text-decoration: none;
            padding: 8px 16px;
            border-radius: 8px;
            transition: all 0.3s ease;
            font-size: 0.95em;
        }

        .top-nav-link:hover {
            color: #e5e7eb;
            background: rgba(255, 255, 255, 0.05);
            transform: translateY(-2px);
        }

        .top-nav-link.home {
            color: #4ade80;
        }

        .top-nav-link.home:hover {
            color: #86efac;
        }

        .top-nav-link svg {
            width: 20px;
            height: 20px;
        }

        .top-nav-divider {
            width: 1px;
            height: 24px;
            background: rgba(255, 255, 255, 0.1);
        }

        .top-nav-text {
            color: #6b7280;
            font-size: 0.9em;
        }

        .top-nav-progress {
            color: #9ca3af;
            font-size: 0.9em;
            font-weight: 500;
        }
</style>
</head>
<body>
    <!-- æµ®åŠ¨å…‰çƒ -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>    <!-- é¡¶éƒ¨å¯¼èˆª - è·¨æ¨¡å— -->
    <div class="top-nav-card">
        <div class="top-nav-container">
            <div class="top-nav-left">
                <a href="index.html" class="top-nav-link home">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    è¿”å›LangChainç›®å½•
                </a>
            </div>
            <div class="top-nav-center">
                <a href="07-vector-storage-rag-demo.html" class="top-nav-link">
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    ä¸Šä¸€è¯¾
                </a>
                <div class="top-nav-divider"></div>
                <a href="09-callbacks-streaming-demo.html" class="top-nav-link">
                    ä¸‹ä¸€è¯¾
                    <svg fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
            </div>
            <div class="top-nav-right">
                <span class="top-nav-progress">è¯¾ç¨‹ 8 / 20</span>
            </div>
        </div>
    </div>

    <!-- è¿›åº¦æ¡ -->
    <div class="progress-container">
        <div class="progress-bar" id="progressBar"></div>
    </div>

    <!-- ä¸»å®¹å™¨ -->
    <div class="container">
        <!-- å¤´éƒ¨ -->
        <div class="header">
            <h1>ğŸ¯ è¾“å‡ºè§£æå™¨å¯è§†åŒ–</h1>
            <p>ä»æ··ä¹±åˆ°ç»“æ„ï¼šå¦‚ä½•è®© LLM è¾“å‡ºå¯ç”¨æ•°æ®</p>
        </div>

        <!-- åœºæ™¯ 1: ä¸ºä»€ä¹ˆéœ€è¦è¾“å‡ºè§£æå™¨ -->
        <div class="scene active" id="scene1">
            <h2 class="scene-title">ğŸ¤” ä¸ºä»€ä¹ˆéœ€è¦è¾“å‡ºè§£æå™¨ï¼Ÿ</h2>

            <div class="data-flow-container">
                <div class="flow-box" data-delay="0">
                    <h4>ğŸ“ ç”¨æˆ·è¾“å…¥</h4>
                    <div class="content">
                        "åˆ†æè¿™éƒ¨ç”µå½±ï¼šç›—æ¢¦ç©ºé—´æ˜¯ä¸€éƒ¨ç§‘å¹»ç‰‡ï¼Œè¯„åˆ†9åˆ†ï¼Œä¸»è§’æ˜¯è±æ˜‚çº³å¤š..."
                    </div>
                </div>

                <div class="flow-arrow" data-delay="200">â†’</div>

                <div class="flow-box" data-delay="400">
                    <h4>ğŸ¤– LLM åŸå§‹è¾“å‡º</h4>
                    <div class="content" style="color: #ef4444;">
                        "è¿™éƒ¨ç”µå½±ã€Šç›—æ¢¦ç©ºé—´ã€‹æ˜¯ä¸€éƒ¨ç§‘å¹»ç‰‡ï¼Œè¯„åˆ†æ˜¯9åˆ†ï¼Œä¸»è§’æ˜¯è±æ˜‚çº³å¤šÂ·è¿ªå¡æ™®é‡Œå¥¥ï¼Œå¯¼æ¼”æ˜¯å…‹é‡Œæ–¯æ‰˜å¼—Â·è¯ºå…°..."
                    </div>
                </div>

                <div class="flow-arrow" data-delay="600">â†’</div>

                <div class="flow-box success" data-delay="800">
                    <h4>âœ… ä½ éœ€è¦çš„æ•°æ®</h4>
                    <div class="content" style="color: #22c55e;">
                        {<br>
                        &nbsp;&nbsp;title: "ç›—æ¢¦ç©ºé—´",<br>
                        &nbsp;&nbsp;genre: "ç§‘å¹»",<br>
                        &nbsp;&nbsp;rating: 9,<br>
                        &nbsp;&nbsp;lead_actor: "è±æ˜‚çº³å¤š"<br>
                        }
                    </div>
                </div>
            </div>

            <div class="highlight-box">
                <h3>ğŸ’¡ æ ¸å¿ƒé—®é¢˜</h3>
                <p>
                    <strong>LLM çš„è¾“å‡ºæ˜¯è‡ªç”±æ–‡æœ¬ï¼Œè€Œä¸æ˜¯ç»“æ„åŒ–æ•°æ®ã€‚</strong><br><br>
                    æƒ³è±¡ä¸€ä¸‹ï¼š<br>
                    â€¢ ä½ éœ€è¦æå–ç”¨æˆ·ä¿¡æ¯æ¥ä¿å­˜åˆ°æ•°æ®åº“<br>
                    â€¢ ä½ éœ€è¦è§£ææ—¥æœŸæ¥è®¾ç½®æé†’<br>
                    â€¢ ä½ éœ€è¦åˆ†ææƒ…æ„Ÿæ¥åšç»Ÿè®¡åˆ†æ<br><br>
                    <strong>æ²¡æœ‰è¾“å‡ºè§£æå™¨ï¼Œä½ éœ€è¦å†™å¤§é‡æ­£åˆ™è¡¨è¾¾å¼å’Œå­—ç¬¦ä¸²å¤„ç†ä»£ç ï¼</strong>
                </p>
            </div>

            <div class="code-card visible" data-delay="0">
                <div class="code-card-header">
                    <span>âŒ æ²¡æœ‰è¾“å‡ºè§£æå™¨çš„ç—›è‹¦</span>
                </div>
                <div class="code-card-body">
                    <code>
<span class="comment"># éœ€è¦æ‰‹åŠ¨è§£æ LLM è¾“å‡º</span>
<span class="keyword">import</span> re

output = llm.invoke(<span class="string">"åˆ†æç”µå½±..."</span>)

<span class="comment"># ğŸ˜° ç”¨æ­£åˆ™æå–æ¯ä¸ªå­—æ®µ</span>
title = re.search(<span class="string">r'ç”µå½±ã€Š(.*?)ã€‹'</span>, output)
rating = re.search(<span class="string">r'è¯„åˆ†[æ˜¯ä¸º]?(\d+)'</span>, output)

<span class="comment"># ğŸ˜° å¤„ç†å„ç§æ ¼å¼å˜åŒ–</span>
<span class="keyword">if</span> rating:
    score = <span class="keyword">int</span>(rating.group(<span class="string">1</span>))
<span class="keyword">else</span>:
    score = <span class="keyword">None</span>

<span class="comment"># ğŸ˜° å®¹æ˜“å‡ºé”™ï¼Œéš¾ä»¥ç»´æŠ¤</span>
                    </code>
                </div>
            </div>
        </div>

        <!-- åœºæ™¯ 2: è¾“å‡ºè§£æå™¨å·¥ä½œåŸç† -->
        <div class="scene" id="scene2">
            <h2 class="scene-title">âš™ï¸ è¾“å‡ºè§£æå™¨å¦‚ä½•å·¥ä½œï¼Ÿ</h2>

            <div class="parse-animation" id="parseAnimation">
                <div class="parse-step" data-step="1">
                    <h4>1ï¸âƒ£ å®šä¹‰è¾“å‡ºæ ¼å¼</h4>
                    <p>å‘Šè¯‰ LLM ä½ æœŸæœ›çš„æ•°æ®ç»“æ„</p>
                    <div class="code-card" style="margin-top: 15px;">
                        <div class="code-card-body" style="padding: 15px;">
                            <code>
<span class="keyword">class</span> <span class="function">MovieReview</span>(BaseModel):
    title: <span class="keyword">str</span>
    rating: <span class="keyword">float</span>
    summary: <span class="keyword">str</span>
                            </code>
                        </div>
                    </div>
                </div>

                <div class="parse-step" data-step="2">
                    <h4>2ï¸âƒ£ ç”Ÿæˆæ ¼å¼è¯´æ˜</h4>
                    <p>è‡ªåŠ¨ç”Ÿæˆæ¸…æ™°çš„æ ¼å¼æŒ‡ä»¤</p>
                    <div class="json-viewer" style="margin-top: 15px; font-size: 0.85em;">
                        <code>
<span class="json-string">"è¾“å‡ºåº”è¯¥æŒ‰ç…§ä»¥ä¸‹ JSON æ ¼å¼ï¼š"</span><br>
<span class="json-bracket">{</span><br>
&nbsp;&nbsp;<span class="json-key">"title"</span>: <span class="json-string">"ç”µå½±æ ‡é¢˜"</span>,<br>
&nbsp;&nbsp;<span class="json-key">"rating"</span>: <span class="json-number">è¯„åˆ†</span>,<br>
&nbsp;&nbsp;<span class="json-key">"summary"</span>: <span class="json-string">"æ‘˜è¦"</span><br>
<span class="json-bracket">}</span>
                        </code>
                    </div>
                </div>

                <div class="parse-step" data-step="3">
                    <h4>3ï¸âƒ£ LLM ç”Ÿæˆè¾“å‡º</h4>
                    <p>LLM æŒ‰ç…§æ ¼å¼è¦æ±‚è¿”å› JSON</p>
                    <div class="json-viewer" style="margin-top: 15px;">
                        <code>
<span class="json-bracket">{</span><br>
&nbsp;&nbsp;<span class="json-key">"title"</span>: <span class="json-string">"ç›—æ¢¦ç©ºé—´"</span>,<br>
&nbsp;&nbsp;<span class="json-key">"rating"</span>: <span class="json-number">9.0</span>,<br>
&nbsp;&nbsp;<span class="json-key">"summary"</span>: <span class="json-string">"è¯ºå…°æ‰§å¯¼çš„ç§‘å¹»æ°ä½œ"</span><br>
<span class="json-bracket">}</span>
                        </code>
                    </div>
                </div>

                <div class="parse-step success" data-step="4">
                    <h4>âœ… 4ï¸âƒ£ è§£æå’ŒéªŒè¯</h4>
                    <p>è‡ªåŠ¨è§£æ JSON å¹¶éªŒè¯ç±»å‹</p>
                    <div class="code-card" style="margin-top: 15px;">
                        <div class="code-card-body" style="padding: 15px;">
                            <code>
result.title     <span class="comment"># "ç›—æ¢¦ç©ºé—´" (str)</span>
result.rating    <span class="comment"># 9.0 (float)</span>
result.summary   <span class="comment"># "è¯ºå…°æ‰§å¯¼çš„ç§‘å¹»æ°ä½œ" (str)</span>

<span class="comment"># ç±»å‹å®‰å…¨ï¼è‡ªåŠ¨è¡¥å…¨ï¼</span>
                            </code>
                        </div>
                    </div>
                </div>
            </div>

            <div style="text-align: center; margin-top: 30px;">
                <button class="demo-btn" onclick="runParseAnimation()">
                    ğŸ¬ æ’­æ”¾è§£æè¿‡ç¨‹åŠ¨ç”»
                </button>
            </div>

            <div class="highlight-box">
                <h3>ğŸ¯ æ ¸å¿ƒä»·å€¼</h3>
                <p>
                    <strong>è¾“å‡ºè§£æå™¨ = æ ¼å¼è¯´æ˜å™¨ + éªŒè¯å™¨ + ç±»å‹è½¬æ¢å™¨</strong><br><br>
                    1. è‡ªåŠ¨ç”Ÿæˆæ ¼å¼æŒ‡ä»¤<br>
                    2. è§£æ LLM è¿”å›çš„æ–‡æœ¬<br>
                    3. éªŒè¯æ•°æ®ç±»å‹å’Œçº¦æŸ<br>
                    4. è¿”å›ç±»å‹å®‰å…¨çš„ Python å¯¹è±¡<br><br>
                    <strong>ä½ åªéœ€è¦å®šä¹‰æ•°æ®æ¨¡å‹ï¼Œå‰©ä¸‹çš„äº¤ç»™è§£æå™¨ï¼</strong>
                </p>
            </div>
        </div>

        <!-- åœºæ™¯ 3: åŸºç¡€è§£æå™¨ç±»å‹ -->
        <div class="scene" id="scene3">
            <h2 class="scene-title">ğŸ“¦ åŸºç¡€è§£æå™¨ç±»å‹</h2>

            <div class="parser-type-grid">
                <div class="parser-type-card" data-delay="0">
                    <div class="icon">ğŸ”·</div>
                    <h4>PydanticOutputParser</h4>
                    <p>æœ€å¼ºå¤§çš„è§£æå™¨ï¼Œä½¿ç”¨ Pydantic æ¨¡å‹å®šä¹‰å¤æ‚çš„è¾“å‡ºç»“æ„ï¼Œæ”¯æŒç±»å‹éªŒè¯ã€çº¦æŸæ£€æŸ¥ã€‚</p>
                    <div class="example">
                        é€‚ç”¨ï¼šç”µå½±è¯„è®ºã€ç”¨æˆ·ä¿¡æ¯ã€äº§å“æ•°æ®ç­‰å¤æ‚å¯¹è±¡
                    </div>
                </div>

                <div class="parser-type-card" data-delay="100">
                    <div class="icon">ğŸ“‹</div>
                    <h4>JsonOutputParser</h4>
                    <p>ç®€å•çš„ JSON è§£æå™¨ï¼Œå°† LLM è¾“å‡ºè§£æä¸º Python å­—å…¸ï¼Œé€‚åˆç®€å•çš„é”®å€¼å¯¹æ•°æ®ã€‚</p>
                    <div class="example">
                        é€‚ç”¨ï¼šé…ç½®ã€ç®€å•æ•°æ®ã€API å“åº”
                    </div>
                </div>

                <div class="parser-type-card" data-delay="200">
                    <div class="icon">ğŸ”¢</div>
                    <h4>CommaSeparatedListOutputParser</h4>
                    <p>å°†è¾“å‡ºè§£æä¸ºåˆ—è¡¨ï¼Œæ”¯æŒé€—å·åˆ†éš”çš„é¡¹ç›®ï¼Œé€‚åˆåˆ—ä¸¾å¤šä¸ªé¡¹ç›®ã€‚</p>
                    <div class="example">
                        é€‚ç”¨ï¼šå…³é”®è¯åˆ—è¡¨ã€é¡¹ç›®æ¸…å•ã€æ ‡ç­¾
                    </div>
                </div>

                <div class="parser-type-card" data-delay="300">
                    <div class="icon">ğŸ“</div>
                    <h4>StrOutputParser</h4>
                    <p>æœ€ç®€å•çš„è§£æå™¨ï¼Œç›´æ¥è¿”å›å­—ç¬¦ä¸²è¾“å‡ºï¼Œé€‚åˆçº¯æ–‡æœ¬åœºæ™¯ã€‚</p>
                    <div class="example">
                        é€‚ç”¨ï¼šé—®ç­”ã€æ‘˜è¦ã€ç¿»è¯‘ã€å¯¹è¯
                    </div>
                </div>

                <div class="parser-type-card" data-delay="400">
                    <div class="icon">ğŸ”„</div>
                    <h4>StructuredOutputParser</h4>
                    <p>ç±»ä¼¼ Pydanticï¼Œä½†ä½¿ç”¨å­—å…¸å®šä¹‰ç»“æ„ï¼Œé€‚åˆä¸éœ€è¦ç±»å‹æ£€æŸ¥çš„ç®€å•åœºæ™¯ã€‚</p>
                    <div class="example">
                        é€‚ç”¨ï¼šå¿«é€ŸåŸå‹ã€ç®€å•ç»“æ„åŒ–æ•°æ®
                    </div>
                </div>

                <div class="parser-type-card" data-delay="500">
                    <div class="icon">ğŸ› ï¸</div>
                    <h4>è‡ªå®šä¹‰è§£æå™¨</h4>
                    <p>ç»§æ‰¿ BaseOutputParser åˆ›å»ºè‡ªå·±çš„è§£æå™¨ï¼Œå®Œå…¨æ§åˆ¶è§£æé€»è¾‘ã€‚</p>
                    <div class="example">
                        é€‚ç”¨ï¼šç‰¹æ®Šæ ¼å¼ã€å¤æ‚éªŒè¯ã€ä¸šåŠ¡é€»è¾‘
                    </div>
                </div>
            </div>

            <table class="comparison-table">
                <thead>
                    <tr>
                        <th style="width: 25%;">è§£æå™¨</th>
                        <th style="width: 25%;">å¤æ‚åº¦</th>
                        <th style="width: 25;">ç±»å‹å®‰å…¨</th>
                        <th style="width: 25%;">ä½¿ç”¨åœºæ™¯</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>PydanticOutputParser</td>
                        <td>â­â­â­â­</td>
                        <td>âœ… å®Œå…¨</td>
                        <td>ç”Ÿäº§ç¯å¢ƒï¼Œå¤æ‚æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>JsonOutputParser</td>
                        <td>â­â­</td>
                        <td>âš ï¸ éƒ¨åˆ†</td>
                        <td>ç®€å• JSON æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>CommaSeparatedListOutputParser</td>
                        <td>â­</td>
                        <td>âŒ æ— </td>
                        <td>åˆ—è¡¨æ•°æ®</td>
                    </tr>
                    <tr>
                        <td>StrOutputParser</td>
                        <td>â­</td>
                        <td>âŒ æ— </td>
                        <td>çº¯æ–‡æœ¬è¾“å‡º</td>
                    </tr>
                </tbody>
            </table>
        </div>

        <!-- åœºæ™¯ 4: Pydantic è§£æå™¨å®æˆ˜ -->
        <div class="scene" id="scene4">
            <h2 class="scene-title">ğŸ¯ Pydantic è§£æå™¨ï¼šç±»å‹å®‰å…¨</h2>

            <div class="data-flow-container">
                <div class="flow-box" data-delay="0">
                    <h4>ğŸ“ å®šä¹‰æ¨¡å‹</h4>
                    <div class="code-card" style="margin: 15px 0; background: transparent; border: none;">
                        <div class="code-card-body" style="padding: 10px;">
                            <code style="font-size: 0.85em;">
<span class="keyword">class</span> <span class="function">Movie</span>(BaseModel):
    title: <span class="keyword">str</span>
    rating: <span class="keyword">float</span> = Field(ge=<span class="number">0</span>, le=<span class="number">10</span>)
    tags: List[<span class="keyword">str</span>]
                            </code>
                        </div>
                    </div>
                </div>

                <div class="flow-arrow" data-delay="200">â†’</div>

                <div class="flow-box" data-delay="400">
                    <h4>âœ¨ è‡ªåŠ¨éªŒè¯</h4>
                    <div class="content">
                        âœ“ è¯„åˆ†å¿…é¡»æ˜¯ 0-10<br>
                        âœ“ tags å¿…é¡»æ˜¯åˆ—è¡¨<br>
                        âœ“ title ä¸èƒ½ä¸ºç©º
                    </div>
                </div>

                <div class="flow-arrow" data-delay="600">â†’</div>

                <div class="flow-box success" data-delay="800">
                    <h4>ğŸ‰ ç±»å‹å®‰å…¨</h4>
                    <div class="content">
                        <code style="color: #22c55e;">
movie.title    <span class="comment"># str âœ“</span><br>
movie.rating   <span class="comment"># float âœ“</span><br>
movie.tags     <span class="comment"># List[str] âœ“</span>
                        </code>
                    </div>
                </div>
            </div>

            <div class="code-card visible" data-delay="0">
                <div class="code-card-header">
                    <span>ğŸ”¥ PydanticOutputParser å®Œæ•´ç¤ºä¾‹</span>
                </div>
                <div class="code-card-body">
                    <code>
<span class="keyword">from</span> pydantic <span class="keyword">import</span> BaseModel, Field
<span class="keyword">from</span> typing <span class="keyword">import</span> List
<span class="keyword">from</span> langchain.output_parsers <span class="keyword">import</span> PydanticOutputParser

<span class="comment"># å®šä¹‰æ•°æ®æ¨¡å‹</span>
<span class="keyword">class</span> <span class="function">MovieReview</span>(BaseModel):
    <span class="string">"""ç”µå½±è¯„è®ºæ¨¡å‹"""</span>
    title: <span class="keyword">str</span> = Field(description=<span class="string">"ç”µå½±æ ‡é¢˜"</span>)
    rating: <span class="keyword">float</span> = Field(description=<span class="string">"è¯„åˆ† 0-10"</span>, ge=<span class="number">0</span>, le=<span class="number">10</span>)
    tags: List[<span class="keyword">str</span>] = Field(description=<span class="string">"æ ‡ç­¾åˆ—è¡¨"</span>)

<span class="comment"># åˆ›å»ºè§£æå™¨</span>
parser = PydanticOutputParser(pydantic_object=MovieReview)

<span class="comment"># è·å–æ ¼å¼è¯´æ˜ï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰</span>
format_instructions = parser.get_format_instructions()

<span class="comment"># åˆ›å»ºé“¾</span>
chain = prompt | llm | parser

<span class="comment"># ä½¿ç”¨ï¼è¿”å›ç±»å‹å®‰å…¨çš„å¯¹è±¡</span>
result = chain.invoke({<span class="string">"review"</span>: text})

<span class="comment"># ç°åœ¨ä½ æœ‰äº†ä¸€ä¸ªå®Œå…¨ç±»å‹å®‰å…¨çš„å¯¹è±¡</span>
<span class="keyword">print</span>(result.title)    <span class="comment"># IDE ä¼šè‡ªåŠ¨è¡¥å…¨ï¼</span>
<span class="keyword">print</span>(result.rating)   <span class="comment"># ç±»å‹ï¼šfloat</span>
                    </code>
                </div>
            </div>

            <div class="feature-grid">
                <div class="feature-item" data-delay="0">
                    <div class="feature-icon">âœ…</div>
                    <h4>è‡ªåŠ¨éªŒè¯</h4>
                    <p>è¯„åˆ†è¶…å‡ºèŒƒå›´ï¼Ÿæ ¼å¼é”™è¯¯ï¼Ÿè‡ªåŠ¨æ•è·å¹¶æŠ¥å‘Š</p>
                </div>

                <div class="feature-item" data-delay="100">
                    <div class="feature-icon">ğŸ¯</div>
                    <h4>ç±»å‹æç¤º</h4>
                    <p>IDE è‡ªåŠ¨è¡¥å…¨ï¼Œé‡æ„æ›´å®‰å…¨</p>
                </div>

                <div class="feature-item" data-delay="200">
                    <div class="feature-icon">ğŸ“</div>
                    <h4>è‡ªåŠ¨æ–‡æ¡£</h4>
                    <p>Field æè¿°å¸®åŠ© LLM ç†è§£æ¯ä¸ªå­—æ®µ</p>
                </div>

                <div class="feature-item" data-delay="300">
                    <div class="feature-icon">ğŸ”’</div>
                    <h4>çº¦æŸæ£€æŸ¥</h4>
                    <p>geã€leã€regex ç­‰çº¦æŸè‡ªåŠ¨éªŒè¯</p>
                </div>
            </div>
        </div>

        <!-- åœºæ™¯ 5: ç»“æ„åŒ–è¾“å‡ºå¯è§†åŒ– -->
        <div class="scene" id="scene5">
            <h2 class="scene-title">ğŸ¬ ç»“æ„åŒ–è¾“å‡ºå¯è§†åŒ–æ¼”ç¤º</h2>

            <div class="canvas-container">
                <div style="text-align: center; margin-bottom: 30px;">
                    <h3 style="color: #a78bfa; font-size: 1.5em; margin-bottom: 20px;">
                        ç‚¹å‡»æŒ‰é’®ï¼ŒæŸ¥çœ‹ LLM è¾“å‡ºå¦‚ä½•è½¬æ¢ä¸ºç»“æ„åŒ–æ•°æ®
                    </h3>
                    <button class="demo-btn" onclick="runDemo1()">
                        ğŸ¬ æ¼”ç¤º 1: ç®€å•å¯¹è±¡
                    </button>
                    <button class="demo-btn" onclick="runDemo2()">
                        ğŸ¬ æ¼”ç¤º 2: åµŒå¥—å¯¹è±¡
                    </button>
                    <button class="demo-btn" onclick="runDemo3()">
                        ğŸ¬ æ¼”ç¤º 3: å¯¹è±¡åˆ—è¡¨
                    </button>
                </div>

                <div id="demo-output" style="display: grid; grid-template-columns: 1fr 1fr; gap: 30px; min-height: 300px;">
                    <div style="background: rgba(239, 68, 68, 0.1); border-radius: 12px; padding: 20px; border: 2px solid rgba(239, 68, 68, 0.3);">
                        <h4 style="color: #ef4444; margin-bottom: 15px;">ğŸ¤– LLM åŸå§‹è¾“å‡º</h4>
                        <div id="llm-output" style="font-family: 'JetBrains Mono', monospace; color: rgba(226, 232, 240, 0.8); font-size: 0.9em; line-height: 1.6;">
                            ç‚¹å‡»ä¸Šæ–¹æŒ‰é’®æŸ¥çœ‹æ¼”ç¤º...
                        </div>
                    </div>

                    <div style="background: rgba(34, 197, 94, 0.1); border-radius: 12px; padding: 20px; border: 2px solid rgba(34, 197, 94, 0.3);">
                        <h4 style="color: #22c55e; margin-bottom: 15px;">âœ… è§£æåçš„ç»“æ„åŒ–æ•°æ®</h4>
                        <div id="parsed-output" style="font-family: 'JetBrains Mono', monospace; color: rgba(226, 232, 240, 0.8); font-size: 0.9em; line-height: 1.6;">
                            ç­‰å¾…è§£æ...
                        </div>
                    </div>
                </div>
            </div>

            <div class="highlight-box">
                <h3>ğŸ¯ è§‚å¯Ÿé‡ç‚¹</h3>
                <p>
                    <strong>1. æ ¼å¼è½¬æ¢ï¼š</strong>è‡ªç”±æ–‡æœ¬ â†’ JSON å¯¹è±¡<br>
                    <strong>2. ç±»å‹å®‰å…¨ï¼š</strong>å­—ç¬¦ä¸²æ•°å­— â†’ æ•°å­—ç±»å‹<br>
                    <strong>3. ç»“æ„æå–ï¼š</strong>ä»æ–‡æœ¬ä¸­æå–åµŒå¥—ç»“æ„<br>
                    <strong>4. åˆ—è¡¨å¤„ç†ï¼š</strong>å°†æ–‡æœ¬ä¸­çš„åˆ—è¡¨é¡¹è½¬ä¸ºæ•°ç»„<br><br>
                    <strong>è¿™å°±æ˜¯è¾“å‡ºè§£æå™¨çš„é­”æ³•ï¼šè®©ä¸å¯é¢„æµ‹çš„ LLM è¾“å‡ºå˜å¾—å¯é¢„æµ‹ï¼</strong>
                </p>
            </div>

            <div class="code-card visible" data-delay="0">
                <div class="code-card-header">
                    <span>ğŸ’¡ å®é™…åº”ç”¨åœºæ™¯</span>
                </div>
                <div class="code-card-body">
                    <code>
<span class="comment"># åœºæ™¯ 1: ç”¨æˆ·æ³¨å†Œè¡¨å•</span>
user_info = parser.parse(<span class="string">"æˆ‘å«å¼ ä¸‰ï¼Œ28å²ï¼Œé‚®ç®±æ˜¯zhangsan@example.com"</span>)

<span class="comment"># åœºæ™¯ 2: äº§å“ä¿¡æ¯æå–</span>
product = parser.parse(<span class="string">"iPhone 15 Proï¼Œå”®ä»·9999å…ƒï¼Œåº“å­˜50å°"</span>)

<span class="comment"># åœºæ™¯ 3: ä¼šè®®çºªè¦ç»“æ„åŒ–</span>
meeting = parser.parse(<span class="string">"ä¼šè®®æ—¶é—´ï¼šä¸‹å‘¨ä¸‰3ç‚¹ï¼Œå‚ä¼šäººå‘˜ï¼šäº§å“ç»„ï¼Œè®®é¢˜ï¼šæ–°åŠŸèƒ½è®¾è®¡"</span>)

<span class="comment"># æ‰€æœ‰åœºæ™¯éƒ½è¿”å›ç±»å‹å®‰å…¨çš„å¯¹è±¡ï¼Œç›´æ¥å¯ä»¥ä½¿ç”¨ï¼</span>
                    </code>
                </div>
            </div>
        </div>

        <!-- åœºæ™¯ 6: æœ€ä½³å®è·µ -->
        <div class="scene" id="scene6">
            <h2 class="scene-title">ğŸ† è¾“å‡ºè§£æå™¨æœ€ä½³å®è·µ</h2>

            <div class="feature-grid">
                <div class="feature-item" data-delay="0">
                    <div class="feature-icon">1ï¸âƒ£</div>
                    <h4>è¯¦ç»†çš„ Field æè¿°</h4>
                    <p>æ¯ä¸ªå­—æ®µéƒ½è¦æœ‰æ¸…æ™°çš„ descriptionï¼Œå¸®åŠ© LLM ç†è§£</p>
                </div>

                <div class="feature-item" data-delay="100">
                    <div class="feature-icon">2ï¸âƒ£</div>
                    <h4>è®¾ç½®åˆç†çº¦æŸ</h4>
                    <p>ä½¿ç”¨ geã€leã€regex ç­‰é™åˆ¶èŒƒå›´ï¼Œå‡å°‘æ— æ•ˆè¾“å‡º</p>
                </div>

                <div class="feature-item" data-delay="200">
                    <div class="feature-icon">3ï¸âƒ£</div>
                    <h4>ä½ temperature</h4>
                    <p>ä½¿ç”¨ 0-0.3 çš„ temperatureï¼Œç¡®ä¿è¾“å‡ºæ ¼å¼ç¨³å®š</p>
                </div>

                <div class="feature-item" data-delay="300">
                    <div class="feature-icon">4ï¸âƒ£</div>
                    <h4>é”™è¯¯å¤„ç†</h4>
                    <p>æ€»æ˜¯ç”¨ try-exceptï¼Œå®ç°é‡è¯•æœºåˆ¶</p>
                </div>

                <div class="feature-item" data-delay="400">
                    <div class="feature-icon">5ï¸âƒ£</div>
                    <h4>ç¤ºä¾‹é©±åŠ¨</h4>
                    <p>åœ¨æç¤ºè¯ä¸­æä¾›ç¤ºä¾‹ï¼Œæé«˜å‡†ç¡®ç‡</p>
                </div>

                <div class="feature-item" data-delay="500">
                    <div class="feature-icon">6ï¸âƒ£</div>
                    <h4>æ¸è¿›å¼å¤æ‚åº¦</h4>
                    <p>å…ˆç®€å•åå¤æ‚ï¼Œé€æ­¥è¿­ä»£æ•°æ®æ¨¡å‹</p>
                </div>
            </div>

            <div class="code-card visible" data-delay="0">
                <div class="code-card-header">
                    <span>âœ… æœ€ä½³å®è·µç¤ºä¾‹</span>
                </div>
                <div class="code-card-body">
                    <code>
<span class="keyword">from</span> langchain.output_parsers <span class="keyword">import</span> PydanticOutputParser
<span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI

<span class="comment"># 1. è¯¦ç»†çš„ Field æè¿° âœ“</span>
<span class="keyword">class</span> <span class="function">Product</span>(BaseModel):
    name: <span class="keyword">str</span> = Field(description=<span class="string">"äº§å“å®Œæ•´åç§°"</span>)
    price: <span class="keyword">float</span> = Field(description=<span class="string">"ä»·æ ¼ï¼Œå•ä½ï¼šå…ƒ"</span>, ge=<span class="number">0</span>)

<span class="comment"># 2. ä½ temperature âœ“</span>
llm = ChatOpenAI(temperature=<span class="number">0</span>)

<span class="comment"># 3. é”™è¯¯å¤„ç†å’Œé‡è¯• âœ“</span>
<span class="keyword">def</span> <span class="function">safe_parse</span>(text, max_retries=<span class="number">3</span>):
    parser = PydanticOutputParser(pydantic_object=Product)
    chain = prompt | llm | parser

    <span class="keyword">for</span> i <span class="keyword">in</span> range(max_retries):
        <span class="keyword">try</span>:
            <span class="keyword">return</span> chain.invoke({<span class="string">"text"</span>: text})
        <span class="keyword">except</span> Exception <span class="keyword">as</span> e:
            <span class="keyword">if</span> i == max_retries - <span class="number">1</span>:
                <span class="keyword">raise</span> e
    <span class="keyword">return</span> <span class="keyword">None</span>

<span class="comment"># 4. ä½¿ç”¨ï¼</span>
result = safe_parse(product_description)
                    </code>
                </div>
            </div>

            <div class="highlight-box" style="background: rgba(34, 197, 94, 0.15); border-left-color: #22c55e;">
                <h3 style="color: #22c55e;">ğŸ‰ æ€»ç»“</h3>
                <p style="font-size: 1.1em; text-align: center;">
                    <strong>è¾“å‡ºè§£æå™¨æ˜¯è¿æ¥ LLM å’Œåº”ç”¨çš„æ¡¥æ¢</strong><br><br>
                    ğŸ¯ è®©ä¸å¯é¢„æµ‹å˜å¾—å¯é¢„æµ‹<br>
                    ğŸ”’ è®©è‡ªç”±æ–‡æœ¬å˜å¾—ç±»å‹å®‰å…¨<br>
                    âš¡ è®©æ‰‹å·¥è§£æå˜å¾—è‡ªåŠ¨åŒ–<br>
                    ğŸš€ è®©åŸå‹å¿«é€Ÿå˜ä¸ºç”Ÿäº§çº§ä»£ç <br><br>
                    <strong>æŒæ¡è¾“å‡ºè§£æå™¨ï¼Œä½ å°±æŒæ¡äº† LLM åº”ç”¨å¼€å‘çš„æ ¸å¿ƒæŠ€èƒ½ï¼</strong>
                </p>
            </div>
        </div>

        <!-- åœºæ™¯æŒ‡ç¤ºå™¨ -->
        <div class="scene-indicators">
            <div class="indicator active" data-scene="1"></div>
            <div class="indicator" data-scene="2"></div>
            <div class="indicator" data-scene="3"></div>
            <div class="indicator" data-scene="4"></div>
            <div class="indicator" data-scene="5"></div>
            <div class="indicator" data-scene="6"></div>
        </div>

        <!-- å¯¼èˆªæŒ‰é’® -->
        <div class="nav-buttons">
            <button class="nav-btn" id="prevBtn" disabled>
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                </svg>
                ä¸Šä¸€èŠ‚
            </button>
            <a href="index.html" class="nav-btn back-to-list">
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h7"/>
                </svg>
                è¯¾ç¨‹åˆ—è¡¨
            </a>
            <button class="nav-btn next" id="nextBtn">
                ä¸‹ä¸€èŠ‚
                <svg width="20" height="20" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                    <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        // åœºæ™¯æ•°æ®
        const totalScenes = 6;
        let currentScene = 1;

        // DOM å…ƒç´ 
        const progressBar = document.getElementById('progressBar');
        const prevBtn = document.getElementById('prevBtn');
        const nextBtn = document.getElementById('nextBtn');
        const indicators = document.querySelectorAll('.indicator');

        // æ¼”ç¤ºæ•°æ®
        const demos = {
            demo1: {
                llm: `è¿™éƒ¨ç”µå½±ã€Šç›—æ¢¦ç©ºé—´ã€‹éå¸¸ç²¾å½©ï¼Œæˆ‘ç»™å®ƒæ‰“9.5åˆ†ã€‚å®ƒæ˜¯ä¸€éƒ¨ç§‘å¹»æƒŠæ‚šç‰‡ï¼Œè®²è¿°äº†ä¸€ä¸ªå…³äºæ¢¦å¢ƒçš„æ•…äº‹ã€‚`,
                parsed: `{
  "title": "ç›—æ¢¦ç©ºé—´",
  "rating": 9.5,
  "genre": "ç§‘å¹»æƒŠæ‚š",
  "summary": "å…³äºæ¢¦å¢ƒçš„æ•…äº‹"
}`
            },
            demo2: {
                llm: `ç”¨æˆ·å¼ ä¸‰çš„ä¸ªäººä¿¡æ¯å¦‚ä¸‹ï¼š
- å¹´é¾„ï¼š28å²
- èŒä¸šï¼šè½¯ä»¶å·¥ç¨‹å¸ˆ
- æŠ€èƒ½ï¼šPythonã€JavaScriptã€Go
- è”ç³»æ–¹å¼ï¼š
  * é‚®ç®±ï¼šzhangsan@example.com
  * ç”µè¯ï¼š138-0000-0000`,
                parsed: `{
  "name": "å¼ ä¸‰",
  "age": 28,
  "occupation": "è½¯ä»¶å·¥ç¨‹å¸ˆ",
  "skills": ["Python", "JavaScript", "Go"],
  "contact": {
    "email": "zhangsan@example.com",
    "phone": "138-0000-0000"
  }
}`
            },
            demo3: {
                llm: `å›¢é˜Ÿæˆå‘˜åŒ…æ‹¬ï¼š
1. å¼ ä¸‰ - äº§å“ç»ç†ï¼Œè´Ÿè´£äº§å“è§„åˆ’
2. æå›› - å¼€å‘å·¥ç¨‹å¸ˆï¼Œè´Ÿè´£åç«¯å¼€å‘
3. ç‹äº” - UIè®¾è®¡å¸ˆï¼Œè´Ÿè´£ç•Œé¢è®¾è®¡`,
                parsed: `{
  "team": [
    {
      "name": "å¼ ä¸‰",
      "role": "äº§å“ç»ç†",
      "responsibility": "äº§å“è§„åˆ’"
    },
    {
      "name": "æå››",
      "role": "å¼€å‘å·¥ç¨‹å¸ˆ",
      "responsibility": "åç«¯å¼€å‘"
    },
    {
      "name": "ç‹äº”",
      "role": "UIè®¾è®¡å¸ˆ",
      "responsibility": "ç•Œé¢è®¾è®¡"
    }
  ]
}`
            }
        };

        // åˆå§‹åŒ–
        function init() {
            updateScene();
            setupEventListeners();
            animateSceneElements();
        }

        // è®¾ç½®äº‹ä»¶ç›‘å¬
        function setupEventListeners() {
            // å¯¼èˆªæŒ‰é’®
            prevBtn.addEventListener('click', () => {
                if (currentScene > 1) {
                    currentScene--;
                    updateScene();
                }
            });

            nextBtn.addEventListener('click', () => {
                if (currentScene < totalScenes) {
                    currentScene++;
                    updateScene();
                }
            });

            // æŒ‡ç¤ºå™¨
            indicators.forEach(indicator => {
                indicator.addEventListener('click', () => {
                    currentScene = parseInt(indicator.dataset.scene);
                    updateScene();
                });
            });

            // é”®ç›˜å¯¼èˆª
            document.addEventListener('keydown', (e) => {
                if (e.key === 'ArrowRight' && currentScene < totalScenes) {
                    currentScene++;
                    updateScene();
                } else if (e.key === 'ArrowLeft' && currentScene > 1) {
                    currentScene--;
                    updateScene();
                }
            });
        }

        // æ›´æ–°åœºæ™¯
        function updateScene() {
            // æ›´æ–°è¿›åº¦æ¡
            const progress = ((currentScene - 1) / (totalScenes - 1)) * 100;
            progressBar.style.width = progress + '%';

            // æ›´æ–°åœºæ™¯æ˜¾ç¤º
            document.querySelectorAll('.scene').forEach((scene, index) => {
                if (index + 1 === currentScene) {
                    scene.classList.add('active');
                } else {
                    scene.classList.remove('active');
                }
            });

            // æ›´æ–°æŒ‡ç¤ºå™¨
            indicators.forEach((indicator, index) => {
                if (index + 1 === currentScene) {
                    indicator.classList.add('active');
                } else {
                    indicator.classList.remove('active');
                }
            });

            // æ›´æ–°æŒ‰é’®çŠ¶æ€
            prevBtn.disabled = currentScene === 1;
            nextBtn.disabled = currentScene === totalScenes;

            // æ»šåŠ¨åˆ°é¡¶éƒ¨
            window.scrollTo({ top: 0, behavior: 'smooth' });

            // åŠ¨ç”»æ˜¾ç¤ºå…ƒç´ 
            setTimeout(() => {
                animateSceneElements();
            }, 300);
        }

        // åŠ¨ç”»æ˜¾ç¤ºåœºæ™¯å…ƒç´ 
        function animateSceneElements() {
            const currentSceneEl = document.querySelector(`#scene${currentScene}`);

            // æµç¨‹ç›’å­åŠ¨ç”»
            currentSceneEl.querySelectorAll('.flow-box').forEach((box, index) => {
                const delay = parseInt(box.dataset.delay) || index * 200;
                setTimeout(() => {
                    box.classList.add('visible');
                }, delay);
            });

            // æµç¨‹ç®­å¤´åŠ¨ç”»
            currentSceneEl.querySelectorAll('.flow-arrow').forEach((arrow, index) => {
                const delay = parseInt(arrow.dataset.delay) || index * 200;
                setTimeout(() => {
                    arrow.classList.add('visible');
                }, delay);
            });

            // ç‰¹æ€§ç½‘æ ¼åŠ¨ç”»
            currentSceneEl.querySelectorAll('.feature-item').forEach((item, index) => {
                const delay = parseInt(item.dataset.delay) || index * 100;
                setTimeout(() => {
                    item.classList.add('visible');
                }, delay);
            });

            // ä»£ç å¡ç‰‡åŠ¨ç”»
            currentSceneEl.querySelectorAll('.code-card').forEach((card, index) => {
                const delay = parseInt(card.dataset.delay) || index * 200;
                setTimeout(() => {
                    card.classList.add('visible');
                }, delay);
            });

            // è§£æå™¨ç±»å‹å¡ç‰‡åŠ¨ç”»
            currentSceneEl.querySelectorAll('.parser-type-card').forEach((card, index) => {
                const delay = parseInt(card.dataset.delay) || index * 100;
                setTimeout(() => {
                    card.classList.add('visible');
                }, delay);
            });

            // è§£ææ­¥éª¤åŠ¨ç”»
            currentSceneEl.querySelectorAll('.parse-step').forEach((step, index) => {
                const stepNum = parseInt(step.dataset.step);
                setTimeout(() => {
                    step.classList.add('visible');
                }, stepNum * 800);
            });
        }

        // è§£æè¿‡ç¨‹åŠ¨ç”»
        function runParseAnimation() {
            const steps = document.querySelectorAll('.parse-step');
            steps.forEach(step => {
                step.classList.remove('visible');
            });

            setTimeout(() => {
                steps.forEach((step, index) => {
                    const stepNum = parseInt(step.dataset.step);
                    setTimeout(() => {
                        step.classList.add('visible');
                    }, stepNum * 1000);
                });
            }, 300);
        }

        // æ¼”ç¤º 1: ç®€å•å¯¹è±¡
        function runDemo1() {
            const llmOutput = document.getElementById('llm-output');
            const parsedOutput = document.getElementById('parsed-output');

            // é‡ç½®
            llmOutput.textContent = '';
            parsedOutput.textContent = 'ç­‰å¾…è§£æ...';

            // åŠ¨ç”»æ˜¾ç¤º LLM è¾“å‡º
            let i = 0;
            const text = demos.demo1.llm;
            const typeWriter = () => {
                if (i < text.length) {
                    llmOutput.textContent += text.charAt(i);
                    i++;
                    setTimeout(typeWriter, 30);
                } else {
                    // æ˜¾ç¤ºè§£æç»“æœ
                    setTimeout(() => {
                        parsedOutput.innerHTML = syntaxHighlight(demos.demo1.parsed);
                    }, 500);
                }
            };
            typeWriter();
        }

        // æ¼”ç¤º 2: åµŒå¥—å¯¹è±¡
        function runDemo2() {
            const llmOutput = document.getElementById('llm-output');
            const parsedOutput = document.getElementById('parsed-output');

            llmOutput.textContent = '';
            parsedOutput.textContent = 'ç­‰å¾…è§£æ...';

            let i = 0;
            const text = demos.demo2.llm;
            const typeWriter = () => {
                if (i < text.length) {
                    llmOutput.textContent += text.charAt(i);
                    i++;
                    setTimeout(typeWriter, 20);
                } else {
                    setTimeout(() => {
                        parsedOutput.innerHTML = syntaxHighlight(demos.demo2.parsed);
                    }, 500);
                }
            };
            typeWriter();
        }

        // æ¼”ç¤º 3: å¯¹è±¡åˆ—è¡¨
        function runDemo3() {
            const llmOutput = document.getElementById('llm-output');
            const parsedOutput = document.getElementById('parsed-output');

            llmOutput.textContent = '';
            parsedOutput.textContent = 'ç­‰å¾…è§£æ...';

            let i = 0;
            const text = demos.demo3.llm;
            const typeWriter = () => {
                if (i < text.length) {
                    llmOutput.textContent += text.charAt(i);
                    i++;
                    setTimeout(typeWriter, 20);
                } else {
                    setTimeout(() => {
                        parsedOutput.innerHTML = syntaxHighlight(demos.demo3.parsed);
                    }, 500);
                }
            };
            typeWriter();
        }

        // JSON è¯­æ³•é«˜äº®
        function syntaxHighlight(json) {
            json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');
            return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {
                let cls = 'json-number';
                if (/^"/.test(match)) {
                    if (/:$/.test(match)) {
                        cls = 'json-key';
                    } else {
                        cls = 'json-string';
                    }
                } else if (/true|false/.test(match)) {
                    cls = 'json-boolean';
                } else if (/null/.test(match)) {
                    cls = 'json-boolean';
                }
                return '<span class="' + cls + '">' + match + '</span>';
            });
        }

        // å¯åŠ¨
        init();
    </script>
</body>
</html>
