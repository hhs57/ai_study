<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å—23: å›¾æ•°æ®å»ºæ¨¡åŸåˆ™ - çŸ¥è¯†å›¾è°±å­¦ä¹ å¹³å°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                },
            },
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
            animation: float 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(34, 197, 94, 0.3) 0%, rgba(59, 130, 246, 0.1) 50%, transparent 70%);
            top: -200px;
            right: -200px;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.2) 0%, rgba(236, 72, 153, 0.1) 50%, transparent 70%);
            bottom: -150px;
            left: -150px;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(30px, -30px) scale(1.1); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        .nav-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            font-size: 2.5em;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #4ade80 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subsection-title {
            font-size: 1.8em;
            margin: 30px 0 20px 0;
            color: #60a5fa;
        }

        .concept-card {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .highlight-box {
            background: rgba(34, 197, 94, 0.1);
            border-left: 4px solid #22c55e;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .animation-container {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .animation-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #60a5fa;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .animation-canvas {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 0.9em;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .info-panel {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin: 15px 0;
            overflow-x: auto;
        }

        .code-block code {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.9em;
            line-height: 1.6;
            color: #e2e8f0;
        }

        .keyword { color: #f472b6; }
        .string { color: #a5f3fc; }
        .comment { color: #94a3b8; }
        .function { color: #fbbf24; }

        @media (max-width: 768px) {
            .section-title {
                font-size: 2em;
            }
            .glass-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Background orbs -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div class="container">
        <!-- Navigation -->
        <div class="nav-card">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <a href="index.html" class="text-green-400 hover:text-green-300 transition-colors flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    è¿”å›è¯¾ç¨‹ç›®å½•
                </a>
                <div class="flex items-center gap-4">
                <a href="22-knowledge-representation.html" class="text-gray-400 hover:text-white transition-colors flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    ä¸Šä¸€æ¨¡å—
                </a>
                <a href="24-rdf-basics.html" class="text-gray-400 hover:text-white transition-colors flex items-center gap-2">
                    ä¸‹ä¸€æ¨¡å—
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
                </div>
                <div class="text-gray-400 text-sm">æ¨¡å— 23 / 33</div>
            </div>
        </div>

        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-5xl md:text-6xl font-bold mb-6" style="background: linear-gradient(135deg, #4ade80 0%, #3b82f6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                æ¨¡å— 23: å›¾æ•°æ®å»ºæ¨¡åŸåˆ™
            </h1>
            <p class="text-xl text-gray-400 mb-8">æŒæ¡å¦‚ä½•å°†ç°å®ä¸–ç•Œçš„é—®é¢˜è½¬åŒ–ä¸ºå›¾æ•°æ®æ¨¡å‹</p>
            <div class="flex flex-wrap gap-4 justify-center text-sm">
                <span class="px-4 py-2 bg-yellow-500/20 text-yellow-400 rounded-full border border-yellow-500/30">è¿›é˜¶çº§åˆ«</span>
                <span class="px-4 py-2 bg-blue-500/20 text-blue-400 rounded-full border border-blue-500/30">~50 åˆ†é’Ÿ</span>
                <span class="px-4 py-2 bg-purple-500/20 text-purple-400 rounded-full border border-purple-500/30">2 ä¸ªäº¤äº’åŠ¨ç”»</span>
            </div>
        </div>

        <!-- Chapter 1: ä»€ä¹ˆæ˜¯å›¾æ•°æ®å»ºæ¨¡ -->
        <div class="glass-card">
            <h2 class="section-title">1. ä»€ä¹ˆæ˜¯å›¾æ•°æ®å»ºæ¨¡?</h2>

            <div class="concept-card">
                <h3 class="text-xl font-bold text-blue-300 mb-3">å®šä¹‰</h3>
                <p class="text-gray-300 leading-relaxed text-lg">
                    <strong>å›¾æ•°æ®å»ºæ¨¡</strong>æ˜¯å°†ç°å®ä¸–ç•Œçš„é—®é¢˜å’Œå…³ç³»è½¬æ¢ä¸º<strong>å›¾ç»“æ„</strong>çš„è¿‡ç¨‹ã€‚
                </p>
                <p class="text-gray-400 mt-3">
                    å®ƒå†³å®šäº†å¦‚ä½•å°†å®ä½“è¡¨ç¤ºä¸ºèŠ‚ç‚¹ã€å…³ç³»è¡¨ç¤ºä¸ºè¾¹ã€ä»¥åŠå¦‚ä½•ç»„ç»‡å±æ€§ã€‚å¥½çš„å›¾å»ºæ¨¡èƒ½è®©æŸ¥è¯¢æ›´é«˜æ•ˆã€æ•°æ®æ›´æ˜“äºç»´æŠ¤ã€‚
                </p>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">å›¾å»ºæ¨¡çš„æ ¸å¿ƒä»»åŠ¡</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="text-2xl mb-2">ğŸ”µ</div>
                        <div class="font-bold text-blue-400 mb-2">ç¡®å®šèŠ‚ç‚¹ç±»å‹</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ è¯†åˆ«å®ä½“ç±»å‹(ç”¨æˆ·ã€å•†å“ã€è®¢å•...)</li>
                            <li>â€¢ ä¸ºæ¯ç§ç±»å‹å®šä¹‰æ ‡ç­¾</li>
                            <li>â€¢ è®¾è®¡èŠ‚ç‚¹çš„å±æ€§ç»“æ„</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="text-2xl mb-2">ğŸ”—</div>
                        <div class="font-bold text-green-400 mb-2">ç¡®å®šå…³ç³»ç±»å‹</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ è¯†åˆ«å®ä½“é—´çš„å…³è”</li>
                            <li>â€¢ å®šä¹‰å…³ç³»çš„æ–¹å‘å’Œç±»å‹</li>
                            <li>â€¢ è®¾è®¡å…³ç³»çš„å±æ€§</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning-box mt-6">
                <h3 class="text-xl font-bold text-red-300 mb-3">âš ï¸ ä¸ºä»€ä¹ˆå›¾å»ºæ¨¡å¾ˆé‡è¦?</h3>
                <ul class="text-gray-300 space-y-2">
                    <li>â€¢ <strong>æ€§èƒ½å½±å“</strong>: å¥½çš„å»ºæ¨¡èƒ½è®©æŸ¥è¯¢å¿«10-100å€</li>
                    <li>â€¢ <strong>å¯æ‰©å±•æ€§</strong>: å¥½çš„å»ºæ¨¡ä¾¿äºåç»­æ‰©å±•</li>
                    <li>â€¢ <strong>ç»´æŠ¤æˆæœ¬</strong>: ç³Ÿç³•çš„å»ºæ¨¡ä¼šå¯¼è‡´æ•°æ®å†—ä½™å’Œæ›´æ–°å¼‚å¸¸</li>
                    <li>â€¢ <strong>æŸ¥è¯¢å¤æ‚åº¦</strong>: å»ºæ¨¡ä¸å½“ä¼šå¯¼è‡´æŸ¥è¯¢å˜å¾—æå…¶å¤æ‚</li>
                </ul>
            </div>
        </div>

        <!-- Chapter 2: å›¾å»ºæ¨¡çš„åŸºæœ¬åŸåˆ™ -->
        <div class="glass-card">
            <h2 class="section-title">2. å›¾å»ºæ¨¡çš„åŸºæœ¬åŸåˆ™</h2>

            <div class="concept-card">
                <h3 class="text-xl font-bold text-blue-300 mb-3">åŸåˆ™1: ä¿æŒç®€æ´ (Keep It Simple)</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    ä¸è¦è¿‡åº¦å»ºæ¨¡ã€‚åªåœ¨å¿…è¦æ—¶å¼•å…¥èŠ‚ç‚¹å’Œå…³ç³»ã€‚
                </p>
                <div class="bg-black/30 p-4 rounded-lg">
                    <div class="text-sm text-gray-400 mb-2">âŒ è¿‡åº¦å»ºæ¨¡:</div>
                    <div class="text-gray-300">ç”¨æˆ· â†’ æ€§åˆ« â†’ æ€§åˆ«ç±»å‹</div>
                    <div class="text-sm text-gray-400 mt-3 mb-2">âœ… åˆç†å»ºæ¨¡:</div>
                    <div class="text-gray-300">ç”¨æˆ· (å±æ€§: gender)</div>
                </div>
            </div>

            <div class="concept-card mt-4">
                <h3 class="text-xl font-bold text-blue-300 mb-3">åŸåˆ™2: é¿å…å†—ä½™ (Avoid Redundancy)</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    ä¸è¦å­˜å‚¨å¯æ¨å¯¼çš„ä¿¡æ¯ã€‚å¦‚æœAâ†’Bâ†’C,å°±ä¸éœ€è¦å­˜å‚¨Aâ†’C(é™¤ééœ€è¦æ€§èƒ½ä¼˜åŒ–)ã€‚
                </p>
                <div class="bg-black/30 p-4 rounded-lg">
                    <div class="text-sm text-gray-400 mb-2">âŒ å†—ä½™å­˜å‚¨:</div>
                    <div class="text-gray-300">å¼ ä¸‰ â†’ çˆ¶äº² â†’ æå››</div>
                    <div class="text-gray-300">å¼ ä¸‰ â†’ ç¥–çˆ¶ â†’ ç‹äº” (å¯é€šè¿‡æå››æ¨å¯¼)</div>
                    <div class="text-sm text-gray-400 mt-3 mb-2">âœ… éå†—ä½™:</div>
                    <div class="text-gray-300">å¼ ä¸‰ â†’ çˆ¶äº² â†’ æå››</div>
                    <div class="text-gray-300">æå›› â†’ çˆ¶äº² â†’ ç‹äº”</div>
                </div>
            </div>

            <div class="concept-card mt-4">
                <h3 class="text-xl font-bold text-blue-300 mb-3">åŸåˆ™3: ä½¿ç”¨å¯†é›†èŠ‚ç‚¹ (Use Dense Nodes)</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    å¯¹äºé«˜åŸºæ•°çš„å±æ€§å€¼,è€ƒè™‘å°†å…¶è½¬æ¢ä¸ºèŠ‚ç‚¹è€Œä¸æ˜¯å±æ€§ã€‚
                </p>
                <div class="bg-black/30 p-4 rounded-lg">
                    <div class="text-sm text-gray-400 mb-2">âŒ ä½¿ç”¨å±æ€§:</div>
                    <div class="text-gray-300">ç”¨æˆ· (å±æ€§: country="ä¸­å›½")</div>
                    <div class="text-gray-300">ç”¨æˆ· (å±æ€§: country="ç¾å›½")</div>
                    <div class="text-sm text-gray-400 mt-3 mb-2">âœ… ä½¿ç”¨èŠ‚ç‚¹:</div>
                    <div class="text-gray-300">ç”¨æˆ· â†’ LOCATED_IN â†’ å›½å®¶èŠ‚ç‚¹</div>
                </div>
            </div>

            <div class="concept-card mt-4">
                <h3 class="text-xl font-bold text-blue-300 mb-3">åŸåˆ™4: æ—¶é—´å»ºæ¨¡ (Time Modeling)</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    å¯¹äºæœ‰æ—¶é—´ç»´åº¦çš„å…³ç³»,è€ƒè™‘ä½¿ç”¨æ—¶é—´æˆ³æˆ–æ—¶é—´èŠ‚ç‚¹ã€‚
                </p>
                <div class="bg-black/30 p-4 rounded-lg">
                    <div class="text-sm text-gray-400 mb-2">æ–¹æ¡ˆ1: å…³ç³»å±æ€§</div>
                    <div class="text-gray-300">ç”¨æˆ· â†’ WORKS_AT {since: 2020} â†’ å…¬å¸</div>
                    <div class="text-sm text-gray-400 mt-3 mb-2">æ–¹æ¡ˆ2: æ—¶é—´èŠ‚ç‚¹</div>
                    <div class="text-gray-300">ç”¨æˆ· â†’ WORKS_AT â†’ èŒä½ â†’ AT_YEAR â†’ 2020</div>
                </div>
            </div>

            <div class="highlight-box mt-6">
                <h3 class="text-xl font-bold text-green-300 mb-3">ğŸ“‹ å»ºæ¨¡å†³ç­–æ£€æŸ¥æ¸…å•</h3>
                <ul class="text-gray-300 space-y-2">
                    <li>âœ… è¿™ä¸ªèŠ‚ç‚¹/å…³ç³»æ˜¯å¦å¿…è¦?</li>
                    <li>âœ… æ˜¯å¦æœ‰æ›´ç®€å•çš„å»ºæ¨¡æ–¹å¼?</li>
                    <li>âœ… æŸ¥è¯¢è·¯å¾„æ˜¯å¦æ¸…æ™°?</li>
                    <li>âœ… æ˜¯å¦ä¼šå¯¼è‡´æ•°æ®å†—ä½™?</li>
                    <li>âœ… æœªæ¥æ˜¯å¦æ˜“äºæ‰©å±•?</li>
                </ul>
            </div>
        </div>

        <!-- Chapter 3: åŠ¨ç”» - ä»ERå›¾åˆ°å›¾æ¨¡å‹ -->
        <div class="glass-card">
            <h2 class="section-title">3. åŠ¨ç”»æ¼”ç¤º: ä»ERå›¾åˆ°å›¾æ¨¡å‹</h2>

            <p class="text-gray-300 mb-4">
                é€šè¿‡è¿™ä¸ªåŠ¨ç”»,æˆ‘ä»¬å°†çœ‹åˆ°å¦‚ä½•å°†ä¼ ç»Ÿçš„å…³ç³»å‹æ•°æ®åº“ERå›¾è½¬æ¢ä¸ºå›¾æ•°æ®æ¨¡å‹ã€‚
            </p>

            <div class="animation-container">
                <div class="animation-title">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"/>
                    </svg>
                    åŠ¨ç”»: ERå›¾åˆ°å›¾æ¨¡å‹çš„è½¬æ¢
                </div>
                <div id="er-animation" class="animation-canvas" style="min-height: 500px;"></div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="playERAnimation()">â–¶ æ’­æ”¾è½¬æ¢</button>
                    <button class="btn btn-secondary" onclick="resetERAnimation()">â†º é‡ç½®</button>
                    <button class="btn btn-secondary" onclick="toggleView()">ğŸ”„ åˆ‡æ¢è§†å›¾</button>
                </div>
                <div class="info-panel">
                    <div class="text-yellow-400 font-bold mb-2">è½¬æ¢è¯´æ˜:</div>
                    <div id="er-description" class="text-gray-300">
                        ç‚¹å‡»"æ’­æ”¾è½¬æ¢"æŸ¥çœ‹ERå›¾å¦‚ä½•é€æ­¥è½¬æ¢ä¸ºå›¾æ•°æ®æ¨¡å‹
                    </div>
                </div>
            </div>

            <div class="highlight-box mt-6">
                <h3 class="text-xl font-bold text-green-300 mb-3">è½¬æ¢å¯¹åº”å…³ç³»</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-blue-400 mb-2">ERå›¾å…ƒç´ </div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ å®ä½“ (Entity)</li>
                            <li>â€¢ å±æ€§ (Attribute)</li>
                            <li>â€¢ å…³ç³» (Relationship)</li>
                            <li>â€¢ å¤–é”® (Foreign Key)</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-green-400 mb-2">å›¾æ¨¡å‹å…ƒç´ </div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â†’ èŠ‚ç‚¹ (Node)</li>
                            <li>â†’ èŠ‚ç‚¹å±æ€§ (Properties)</li>
                            <li>â†’ è¾¹ (Edge/Relationship)</li>
                            <li>â†’ è¾¹ (æ— éœ€å¤–é”®)</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chapter 4: å¸¸è§å»ºæ¨¡æ¨¡å¼ -->
        <div class="glass-card">
            <h2 class="section-title">4. å¸¸è§å»ºæ¨¡æ¨¡å¼</h2>

            <div class="concept-card">
                <h3 class="text-xl font-bold text-blue-300 mb-3">æ¨¡å¼1: æ—¶é—´æ ‘ (Time Tree)</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    å°†æ—¶é—´è¡¨ç¤ºä¸ºå±‚çº§èŠ‚ç‚¹:å¹´â†’æœˆâ†’æ—¥â†’å°æ—¶
                </p>
                <div class="code-block">
<code><span class="comment">// æ—¶é—´æ ‘ç»“æ„ç¤ºä¾‹</span>
2024
  â””â”€â”€ 2024-01
        â””â”€â”€ 2024-01-15
              â””â”€â”€ 2024-01-15T14:30

<span class="comment">// ä½¿ç”¨æ–¹å¼</span>
Event â†’ ON_DATE â†’ 2024-01-15</code>
                </div>
                <div class="text-sm text-gray-400 mt-3">
                    <strong>ä¼˜ç‚¹:</strong> ä¾¿äºæ—¶é—´èŒƒå›´æŸ¥è¯¢ã€èšåˆåˆ†æ<br>
                    <strong>ç¼ºç‚¹:</strong> èŠ‚ç‚¹æ•°é‡å¤š
                </div>
            </div>

            <div class="concept-card mt-4">
                <h3 class="text-xl font-bold text-blue-300 mb-3">æ¨¡å¼2: å±‚æ¬¡ç»“æ„ (Hierarchy)</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    ä½¿ç”¨è‡ªå¼•ç”¨å…³ç³»è¡¨ç¤ºæ ‘å½¢ç»“æ„
                </p>
                <div class="code-block">
<code><span class="comment">// ç»„ç»‡æ¶æ„ç¤ºä¾‹</span>
CEO â†’ MANAGES â†’ CTO
CTO â†’ MANAGES â†’ Tech Lead
Tech Lead â†’ MANAGES â†’ Developer

<span class="comment">// æŸ¥è¯¢: æŸ¥æ‰¾CEOçš„æ‰€æœ‰ä¸‹å±</span>
MATCH (ceo:Person {name: "CEO"})-[:MANAGES*]->(subordinate)
RETURN subordinate</code>
                </div>
            </div>

            <div class="concept-card mt-4">
                <h3 class="text-xl font-bold text-blue-300 mb-3">æ¨¡å¼3: å¤šå¯¹å¤šå…³ç³» (Many-to-Many)</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    å›¾æ¨¡å‹å¤©ç„¶æ”¯æŒå¤šå¯¹å¤š,æ— éœ€ä¸­é—´è¡¨
                </p>
                <div class="code-block">
<code><span class="comment">// å­¦ç”Ÿå’Œè¯¾ç¨‹å…³ç³»</span>
å­¦ç”Ÿ1 â†’ ENROLLED_IN â†’ è¯¾ç¨‹A
å­¦ç”Ÿ1 â†’ ENROLLED_IN â†’ è¯¾ç¨‹B
å­¦ç”Ÿ2 â†’ ENROLLED_IN â†’ è¯¾ç¨‹A

<span class="comment">// å¯ç›´æ¥æŸ¥è¯¢,æ— éœ€å…³è”è¡¨</span>
MATCH (s:Student)-[:ENROLLED_IN]->(c:Course)
RETURN s.name, c.name</code>
                </div>
            </div>

            <div class="concept-card mt-4">
                <h3 class="text-xl font-bold text-blue-300 mb-3">æ¨¡å¼4: æƒé‡è¾¹ (Weighted Relationships)</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    åœ¨è¾¹ä¸Šå­˜å‚¨æƒé‡ã€åˆ†æ•°ç­‰å±æ€§
                </p>
                <div class="code-block">
<code><span class="comment">ç¤¾äº¤ç½‘ç»œå…³ç³»å¼ºåº¦</span>
ç”¨æˆ·A â†’ KNOWS {strength: 0.8, since: 2020} â†’ ç”¨æˆ·B
ç”¨æˆ·A â†’ KNOWS {strength: 0.3, since: 2023} â†’ ç”¨æˆ·C

<span class="comment">// æŸ¥è¯¢: æ‰¾å¼ºå…³ç³»</span>
MATCH (a:Person)-[k:KNOWS]->(b:Person)
WHERE k.strength > 0.5
RETURN a, b, k.strength</code>
                </div>
            </div>
        </div>

        <!-- Chapter 5: Property Graph vs RDF Graphå»ºæ¨¡ -->
        <div class="glass-card">
            <h2 class="section-title">5. Property Graph vs RDF Graph å»ºæ¨¡å·®å¼‚</h2>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">æ ¸å¿ƒåŒºåˆ«</h3>
                <table class="w-full text-sm">
                    <thead>
                        <tr class="border-b border-gray-600">
                            <th class="text-left py-3 px-4 text-blue-400">ç‰¹æ€§</th>
                            <th class="text-left py-3 px-4 text-green-400">Property Graph (LPG)</th>
                            <th class="text-left py-3 px-4 text-purple-400">RDF Graph</th>
                        </tr>
                    </thead>
                    <tbody class="text-gray-300">
                        <tr class="border-b border-gray-700">
                            <td class="py-3 px-4">èŠ‚ç‚¹æ ‡è¯†</td>
                            <td class="py-3 px-4">å†…éƒ¨ID</td>
                            <td class="py-3 px-4">URI/IRI</td>
                        </tr>
                        <tr class="border-b border-gray-700">
                            <td class="py-3 px-4">å±æ€§</td>
                            <td class="py-3 px-4">èŠ‚ç‚¹å’Œè¾¹çš„å±æ€§</td>
                            <td class="py-3 px-4">ä»…èŠ‚ç‚¹æœ‰å±æ€§</td>
                        </tr>
                        <tr class="border-b border-gray-700">
                            <td class="py-3 px-4">Schema</td>
                            <td class="py-3 px-4">å¯é€‰,çµæ´»</td>
                            <td class="py-3 px-4">æœ¬ä½“(RDFS/OWL)</td>
                        </tr>
                        <tr class="border-b border-gray-700">
                            <td class="py-3 px-4">æ•°æ®ç±»å‹</td>
                            <td class="py-3 px-4">ä»»æ„ç±»å‹</td>
                            <td class="py-3 px-4">éœ€è¦æ˜¾å¼ç±»å‹</td>
                        </tr>
                        <tr>
                            <td class="py-3 px-4">æŸ¥è¯¢è¯­è¨€</td>
                            <td class="py-3 px-4">Cypher, Gremlin</td>
                            <td class="py-3 px-4">SPARQL</td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <div class="concept-card mt-6">
                <h3 class="text-xl font-bold text-blue-300 mb-3">Property Graphå»ºæ¨¡ç¤ºä¾‹ (Neo4j)</h3>
                <div class="code-block">
<code><span class="comment">// åˆ›å»ºèŠ‚ç‚¹å’Œå…³ç³»</span>
CREATE (e:Person {
  name: "åŸƒéš†Â·é©¬æ–¯å…‹",
  birthDate: "1971-06-28",
  nationality: "ç¾å›½"
})
CREATE (t:Company {
  name: "ç‰¹æ–¯æ‹‰",
  founded: "2003",
  industry: "ç”µåŠ¨æ±½è½¦"
})
CREATE (e)-[:CEO_OF {
  since: "2008"
}]->(t)</code>
                </div>
            </div>

            <div class="concept-card mt-4">
                <h3 class="text-xl font-bold text-blue-300 mb-3">RDF Graphå»ºæ¨¡ç¤ºä¾‹</h3>
                <div class="code-block">
<code><span class="comment"># Turtleæ ¼å¼</span>
@prefix ex: <http://example.org/> .
@prefix rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

ex:elon rdf:type ex:Person ;
    ex:name "åŸƒéš†Â·é©¬æ–¯å…‹" ;
    ex:birthDate "1971-06-28"^^xsd:date ;
    ex:nationality "ç¾å›½" ;
    ex:ceoOf ex:tesla .

ex:tesla rdf:type ex:Company ;
    ex:name "ç‰¹æ–¯æ‹‰" ;
    ex:founded "2003"^^xsd:gYear ;
    ex:industry "ç”µåŠ¨æ±½è½¦" .</code>
                </div>
            </div>

            <div class="highlight-box mt-6">
                <h3 class="text-xl font-bold text-green-300 mb-3">å¦‚ä½•é€‰æ‹©?</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-green-500">
                        <div class="font-bold text-green-400 mb-2">é€‰æ‹©Property Graphå¦‚æœ:</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ éœ€è¦çµæ´»çš„Schema</li>
                            <li>â€¢ åº”ç”¨å¯¼å‘(å¦‚ç¤¾äº¤ç½‘ç»œ)</li>
                            <li>â€¢ éœ€è¦é«˜æ€§èƒ½æŸ¥è¯¢</li>
                            <li>â€¢ å›¢é˜Ÿç†Ÿæ‚‰å›¾æ•°æ®åº“</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-purple-500">
                        <div class="font-bold text-purple-400 mb-2">é€‰æ‹©RDF Graphå¦‚æœ:</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ éœ€è¦æ•°æ®äº’æ“ä½œæ€§</li>
                            <li>â€¢ éµå¾ªè¯­ä¹‰ç½‘æ ‡å‡†</li>
                            <li>â€¢ éœ€è¦å¤æ‚çš„æ¨ç†</li>
                            <li>â€¢ ä¸å¼€æ”¾æ•°æ®é›†æˆ</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chapter 6: åŠ¨ç”» - ç”µå•†é¢†åŸŸå»ºæ¨¡æ¡ˆä¾‹ -->
        <div class="glass-card">
            <h2 class="section-title">6. æ¡ˆä¾‹æ¼”ç¤º: ç”µå•†çŸ¥è¯†å›¾è°±å»ºæ¨¡</h2>

            <p class="text-gray-300 mb-4">
                é€šè¿‡ç”µå•†é¢†åŸŸçš„å®é™…æ¡ˆä¾‹,å­¦ä¹ å¦‚ä½•è®¾è®¡ä¸€ä¸ªå®Œæ•´çš„å›¾æ•°æ®æ¨¡å‹ã€‚
            </p>

            <div class="animation-container">
                <div class="animation-title">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M16 11V7a4 4 0 00-8 0v4M5 9h14l1 12H4L5 9z"/>
                    </svg>
                    åŠ¨ç”»: ç”µå•†çŸ¥è¯†å›¾è°±æ„å»º
                </div>
                <div id="ecommerce-animation" class="animation-canvas" style="min-height: 500px;"></div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="playEcommerceAnimation()">â–¶ æ’­æ”¾æ„å»º</button>
                    <button class="btn btn-secondary" onclick="resetEcommerceAnimation()">â†º é‡ç½®</button>
                    <button class="btn btn-secondary" onclick="addEntity()">+ æ·»åŠ å®ä½“</button>
                </div>
                <div class="info-panel">
                    <div class="text-yellow-400 font-bold mb-2">å½“å‰å›¾è°±:</div>
                    <div id="ecommerce-stats" class="text-gray-300">
                        ç‚¹å‡»"æ’­æ”¾æ„å»º"å¼€å§‹æ¼”ç¤ºç”µå•†çŸ¥è¯†å›¾è°±çš„å»ºæ¨¡è¿‡ç¨‹
                    </div>
                </div>
            </div>

            <div class="highlight-box mt-6">
                <h3 class="text-xl font-bold text-green-300 mb-3">ç”µå•†çŸ¥è¯†å›¾è°±æ¨¡å‹è®¾è®¡</h3>
                <div class="space-y-4">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-blue-400 mb-2">ğŸ‘¤ èŠ‚ç‚¹ç±»å‹</div>
                        <div class="grid md:grid-cols-3 gap-3 text-sm">
                            <div class="text-gray-300">â€¢ User (ç”¨æˆ·)</div>
                            <div class="text-gray-300">â€¢ Product (å•†å“)</div>
                            <div class="text-gray-300">â€¢ Category (åˆ†ç±»)</div>
                            <div class="text-gray-300">â€¢ Order (è®¢å•)</div>
                            <div class="text-gray-300">â€¢ Review (è¯„ä»·)</div>
                            <div class="text-gray-300">â€¢ Brand (å“ç‰Œ)</div>
                        </div>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-green-400 mb-2">ğŸ”— å…³ç³»ç±»å‹</div>
                        <div class="grid md:grid-cols-2 gap-3 text-sm">
                            <div class="text-gray-300">â€¢ BOUGHT (ç”¨æˆ·è´­ä¹°å•†å“)</div>
                            <div class="text-gray-300">â€¢ REVIEWED (ç”¨æˆ·è¯„ä»·å•†å“)</div>
                            <div class="text-gray-300">â€¢ BELONGS_TO (å•†å“å±äºåˆ†ç±»)</div>
                            <div class="text-gray-300">â€¢ CONTAINS (è®¢å•åŒ…å«å•†å“)</div>
                            <div class="text-gray-300">â€¢ PRODUCED_BY (å•†å“ç”±å“ç‰Œç”Ÿäº§)</div>
                            <div class="text-gray-300">â€¢ SIMILAR_TO (ç›¸ä¼¼å•†å“)</div>
                        </div>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-yellow-400 mb-2">ğŸ’¡ å…¸å‹æŸ¥è¯¢åœºæ™¯</div>
                        <ul class="text-gray-300 text-sm space-y-2">
                            <li>â€¢ <strong>ä¸ªæ€§åŒ–æ¨è</strong>: æ‰¾ä¸ç”¨æˆ·è´­ä¹°è¿‡çš„å•†å“ç›¸ä¼¼çš„å…¶ä»–å•†å“</li>
                            <li>â€¢ <strong>å…³è”é”€å”®</strong>: è´­ä¹°å•†å“Açš„ç”¨æˆ·è¿˜è´­ä¹°äº†å•†å“B</li>
                            <li>â€¢ <strong>ç”¨æˆ·ç”»åƒ</strong>: åŸºäºè´­ä¹°è¡Œä¸ºåˆ†æç”¨æˆ·åå¥½</li>
                            <li>â€¢ <strong>çƒ­é—¨å•†å“</strong>: ç»Ÿè®¡è´­ä¹°æ¬¡æ•°æœ€å¤šçš„å•†å“</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chapter 7: å»ºæ¨¡æœ€ä½³å®è·µ -->
        <div class="glass-card">
            <h2 class="section-title">7. å›¾å»ºæ¨¡æœ€ä½³å®è·µ</h2>

            <div class="concept-card">
                <h3 class="text-xl font-bold text-blue-300 mb-3">âœ… DO - æ¨èåšæ³•</h3>
                <ul class="text-gray-300 space-y-3">
                    <li><strong>1. ä»æŸ¥è¯¢å‡ºå‘è®¾è®¡</strong>
                        <div class="text-sm text-gray-400 mt-1">å…ˆè€ƒè™‘è¦æŸ¥è¯¢ä»€ä¹ˆ,å†è®¾è®¡å›¾ç»“æ„</div>
                    </li>
                    <li><strong>2. ä½¿ç”¨æœ‰æ„ä¹‰çš„æ ‡ç­¾</strong>
                        <div class="text-sm text-gray-400 mt-1">æ ‡ç­¾åè¦èƒ½æ¸…æ™°è¡¨è¾¾å®ä½“çš„ç±»å‹</div>
                    </li>
                    <li><strong>3. å»ºç«‹ç´¢å¼•</strong>
                        <div class="text-sm text-gray-400 mt-1">ä¸ºå¸¸ç”¨æŸ¥è¯¢çš„å±æ€§å»ºç«‹ç´¢å¼•</div>
                    </li>
                    <li><strong>4. æ§åˆ¶èŠ‚ç‚¹åº¦æ•°</strong>
                        <div class="text-sm text-gray-400 mt-1">é¿å…è¶…çº§èŠ‚ç‚¹(è¶…è¿‡10ä¸‡æ¡è¾¹),è€ƒè™‘æ‹†åˆ†</div>
                    </li>
                    <li><strong>5. æ–‡æ¡£åŒ–æ¨¡å‹</strong>
                        <div class="text-sm text-gray-400 mt-1">ç»´æŠ¤æ¸…æ™°çš„æ•°æ®æ¨¡å‹æ–‡æ¡£</div>
                    </li>
                </ul>
            </div>

            <div class="warning-box mt-6">
                <h3 class="text-xl font-bold text-red-300 mb-3">âŒ DON'T - é¿å…åšæ³•</h3>
                <ul class="text-gray-300 space-y-3">
                    <li><strong>1. ä¸è¦ç›´æ¥è¿ç§»å…³ç³»æ¨¡å‹</strong>
                        <div class="text-sm text-gray-400 mt-1">å›¾å»ºæ¨¡éœ€è¦ä¸åŒçš„æ€ç»´æ–¹å¼</div>
                    </li>
                    <li><strong>2. ä¸è¦è¿‡åº¦è§„èŒƒåŒ–</strong>
                        <div class="text-sm text-gray-400 mt-1">é€‚å½“å†—ä½™å¯ä»¥æå‡æŸ¥è¯¢æ€§èƒ½</div>
                    </li>
                    <li><strong>3. ä¸è¦å¿½è§†æŸ¥è¯¢æ€§èƒ½</strong>
                        <div class="text-sm text-gray-400 mt-1">æŸäº›å¤æ‚çš„å›¾æ¨¡å¼å¯èƒ½éš¾ä»¥é«˜æ•ˆæŸ¥è¯¢</div>
                    </li>
                    <li><strong>4. ä¸è¦åˆ›å»ºå¤ªå¤šçš„å…³ç³»ç±»å‹</strong>
                        <div class="text-sm text-gray-400 mt-1">ä¿æŒå…³ç³»ç±»å‹æ•°é‡å¯æ§</div>
                    </li>
                    <li><strong>5. ä¸è¦å¿˜è®°æµ‹è¯•</strong>
                        <div class="text-sm text-gray-400 mt-1">ç”¨çœŸå®æ•°æ®æµ‹è¯•æ¨¡å‹çš„æ€§èƒ½</div>
                    </li>
                </ul>
            </div>

            <div class="highlight-box mt-6">
                <h3 class="text-xl font-bold text-green-300 mb-3">ğŸ” å»ºæ¨¡éªŒè¯æ–¹æ³•</h3>
                <div class="space-y-3">
                    <div class="flex items-start gap-3">
                        <span class="text-green-400 text-2xl">1</span>
                        <div>
                            <div class="font-bold text-gray-300">æŸ¥è¯¢è·¯å¾„æµ‹è¯•</div>
                            <div class="text-sm text-gray-400">æ£€æŸ¥å¸¸è§æŸ¥è¯¢æ˜¯å¦å¯ä»¥é€šè¿‡ç®€çŸ­çš„å›¾è·¯å¾„å®Œæˆ</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-green-400 text-2xl">2</span>
                        <div>
                            <div class="font-bold text-gray-300">æ€§èƒ½åŸºå‡†æµ‹è¯•</div>
                            <div class="text-sm text-gray-400">æµ‹è¯•å…¸å‹æŸ¥è¯¢çš„å“åº”æ—¶é—´</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-green-400 text-2xl">3</span>
                        <div>
                            <div class="font-bold text-gray-300">æ•°æ®ä¸€è‡´æ€§æ£€æŸ¥</div>
                            <div class="text-sm text-gray-400">éªŒè¯æ˜¯å¦æœ‰å­¤ç«‹èŠ‚ç‚¹æˆ–ä¸ä¸€è‡´çš„è¿æ¥</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-green-400 text-2xl">4</span>
                        <div>
                            <div class="font-bold text-gray-300">å¯æ‰©å±•æ€§è¯„ä¼°</div>
                            <div class="text-sm text-gray-400">è€ƒè™‘æ•°æ®å¢é•¿10å€ã€100å€åçš„æ€§èƒ½</div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="glass-card">
            <h2 class="section-title">ä¸‹ä¸€æ­¥å­¦ä¹ </h2>
            <p class="text-gray-300 mb-4">
                ç†è§£äº†å›¾æ•°æ®å»ºæ¨¡åŸåˆ™å,å»ºè®®ç»§ç»­å­¦ä¹ :
            </p>
            <div class="space-y-3">
                <a href="24-rdf-semantic-web.html" class="block bg-black/30 p-4 rounded-lg hover:bg-black/40 transition-colors">
                    <div class="flex items-center justify-between">
                        <div>
                            <div class="font-bold text-blue-400">æ¨¡å— 24: RDF å’Œè¯­ä¹‰ç½‘åŸºç¡€</div>
                            <div class="text-sm text-gray-400">å­¦ä¹ RDFä¸‰å…ƒç»„ã€åºåˆ—åŒ–æ ¼å¼å’Œè¯­ä¹‰ç½‘æ ‡å‡†</div>
                        </div>
                        <svg class="w-6 h-6 text-gray-400" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                        </svg>
                    </div>
                </a>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center py-8 text-gray-500 text-sm">
            <p>çŸ¥è¯†å›¾è°±å­¦ä¹ å¹³å° Â· æ¨¡å— 23: å›¾æ•°æ®å»ºæ¨¡åŸåˆ™</p>
        </div>
    </div>

    <script>
        // ============================================================
        // åŠ¨ç”» 1: ERå›¾åˆ°å›¾æ¨¡å‹è½¬æ¢
        // ============================================================
        let erSvg, erWidth, erHeight, erMode = 'er'; // 'er' or 'graph'

        const erData = {
            tables: [
                { name: "Users", x: 200, y: 150, fields: ["id", "name", "email"] },
                { name: "Orders", x: 500, y: 150, fields: ["id", "user_id", "date"] },
                { name: "Products", x: 500, y: 400, fields: ["id", "name", "price"] }
            ],
            relationships: [
                { from: "Users", to: "Orders", label: "1:N" },
                { from: "Orders", to: "Products", label: "N:M" }
            ]
        };

        function initERAnimation() {
            const container = document.getElementById("er-animation");
            container.innerHTML = "";
            erWidth = container.clientWidth;
            erHeight = 500;

            erSvg = d3.select("#er-animation")
                .append("svg")
                .attr("width", erWidth)
                .attr("height", erHeight);

            drawERDiagram();
        }

        function drawERDiagram() {
            erSvg.selectAll("*").remove();

            // æ ‡é¢˜
            erSvg.append("text")
                .attr("x", erWidth / 2)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .attr("fill", "#60a5fa")
                .attr("font-size", "20px")
                .attr("font-weight", "bold")
                .text("ERå›¾ - å…³ç³»å‹æ•°æ®åº“æ¨¡å‹");

            // ç»˜åˆ¶è¡¨
            erData.tables.forEach(table => {
                const g = erSvg.append("g")
                    .attr("transform", `translate(${table.x}, ${table.y})`);

                // è¡¨æ¡†
                g.append("rect")
                    .attr("x", -60)
                    .attr("y", 0)
                    .attr("width", 120)
                    .attr("height", 30 + table.fields.length * 25)
                    .attr("fill", "#1e3a8a")
                    .attr("stroke", "#3b82f6")
                    .attr("stroke-width", 2)
                    .attr("rx", 5);

                // è¡¨å
                g.append("text")
                    .attr("x", 0)
                    .attr("y", 20)
                    .attr("text-anchor", "middle")
                    .attr("fill", "white")
                    .attr("font-weight", "bold")
                    .attr("font-size", "14px")
                    .text(table.name);

                // å­—æ®µ
                table.fields.forEach((field, i) => {
                    g.append("text")
                        .attr("x", -50)
                        .attr("y", 45 + i * 25)
                        .attr("fill", "#93c5fd")
                        .attr("font-size", "12px")
                        .text(field);
                });
            });

            // ç»˜åˆ¶å…³ç³»
            erData.relationships.forEach(rel => {
                const fromTable = erData.tables.find(t => t.name === rel.from);
                const toTable = erData.tables.find(t => t.name === rel.to);

                const line = erSvg.append("line")
                    .attr("x1", fromTable.x + 60)
                    .attr("y1", fromTable.y + 50)
                    .attr("x2", toTable.x - 60)
                    .attr("y2", toTable.y + 50)
                    .attr("stroke", "#22c55e")
                    .attr("stroke-width", 2)
                    .attr("stroke-dasharray", "5,5");

                // å…³ç³»æ ‡ç­¾
                erSvg.append("text")
                    .attr("x", (fromTable.x + toTable.x) / 2)
                    .attr("y", (fromTable.y + toTable.y) / 2 + 40)
                    .attr("text-anchor", "middle")
                    .attr("fill", "#22c55e")
                    .attr("font-size", "14px")
                    .attr("font-weight", "bold")
                    .text(rel.label);
            });
        }

        function drawGraphModel() {
            erSvg.selectAll("*").remove();

            // æ ‡é¢˜
            erSvg.append("text")
                .attr("x", erWidth / 2)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .attr("fill", "#22c55e")
                .attr("font-size", "20px")
                .attr("font-weight", "bold")
                .text("å›¾æ¨¡å‹ - Property Graph");

            const nodes = [
                { id: 1, label: "User:å¼ ä¸‰", type: "User", x: 200, y: 150, color: "#3b82f6" },
                { id: 2, label: "User:æå››", type: "User", x: 200, y: 350, color: "#3b82f6" },
                { id: 3, label: "Order:#1001", type: "Order", x: 400, y: 150, color: "#8b5cf6" },
                { id: 4, label: "Order:#1002", type: "Order", x: 400, y: 350, color: "#8b5cf6" },
                { id: 5, label: "Product:æ‰‹æœº", type: "Product", x: 600, y: 250, color: "#22c55e" }
            ];

            const links = [
                { source: 1, target: 3, label: "PLACED" },
                { source: 2, target: 4, label: "PLACED" },
                { source: 3, target: 5, label: "CONTAINS" },
                { source: 4, target: 5, label: "CONTAINS" }
            ];

            // ç»˜åˆ¶è¾¹
            links.forEach(link => {
                const sourceNode = nodes.find(n => n.id === link.source);
                const targetNode = nodes.find(n => n.id === link.target);

                const line = erSvg.append("line")
                    .attr("x1", sourceNode.x)
                    .attr("y1", sourceNode.y)
                    .attr("x2", targetNode.x)
                    .attr("y2", targetNode.y)
                    .attr("stroke", "#22c55e")
                    .attr("stroke-width", 2)
                    .attr("marker-end", "url(#arrowhead)");

                // å…³ç³»æ ‡ç­¾
                const midX = (sourceNode.x + targetNode.x) / 2;
                const midY = (sourceNode.y + targetNode.y) / 2;

                erSvg.append("text")
                    .attr("x", midX)
                    .attr("y", midY - 10)
                    .attr("text-anchor", "middle")
                    .attr("fill", "#22c55e")
                    .attr("font-size", "11px")
                    .attr("font-weight", "bold")
                    .text(link.label);
            });

            // ç»˜åˆ¶èŠ‚ç‚¹
            nodes.forEach(node => {
                const g = erSvg.append("g")
                    .attr("transform", `translate(${node.x}, ${node.y})`);

                g.append("circle")
                    .attr("r", 40)
                    .attr("fill", node.color)
                    .attr("opacity", 0.6)
                    .attr("stroke", node.color)
                    .attr("stroke-width", 2);

                g.append("text")
                    .attr("text-anchor", "middle")
                    .attr("dy", -5)
                    .attr("fill", "white")
                    .attr("font-size", "11px")
                    .attr("font-weight", "bold")
                    .text(node.label.substring(0, 10));

                g.append("text")
                    .attr("text-anchor", "middle")
                    .attr("dy", 15)
                    .attr("fill", "white")
                    .attr("font-size", "10px")
                    .attr("opacity", 0.8)
                    .text(node.type);
            });

            // æ·»åŠ ç®­å¤´å®šä¹‰
            erSvg.append("defs")
                .append("marker")
                .attr("id", "arrowhead")
                .attr("viewBox", "0 0 10 10")
                .attr("refX", 8)
                .attr("refY", 5)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M 0 0 L 10 5 L 0 10 z")
                .attr("fill", "#22c55e");
        }

        function playERAnimation() {
            resetERAnimation();

            // æ˜¾ç¤ºERå›¾
            drawERDiagram();
            updateERDescription("å½“å‰æ˜¾ç¤º: ERå›¾ - è¡¨ç»“æ„æ¸…æ™°,ä½†éœ€è¦JOINè¿æ¥");

            // 1ç§’åå¼€å§‹è½¬æ¢
            setTimeout(() => {
                // æ·¡å‡ºERå›¾
                erSvg.selectAll("*")
                    .transition()
                    .duration(500)
                    .style("opacity", 0);

                setTimeout(() => {
                    updateERDescription("è½¬æ¢ä¸­... è¡¨å˜ä¸ºèŠ‚ç‚¹,å¤–é”®å˜ä¸ºè¾¹");
                    drawGraphModel();
                    erSvg.selectAll("*").style("opacity", 0);

                    // æ·¡å…¥å›¾æ¨¡å‹
                    erSvg.selectAll("*")
                        .transition()
                        .duration(500)
                        .style("opacity", 1);

                    updateERDescription("âœ“ è½¬æ¢å®Œæˆ! å›¾æ¨¡å‹æ›´ç›´è§‚,æŸ¥è¯¢æ— éœ€JOIN");
                }, 600);
            }, 1500);
        }

        function resetERAnimation() {
            erMode = 'er';
            drawERDiagram();
            updateERDescription("ç‚¹å‡»æ’­æ”¾è½¬æ¢æŸ¥çœ‹ERå›¾å¦‚ä½•é€æ­¥è½¬æ¢ä¸ºå›¾æ•°æ®æ¨¡å‹");
        }

        function toggleView() {
            if (erMode === 'er') {
                drawGraphModel();
                erMode = 'graph';
                updateERDescription("å½“å‰æ˜¾ç¤º: å›¾æ¨¡å‹ - èŠ‚ç‚¹å’Œè¾¹ç›´æ¥è¿æ¥");
            } else {
                drawERDiagram();
                erMode = 'er';
                updateERDescription("å½“å‰æ˜¾ç¤º: ERå›¾ - è¡¨ç»“æ„æ¸…æ™°,ä½†éœ€è¦JOINè¿æ¥");
            }
        }

        function updateERDescription(text) {
            document.getElementById("er-description").textContent = text;
        }

        // ============================================================
        // åŠ¨ç”» 2: ç”µå•†çŸ¥è¯†å›¾è°±æ„å»º
        // ============================================================
        let ecommerceSvg;
        let ecommerceWidth;
        let ecommerceHeight;
        let ecommerceNodes = [];
        let ecommerceLinks = [];

        const entityTypes = [
            { name: "User:å¼ ä¸‰", type: "user", color: "#3b82f6" },
            { name: "Product:iPhone", type: "product", color: "#8b5cf6" },
            { name: "Category:ç”µå­äº§å“", type: "category", color: "#22c55e" },
            { name: "Brand:Apple", type: "brand", color: "#f59e0b" },
            { name: "Order:#1001", type: "order", color: "#ec4899" },
            { name: "Review:å¥½è¯„", type: "review", color: "#06b6d4" }
        ];

        const relationshipTypes = [
            { from: "User:å¼ ä¸‰", to: "Product:iPhone", relation: "BOUGHT" },
            { from: "User:å¼ ä¸‰", to: "Order:#1001", relation: "PLACED" },
            { from: "Product:iPhone", to: "Category:ç”µå­äº§å“", relation: "BELONGS_TO" },
            { from: "Product:iPhone", to: "Brand:Apple", relation: "PRODUCED_BY" },
            { from: "User:å¼ ä¸‰", to: "Review:å¥½è¯„", relation: "WROTE" },
            { from: "Review:å¥½è¯„", to: "Product:iPhone", relation: "REVIEWS" }
        ];

        function initEcommerceAnimation() {
            const container = document.getElementById("ecommerce-animation");

            // åªåœ¨ç¬¬ä¸€æ¬¡æˆ–SVGä¸å­˜åœ¨æ—¶åˆå§‹åŒ–
            if (!ecommerceSvg || container.children.length === 0) {
                container.innerHTML = "";
                ecommerceWidth = container.clientWidth;
                ecommerceHeight = 500;

                ecommerceSvg = d3.select("#ecommerce-animation")
                    .append("svg")
                    .attr("width", ecommerceWidth)
                    .attr("height", ecommerceHeight);

                // æ ‡é¢˜
                ecommerceSvg.append("text")
                    .attr("x", ecommerceWidth / 2)
                    .attr("y", 30)
                    .attr("text-anchor", "middle")
                    .attr("fill", "#60a5fa")
                    .attr("font-size", "20px")
                    .attr("font-weight", "bold")
                    .text("ç”µå•†çŸ¥è¯†å›¾è°± - å®æ—¶æ„å»ºä¸­");
            }
        }

        function playEcommerceAnimation() {
            // ç¡®ä¿SVGå·²åˆå§‹åŒ–
            initEcommerceAnimation();

            // æ¸…ç©ºæ•°æ®
            ecommerceNodes = [];
            ecommerceLinks = [];

            // æ¸…ç©ºSVGä¸­é™¤æ ‡é¢˜å¤–çš„æ‰€æœ‰å†…å®¹
            ecommerceSvg.selectAll("*").filter(function() {
                return this.tagName !== "text";
            }).remove();

            let step = 0;
            const statsDiv = document.getElementById("ecommerce-stats");

            // åˆ›å»ºå›¾å±‚
            let simulation = null;
            const linkGroup = ecommerceSvg.append("g");
            const nodeGroup = ecommerceSvg.append("g");

            function ticked() {
                // åªæ›´æ–°å·²å­˜åœ¨çš„å…ƒç´ 
                linkGroup.selectAll("line")
                    .attr("x1", d => d.source.x)
                    .attr("y1", d => d.source.y)
                    .attr("x2", d => d.target.x)
                    .attr("y2", d => d.target.y);

                nodeGroup.selectAll("g")
                    .attr("transform", d => `translate(${d.x},${d.y})`);

                linkGroup.selectAll("text")
                    .attr("x", d => (d.source.x + d.target.x) / 2)
                    .attr("y", d => (d.source.y + d.target.y) / 2);
            }

            function addNextStep() {
                if (step >= entityTypes.length) {
                    statsDiv.innerHTML = `<span class="text-green-400">âœ“ ç”µå•†çŸ¥è¯†å›¾è°±æ„å»ºå®Œæˆ!</span><br>` +
                        `å®ä½“æ•°: ${ecommerceNodes.length}<br>` +
                        `å…³ç³»æ•°: ${ecommerceLinks.length}`;
                    return;
                }

                const entity = entityTypes[step];
                const newNode = {
                    name: entity.name,
                    type: entity.type,
                    color: entity.color,
                    x: Math.random() * parseInt(ecommerceSvg.attr("width")),
                    y: Math.random() * 500
                };

                ecommerceNodes.push(newNode);

                // åˆ›å»ºsimulationï¼ˆåªåœ¨ç¬¬ä¸€æ¬¡æ·»åŠ èŠ‚ç‚¹æ—¶ï¼‰
                if (!simulation && ecommerceNodes.length > 0) {
                    simulation = d3.forceSimulation(ecommerceNodes)
                        .force("link", d3.forceLink(ecommerceLinks).id(d => d.name).distance(120))
                        .force("charge", d3.forceManyBody().strength(-300))
                        .force("center", d3.forceCenter(parseInt(ecommerceSvg.attr("width")) / 2, 280))
                        .force("collision", d3.forceCollide().radius(50));
                    simulation.on("tick", ticked);
                }

                // ç»˜åˆ¶èŠ‚ç‚¹
                const node = nodeGroup.append("g")
                    .datum(newNode)
                    .attr("class", "node")
                    .style("opacity", 0);

                node.append("circle")
                    .attr("r", 35)
                    .attr("fill", entity.color)
                    .attr("opacity", 0.6)
                    .attr("stroke", entity.color)
                    .attr("stroke-width", 2);

                node.append("text")
                    .attr("text-anchor", "middle")
                    .attr("dy", -5)
                    .attr("fill", "white")
                    .attr("font-size", "10px")
                    .attr("font-weight", "bold")
                    .text(entity.name.substring(0, 10));

                node.append("text")
                    .attr("text-anchor", "middle")
                    .attr("dy", 15)
                    .attr("fill", "white")
                    .attr("font-size", "9px")
                    .attr("opacity", 0.8)
                    .text(entity.type);

                node.transition()
                    .duration(500)
                    .style("opacity", 1);

                // æ·»åŠ ç›¸å…³çš„å…³ç³»
                const relatedRelationships = relationshipTypes.filter(
                    r => r.from === entity.name || r.to === entity.name
                );

                relatedRelationships.forEach(rel => {
                    const sourceNode = ecommerceNodes.find(n => n.name === rel.from);
                    const targetNode = ecommerceNodes.find(n => n.name === rel.to);

                    if (sourceNode && targetNode) {
                        const existingLink = ecommerceLinks.find(
                            l => l.source === sourceNode && l.target === targetNode
                        );

                        if (!existingLink) {
                            const newLink = { source: sourceNode, target: targetNode, relation: rel.relation };
                            ecommerceLinks.push(newLink);

                            const line = linkGroup.insert("line", ":first-child")
                                .datum(newLink)
                                .attr("stroke", "#22c55e")
                                .attr("stroke-width", 2)
                                .attr("opacity", 0);

                            line.transition()
                                .duration(500)
                                .attr("opacity", 1);

                            // å…³ç³»æ ‡ç­¾
                            const midX = (sourceNode.x + targetNode.x) / 2;
                            const midY = (sourceNode.y + targetNode.y) / 2;

                            linkGroup.append("text")
                                .datum({ source: sourceNode, target: targetNode })
                                .attr("fill", "#22c55e")
                                .attr("font-size", "10px")
                                .attr("font-weight", "bold")
                                .attr("text-anchor", "middle")
                                .style("opacity", 0)
                                .text(rel.relation)
                                .transition()
                                .duration(500)
                                .style("opacity", 1);
                        }
                    }
                });

                // åªåœ¨simulationå­˜åœ¨æ—¶æ‰é‡å¯
                if (simulation) {
                    simulation.nodes(ecommerceNodes);
                    simulation.force("link").links(ecommerceLinks);
                    simulation.alpha(1).restart();
                }

                statsDiv.innerHTML = `æ·»åŠ å®ä½“ ${step + 1}/${entityTypes.length}:<br>` +
                    `<span class="text-blue-400">${entity.name}</span> (${entity.type})`;

                step++;
                setTimeout(addNextStep, 1500);
            }

            setTimeout(addNextStep, 500);
        }

        function resetEcommerceAnimation() {
            // åªæ¸…ç©ºæ•°æ®,ä¸åˆ é™¤SVGå…ƒç´ 
            ecommerceNodes = [];
            ecommerceLinks = [];

            // æ¸…ç©ºSVGä¸­é™¤æ ‡é¢˜å¤–çš„æ‰€æœ‰å†…å®¹
            if (ecommerceSvg) {
                ecommerceSvg.selectAll("*").filter(function() {
                    return this.tagName !== "text";
                }).remove();
            }

            document.getElementById("ecommerce-stats").innerHTML =
                'ç‚¹å‡»"æ’­æ”¾æ„å»º"å¼€å§‹æ¼”ç¤ºç”µå•†çŸ¥è¯†å›¾è°±çš„å»ºæ¨¡è¿‡ç¨‹';
        }

        function addEntity() {
            const colors = ["#3b82f6", "#8b5cf6", "#22c55e", "#f59e0b", "#ec4899", "#06b6d4"];
            const randomColor = colors[Math.floor(Math.random() * colors.length)];
            const types = ["user", "product", "category", "brand", "order", "review"];
            const randomType = types[Math.floor(Math.random() * types.length)];
            const randomId = Math.floor(Math.random() * 1000);

            const newEntity = {
                name: `${randomType}:${randomId}`,
                type: randomType,
                color: randomColor,
                x: Math.random() * parseInt(ecommerceSvg.attr("width")),
                y: Math.random() * 500
            };

            ecommerceNodes.push(newEntity);

            const nodeGroup = ecommerceSvg.select("g:nth-child(2)");

            const node = nodeGroup.append("g")
                .datum(newEntity)
                .attr("class", "node")
                .style("opacity", 0);

            node.append("circle")
                .attr("r", 35)
                .attr("fill", randomColor)
                .attr("opacity", 0.6)
                .attr("stroke", randomColor)
                .attr("stroke-width", 2);

            node.append("text")
                .attr("text-anchor", "middle")
                .attr("dy", -5)
                .attr("fill", "white")
                .attr("font-size", "10px")
                .attr("font-weight", "bold")
                .text(newEntity.name.substring(0, 10));

            node.append("text")
                .attr("text-anchor", "middle")
                .attr("dy", 15)
                .attr("fill", "white")
                .attr("font-size", "9px")
                .attr("opacity", 0.8)
                .text(randomType);

            node.transition()
                .duration(500)
                .style("opacity", 1);

            document.getElementById("ecommerce-stats").innerHTML =
                `æ·»åŠ äº†æ–°å®ä½“: <span class="text-blue-400">${newEntity.name}</span><br>` +
                `å½“å‰å®ä½“æ•°: ${ecommerceNodes.length}`;
        }

        // ============================================================
        // åˆå§‹åŒ–
        // ============================================================
        document.addEventListener("DOMContentLoaded", function() {
            initERAnimation();
            initEcommerceAnimation();
        });
    </script>
</body>
</html>
