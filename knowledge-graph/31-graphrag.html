<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¨¡å—31: GraphRAG - å›¾å¢å¼ºæ£€ç´¢ç”Ÿæˆ | çŸ¥è¯†å›¾è°±å­¦ä¹ å¹³å°</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://d3js.org/d3.v7.min.js"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&family=JetBrains+Mono:wght@400;500&display=swap" rel="stylesheet">
    <script>
        tailwind.config = {
            darkMode: 'class',
            theme: {
                extend: {
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                        mono: ['JetBrains Mono', 'monospace'],
                    },
                },
            },
        }
    </script>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Inter', sans-serif;
            background: linear-gradient(135deg, #0f172a 0%, #1e1b4b 50%, #0f172a 100%);
            min-height: 100vh;
            color: #e2e8f0;
            overflow-x: hidden;
        }

        .orb {
            position: fixed;
            border-radius: 50%;
            filter: blur(80px);
            pointer-events: none;
            z-index: 0;
            animation: float 20s ease-in-out infinite;
        }

        .orb-1 {
            width: 600px;
            height: 600px;
            background: radial-gradient(circle, rgba(34, 197, 94, 0.3) 0%, rgba(59, 130, 246, 0.1) 50%, transparent 70%);
            top: -200px;
            right: -200px;
        }

        .orb-2 {
            width: 500px;
            height: 500px;
            background: radial-gradient(circle, rgba(139, 92, 246, 0.2) 0%, rgba(236, 72, 153, 0.1) 50%, transparent 70%);
            bottom: -150px;
            left: -150px;
            animation-delay: -10s;
        }

        @keyframes float {
            0%, 100% { transform: translate(0, 0) scale(1); }
            50% { transform: translate(30px, -30px) scale(1.1); }
        }

        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 40px 20px;
            position: relative;
            z-index: 1;
        }

        .nav-card {
            background: rgba(255, 255, 255, 0.05);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
        }

        .glass-card {
            background: rgba(255, 255, 255, 0.03);
            backdrop-filter: blur(20px);
            border: 1px solid rgba(255, 255, 255, 0.1);
            border-radius: 20px;
            padding: 40px;
            margin: 30px 0;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
        }

        .section-title {
            font-size: 2.5em;
            margin-bottom: 30px;
            background: linear-gradient(135deg, #4ade80 0%, #3b82f6 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .subsection-title {
            font-size: 1.8em;
            margin: 30px 0 20px 0;
            color: #60a5fa;
        }

        .concept-card {
            background: rgba(59, 130, 246, 0.1);
            border-left: 4px solid #3b82f6;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .highlight-box {
            background: rgba(34, 197, 94, 0.1);
            border-left: 4px solid #22c55e;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .warning-box {
            background: rgba(239, 68, 68, 0.1);
            border-left: 4px solid #ef4444;
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
        }

        .animation-container {
            background: rgba(0, 0, 0, 0.3);
            border: 2px solid rgba(59, 130, 246, 0.3);
            border-radius: 15px;
            padding: 30px;
            margin: 20px 0;
        }

        .animation-title {
            font-size: 1.3em;
            font-weight: 600;
            color: #60a5fa;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .animation-canvas {
            background: rgba(255, 255, 255, 0.02);
            border-radius: 10px;
            min-height: 400px;
            position: relative;
            overflow: hidden;
        }

        .controls {
            display: flex;
            gap: 10px;
            margin-top: 15px;
            flex-wrap: wrap;
        }

        .btn {
            padding: 10px 20px;
            border-radius: 8px;
            font-weight: 500;
            cursor: pointer;
            transition: all 0.3s ease;
            border: none;
            font-size: 0.9em;
        }

        .btn-primary {
            background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            color: white;
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(59, 130, 246, 0.4);
        }

        .btn-secondary {
            background: rgba(255, 255, 255, 0.1);
            color: #e2e8f0;
            border: 1px solid rgba(255, 255, 255, 0.2);
        }

        .btn-secondary:hover {
            background: rgba(255, 255, 255, 0.2);
        }

        .info-panel {
            background: rgba(0, 0, 0, 0.2);
            border-radius: 10px;
            padding: 15px;
            margin-top: 15px;
            font-size: 0.9em;
        }

        .code-block {
            background: rgba(0, 0, 0, 0.4);
            border-radius: 10px;
            padding: 20px;
            margin: 20px 0;
            overflow-x: auto;
        }

        .code-block pre {
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.85em;
            line-height: 1.6;
            color: #e2e8f0;
        }

        .code-block .keyword { color: #c792ea; }
        .code-block .string { color: #c3e88d; }
        .code-block .comment { color: #676e95; }
        .code-block .function { color: #82aaff; }
        .code-block .number { color: #f78c6c; }

        .comparison-table {
            width: 100%;
            border-collapse: collapse;
            margin: 20px 0;
        }

        .comparison-table th,
        .comparison-table td {
            padding: 15px;
            text-align: left;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .comparison-table th {
            background: rgba(59, 130, 246, 0.2);
            color: #60a5fa;
            font-weight: 600;
        }

        .comparison-table tr:hover {
            background: rgba(255, 255, 255, 0.05);
        }

        @media (max-width: 768px) {
            .section-title {
                font-size: 2em;
            }
            .glass-card {
                padding: 20px;
            }
        }
    </style>
</head>
<body>
    <!-- Background orbs -->
    <div class="orb orb-1"></div>
    <div class="orb orb-2"></div>

    <div class="container">
        <!-- Navigation -->
        <div class="nav-card">
            <div class="flex items-center justify-between flex-wrap gap-4">
                <a href="index.html" class="text-green-400 hover:text-green-300 transition-colors flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    è¿”å›è¯¾ç¨‹ç›®å½•
                </a>
                <div class="flex items-center gap-4">
                <a href="30-kg-visualization.html" class="text-gray-400 hover:text-white transition-colors flex items-center gap-2">
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"/>
                    </svg>
                    ä¸Šä¸€æ¨¡å—
                </a>
                <a href="32-kg-applications.html" class="text-gray-400 hover:text-white transition-colors flex items-center gap-2">
                    ä¸‹ä¸€æ¨¡å—
                    <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"/>
                    </svg>
                </a>
                </div>
                <div class="text-gray-400 text-sm">æ¨¡å— 31 / 33</div>
            </div>
        </div>

        <!-- Header -->
        <div class="text-center mb-12">
            <h1 class="text-5xl md:text-6xl font-bold mb-6" style="background: linear-gradient(135deg, #4ade80 0%, #3b82f6 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                æ¨¡å— 31: GraphRAG - å›¾å¢å¼ºæ£€ç´¢ç”Ÿæˆ
            </h1>
            <p class="text-xl text-gray-400 mb-8">ç»“åˆçŸ¥è¯†å›¾è°±ä¸å¤§è¯­è¨€æ¨¡å‹ï¼Œå®ç°å¯è§£é‡Šçš„æ™ºèƒ½æ£€ç´¢ç”Ÿæˆç³»ç»Ÿ</p>
            <div class="flex flex-wrap gap-4 justify-center text-sm">
                <span class="px-4 py-2 bg-purple-500/20 text-purple-400 rounded-full border border-purple-500/30">è¿›é˜¶çº§åˆ«</span>
                <span class="px-4 py-2 bg-blue-500/20 text-blue-400 rounded-full border border-blue-500/30">~90 åˆ†é’Ÿ</span>
                <span class="px-4 py-2 bg-green-500/20 text-green-400 rounded-full border border-green-500/30">5 ä¸ªäº¤äº’åŠ¨ç”»</span>
            </div>
        </div>

        <!-- Chapter 1: ä¼ ç»ŸRAGçš„å±€é™æ€§ -->
        <div class="glass-card">
            <h2 class="section-title">1. ä¼ ç»ŸRAGçš„å±€é™æ€§</h2>

            <div class="concept-card">
                <h3 class="text-xl font-bold text-blue-300 mb-3">ä»€ä¹ˆæ˜¯RAG?</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    <strong>RAG (Retrieval-Augmented Generation)</strong> æ˜¯ä¸€ç§ç»“åˆæ£€ç´¢å’Œç”Ÿæˆçš„æŠ€æœ¯ï¼Œé€šè¿‡ä»å¤–éƒ¨çŸ¥è¯†åº“ä¸­æ£€ç´¢ç›¸å…³ä¿¡æ¯æ¥å¢å¼ºå¤§è¯­è¨€æ¨¡å‹çš„ç”Ÿæˆèƒ½åŠ›ã€‚
                </p>
                <p class="text-gray-400">
                    ä¼ ç»ŸRAGä¸»è¦ä¾èµ–<strong>å‘é‡æ£€ç´¢</strong>ï¼Œå°†æ–‡æ¡£è½¬æ¢ä¸ºå‘é‡åµŒå…¥ï¼Œé€šè¿‡è¯­ä¹‰ç›¸ä¼¼åº¦æ‰¾åˆ°ç›¸å…³å†…å®¹ã€‚
                </p>
            </div>

            <div class="animation-container">
                <div class="animation-title">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                    åŠ¨ç”»: ä¼ ç»ŸRAG vs GraphRAGå¯¹æ¯”
                </div>
                <div id="rag-comparison-animation" class="animation-canvas" style="min-height: 500px;"></div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="playRAGComparison()">â–¶ æ’­æ”¾å¯¹æ¯”</button>
                    <button class="btn btn-secondary" onclick="showTraditionalRAG()">æŸ¥çœ‹ä¼ ç»ŸRAG</button>
                    <button class="btn btn-secondary" onclick="showGraphRAG()">æŸ¥çœ‹GraphRAG</button>
                </div>
                <div id="rag-comparison-info" class="info-panel">
                    <div class="text-yellow-400 font-bold mb-2">å½“å‰å±•ç¤º:</div>
                    <div id="rag-description" class="text-gray-300">
                        ç‚¹å‡»"æ’­æ”¾å¯¹æ¯”"æŸ¥çœ‹ä¼ ç»ŸRAGå’ŒGraphRAGçš„åŒºåˆ«
                    </div>
                </div>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">ä¼ ç»ŸRAGçš„æ ¸å¿ƒé—®é¢˜</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-red-500">
                        <div class="font-bold text-red-400 mb-2">1. è¯­ä¹‰ç†è§£ä¸è¶³</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ å‘é‡åµŒå…¥åªèƒ½æ•æ‰è¡¨é¢è¯­ä¹‰</li>
                            <li>â€¢ éš¾ä»¥ç†è§£å¤æ‚å…³ç³»</li>
                            <li>â€¢ æ— æ³•å¤„ç†å¤šè·³æ¨ç†</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-orange-500">
                        <div class="font-bold text-orange-400 mb-2">2. å…³ç³»ç¼ºå¤±</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ æ–‡æ¡£è¢«åˆ‡ç¢æˆchunks</li>
                            <li>â€¢ å®ä½“é—´å…³ç³»æ–­è£‚</li>
                            <li>â€¢ ç»“æ„åŒ–ä¿¡æ¯ä¸¢å¤±</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-yellow-500">
                        <div class="font-bold text-yellow-400 mb-2">3. æ¨ç†èƒ½åŠ›å¼±</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ åªèƒ½åšå•æ¬¡æ£€ç´¢</li>
                            <li>â€¢ éš¾ä»¥è¿›è¡Œé“¾å¼æ¨ç†</li>
                            <li>â€¢ æ— æ³•æ•´åˆå¤šæºä¿¡æ¯</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-pink-500">
                        <div class="font-bold text-pink-400 mb-2">4. å¯è§£é‡Šæ€§å·®</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ æ— æ³•å±•ç¤ºæ¨ç†è·¯å¾„</li>
                            <li>â€¢ éš¾ä»¥è¿½æº¯ä¿¡æ¯æ¥æº</li>
                            <li>â€¢ é»‘ç›’ç”Ÿæˆè¿‡ç¨‹</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="warning-box mt-6">
                <h3 class="text-xl font-bold text-red-300 mb-3">å®é™…æ¡ˆä¾‹: ä¼ ç»ŸRAGçš„å¤±è´¥</h3>
                <div class="bg-black/30 p-4 rounded-lg">
                    <p class="text-gray-300 mb-3">
                        <strong>é—®é¢˜:</strong> "åŸƒéš†Â·é©¬æ–¯å…‹çš„å…¬å¸ä¹‹é—´çš„å…³ç³»æ˜¯ä»€ä¹ˆ?"
                    </p>
                    <p class="text-gray-400 text-sm mb-3">
                        <strong>ä¼ ç»ŸRAGæ£€ç´¢ç»“æœ:</strong>
                    </p>
                    <ul class="text-gray-400 text-sm space-y-1 ml-4">
                        <li>â€¢ Chunk 1: "åŸƒéš†Â·é©¬æ–¯å…‹æ˜¯ç‰¹æ–¯æ‹‰çš„CEO"</li>
                        <li>â€¢ Chunk 2: "SpaceXæ˜¯ä¸€å®¶èˆªå¤©å…¬å¸"</li>
                        <li>â€¢ Chunk 3: "é©¬æ–¯å…‹è¿˜åˆ›ç«‹äº†The Boring Company"</li>
                    </ul>
                    <p class="text-red-400 text-sm mt-3">
                        âŒ <strong>é—®é¢˜:</strong> ä¸‰ä¸ªchunkæ˜¯ç‹¬ç«‹çš„ï¼Œæ— æ³•å»ºç«‹"ç‰¹æ–¯æ‹‰â†’é©¬æ–¯å…‹â†’SpaceX"çš„å…³ç³»é“¾ï¼Œæ— æ³•å›ç­”å…¬å¸é—´å…³ç³»
                    </p>
                </div>
            </div>
        </div>

        <!-- Chapter 2: GraphRAGæ¶æ„ -->
        <div class="glass-card">
            <h2 class="section-title">2. Microsoft GraphRAG 2024æ¶æ„</h2>

            <div class="concept-card mb-6">
                <h3 class="text-xl font-bold text-blue-300 mb-3">ä»€ä¹ˆæ˜¯Microsoft GraphRAG?</h3>
                <p class="text-gray-300 leading-relaxed mb-3">
                    <strong>Microsoft GraphRAG</strong> (2024) æ˜¯ä¸€ç§åŸºäºçŸ¥è¯†å›¾è°±çš„RAGæ–¹æ³•,é€šè¿‡<strong>ç¤¾åŒºæ£€æµ‹</strong>å’Œ<strong>å±‚æ¬¡åŒ–æ‘˜è¦</strong>
                    å®ç°å…¨å±€ä¸Šä¸‹æ–‡ç†è§£å’Œé«˜æ•ˆçš„æ£€ç´¢å¢å¼ºç”Ÿæˆã€‚
                </p>
                <p class="text-gray-400 mb-3">
                    ä¸ä¼ ç»ŸRAGä¸åŒ,GraphRAGåœ¨<strong>ç´¢å¼•æœŸ</strong>æ„å»ºå±‚æ¬¡åŒ–çš„ç¤¾åŒºæ‘˜è¦,åœ¨<strong>æŸ¥è¯¢æœŸ</strong>æ”¯æŒå…¨å±€å’Œæœ¬åœ°ä¸¤ç§æ£€ç´¢æ¨¡å¼ã€‚
                </p>
            </div>

            <!-- æ ¸å¿ƒæ¦‚å¿µæ·±åŒ– -->
            <div class="highlight-box mb-6">
                <h3 class="text-xl font-bold text-green-300 mb-3">ğŸ”‘ æ ¸å¿ƒæ¦‚å¿µ: ä¸ºä»€ä¹ˆéœ€è¦GraphRAG?</h3>
                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-blue-500/20 p-4 rounded-lg">
                        <div class="font-bold text-blue-400 mb-2">ä¼ ç»ŸRAGçš„æ ¹æœ¬é—®é¢˜</div>
                        <p class="text-gray-300 text-sm mb-2">
                            <strong>ç´¢å¼•æœŸvsæŸ¥è¯¢æœŸ</strong>: ä¼ ç»ŸRAGåªåœ¨æŸ¥è¯¢æœŸæ£€ç´¢,æ— æ³•å»ºç«‹å…¨å±€ä¸Šä¸‹æ–‡
                        </p>
                        <p class="text-gray-400 text-sm">
                            âŒ æ–‡æ¡£åˆ‡ç¢,å…³ç³»æ–­è£‚<br>
                            âŒ å‘é‡æ£€ç´¢åªçœ‹è¡¨é¢è¯­ä¹‰<br>
                            âŒ æ— æ³•å›ç­”è·¨æ–‡æ¡£å…¨å±€é—®é¢˜
                        </p>
                    </div>
                    <div class="bg-green-500/20 p-4 rounded-lg">
                        <div class="font-bold text-green-400 mb-2">GraphRAGçš„åˆ›æ–°</div>
                        <p class="text-gray-300 text-sm mb-2">
                            <strong>ç´¢å¼•æœŸæ„å»ºç¤¾åŒºæ‘˜è¦</strong>: é¢„å…ˆè®¡ç®—å±‚æ¬¡ç»“æ„å’Œæ‘˜è¦
                        </p>
                        <p class="text-gray-400 text-sm">
                            âœ… ç¤¾åŒºæ£€æµ‹å‘ç°å®ä½“ç¾¤ç»„<br>
                            âœ… å±‚æ¬¡åŒ–æ‘˜è¦æä¾›å…¨å±€è§†è§’<br>
                            âœ… æ”¯æŒå…¨å±€å’Œæœ¬åœ°ä¸¤ç§æŸ¥è¯¢
                        </p>
                    </div>
                </div>
            </div>

            <!-- Leidenç®—æ³•æ·±å…¥ -->
            <div class="concept-card mb-6">
                <h3 class="text-xl font-bold text-purple-300 mb-3">Leidenç¤¾åŒºæ£€æµ‹ç®—æ³•</h3>
                <p class="text-gray-300 mb-3">
                    <strong>Leidenç®—æ³•</strong>æ˜¯GraphRAGçš„æ ¸å¿ƒ,ç”¨äºå‘ç°å›¾ä¸­çš„ç¤¾åŒºç»“æ„ã€‚
                </p>
                <div class="space-y-3">
                    <div class="flex items-start gap-3">
                        <span class="text-blue-400 text-xl">1ï¸âƒ£</span>
                        <div>
                            <div class="font-bold text-gray-300">ä»€ä¹ˆæ˜¯ç¤¾åŒº?</div>
                            <p class="text-gray-400 text-sm">
                                ç¤¾åŒºæ˜¯å›¾ä¸­<strong>å†…éƒ¨è¿æ¥ç´§å¯†,å¤–éƒ¨è¿æ¥ç¨€ç–</strong>çš„èŠ‚ç‚¹ç¾¤ç»„ã€‚
                                ä¾‹å¦‚: åœ¨è®ºæ–‡å¼•ç”¨å›¾ä¸­,"æ·±åº¦å­¦ä¹ ç ”ç©¶ç»„"å½¢æˆä¸€ä¸ªç¤¾åŒºã€‚
                            </p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-green-400 text-xl">2ï¸âƒ£</span>
                        <div>
                            <div class="font-bold text-gray-300">Leidenç®—æ³•ç‰¹ç‚¹</div>
                            <p class="text-gray-400 text-sm">
                                â€¢ é«˜è´¨é‡ç¤¾åŒºåˆ’åˆ†<br>
                                â€¢ ä¿è¯è¿é€šæ€§<br>
                                â€¢ æ”¯æŒå±‚æ¬¡åŒ–ç»“æ„<br>
                                â€¢ å¿«é€Ÿæ”¶æ•›
                            </p>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-purple-400 text-xl">3ï¸âƒ£</span>
                        <div>
                            <div class="font-bold text-gray-300">ä¸ºä»€ä¹ˆéœ€è¦å±‚æ¬¡ç»“æ„?</div>
                            <p class="text-gray-400 text-sm">
                                ä¾‹å¦‚: ç ”ç©¶å‘˜ â†’ ç ”ç©¶ç»„ â†’ å®éªŒå®¤ â†’ æœºæ„ â†’ å›½å®¶
                                å±‚æ¬¡ç»“æ„æ”¯æŒ<strong>å¤šç²’åº¦æ£€ç´¢</strong>:å¯ä»¥æŸ¥è¯¢å•ä¸ªç ”ç©¶å‘˜æˆ–æ•´ä¸ªé¢†åŸŸ
                            </p>
                        </div>
                    </div>
                </div>
            </div>

            <!-- å…¨å±€vsæœ¬åœ°æŸ¥è¯¢æ·±å…¥ -->
            <div class="highlight-box mb-6">
                <h3 class="text-xl font-bold text-cyan-300 mb-3">å…¨å±€æŸ¥è¯¢ vs æœ¬åœ°æŸ¥è¯¢ vs æ··åˆæŸ¥è¯¢</h3>
                <div class="overflow-x-auto">
                    <table class="w-full text-sm">
                        <thead>
                            <tr class="border-b border-white/20">
                                <th class="p-3 text-left text-gray-400">ç»´åº¦</th>
                                <th class="p-3 text-left text-blue-400">å…¨å±€æŸ¥è¯¢(Global Search)</th>
                                <th class="p-3 text-left text-green-400">æœ¬åœ°æŸ¥è¯¢(Local Search)</th>
                                <th class="p-3 text-left text-purple-400">æ··åˆæŸ¥è¯¢(Hybrid)</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-300">
                            <tr class="border-b border-white/10">
                                <td class="p-3 font-bold">æ£€ç´¢èŒƒå›´</td>
                                <td class="p-3">æ‰€æœ‰ç¤¾åŒºæ‘˜è¦</td>
                                <td class="p-3">ç‰¹å®šå®ä½“é‚»å±…</td>
                                <td class="p-3">ç»“åˆå…¨å±€å’Œæœ¬åœ°</td>
                            </tr>
                            <tr class="border-b border-white/10 bg-white/5">
                                <td class="p-3 font-bold">é€‚ç”¨åœºæ™¯</td>
                                <td class="p-3">æ•´ä½“ä¸»é¢˜ã€è¶‹åŠ¿åˆ†æ</td>
                                <td class="p-3">å…·ä½“å®ä½“ã€ç»†èŠ‚æŸ¥è¯¢</td>
                                <td class="p-3">å¤æ‚é—®é¢˜,åˆ†æ­¥å›ç­”</td>
                            </tr>
                            <tr class="border-b border-white/10">
                                <td class="p-3 font-bold">ä¼˜åŠ¿</td>
                                <td class="p-3">å…¨å±€è§†è§’,è·¨æ–‡æ¡£</td>
                                <td class="p-3">ç²¾ç¡®èšç„¦,é«˜æ•ˆ</td>
                                <td class="p-3">å…¼é¡¾å¹¿åº¦å’Œæ·±åº¦</td>
                            </tr>
                            <tr class="bg-white/5">
                                <td class="p-3 font-bold">ä¾‹å­</td>
                                <td class="p-3">"è¿™ä¸ªé¢†åŸŸçš„ä¸»è¦ä¸»é¢˜?"</td>
                                <td class="p-3">"Aliceå…·ä½“åšäº†ä»€ä¹ˆ?"</td>
                                <td class="p-3">"Aliceçš„å·¥ä½œå¦‚ä½•å½±å“æ•´ä¸ªå›¢é˜Ÿ?"</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="concept-card">

            <div class="animation-container">
                <div class="animation-title">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"/>
                    </svg>
                    åŠ¨ç”»: GraphRAGæ¶æ„æµç¨‹
                </div>
                <div id="graphrag-architecture-animation" class="animation-canvas" style="min-height: 600px;"></div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="playArchitectureAnimation()">â–¶ æ’­æ”¾æ¶æ„æµç¨‹</button>
                    <button class="btn btn-secondary" onclick="resetArchitectureAnimation()">â†º é‡ç½®</button>
                    <button class="btn btn-secondary" onclick="showNextLayer()">â†’ ä¸‹ä¸€å±‚</button>
                </div>
                <div id="architecture-info" class="info-panel">
                    <div class="text-green-400 font-bold mb-2">å½“å‰æ­¥éª¤:</div>
                    <div id="architecture-description" class="text-gray-300">
                        ç‚¹å‡»"æ’­æ”¾æ¶æ„æµç¨‹"æŸ¥çœ‹GraphRAGçš„å®Œæ•´æ¶æ„
                    </div>
                </div>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">GraphRAGçš„ä¸‰å±‚æ¶æ„</h3>
                <div class="space-y-4">
                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-blue-500">
                        <div class="flex items-center gap-3 mb-2">
                            <span class="text-2xl">ğŸ“Š</span>
                            <div>
                                <div class="text-lg font-bold text-blue-400">ç¬¬1å±‚: çŸ¥è¯†å›¾è°±å±‚</div>
                                <div class="text-sm text-gray-400">Knowledge Graph Layer</div>
                            </div>
                        </div>
                        <ul class="text-gray-300 text-sm space-y-1 ml-9">
                            <li>â€¢ <strong>å®ä½“æŠ½å–</strong>: NERè¯†åˆ«äººåã€åœ°åã€ç»„ç»‡ç­‰</li>
                            <li>â€¢ <strong>å…³ç³»æŠ½å–</strong>: REè¯†åˆ«å®ä½“é—´å…³ç³»</li>
                            <li>â€¢ <strong>å›¾å­˜å‚¨</strong>: Neo4jã€NebulaGraphç­‰å›¾æ•°æ®åº“</li>
                            <li>â€¢ <strong>ç¤ºä¾‹</strong>: (åŸƒéš†Â·é©¬æ–¯å…‹) -[CEO_of]-> (ç‰¹æ–¯æ‹‰)</li>
                        </ul>
                    </div>

                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-purple-500">
                        <div class="flex items-center gap-3 mb-2">
                            <span class="text-2xl">ğŸ”</span>
                            <div>
                                <div class="text-lg font-bold text-purple-400">ç¬¬2å±‚: æ£€ç´¢å±‚</div>
                                <div class="text-sm text-gray-400">Retrieval Layer</div>
                            </div>
                        </div>
                        <ul class="text-gray-300 text-sm space-y-1 ml-9">
                            <li>â€¢ <strong>å‘é‡æ£€ç´¢</strong>: è¯­ä¹‰ç›¸ä¼¼åº¦åŒ¹é…</li>
                            <li>â€¢ <strong>å›¾éå†</strong>: å¤šè·³å…³ç³»æŸ¥è¯¢</li>
                            <li>â€¢ <strong>æ··åˆæ£€ç´¢</strong>: ç»“åˆå‘é‡å’Œå›¾ç»“æ„</li>
                            <li>â€¢ <strong>ç¤ºä¾‹</strong>: æ‰¾åˆ°ä¸"é©¬æ–¯å…‹"ç›¸å…³çš„æ‰€æœ‰å…¬å¸èŠ‚ç‚¹</li>
                        </ul>
                    </div>

                    <div class="bg-black/30 p-4 rounded-lg border-l-4 border-green-500">
                        <div class="flex items-center gap-3 mb-2">
                            <span class="text-2xl">ğŸ¤–</span>
                            <div>
                                <div class="text-lg font-bold text-green-400">ç¬¬3å±‚: LLMç”Ÿæˆå±‚</div>
                                <div class="text-sm text-gray-400">LLM Generation Layer</div>
                            </div>
                        </div>
                        <ul class="text-gray-300 text-sm space-y-1 ml-9">
                            <li>â€¢ <strong>ä¸Šä¸‹æ–‡æ„å»º</strong>: æ•´åˆæ£€ç´¢ç»“æœå’Œå…³ç³»è·¯å¾„</li>
                            <li>â€¢ <strong>Promptå·¥ç¨‹</strong>: è®¾è®¡ç»“æ„åŒ–æç¤ºè¯</li>
                            <li>â€¢ <strong>ç­”æ¡ˆç”Ÿæˆ</strong>: LLMç”Ÿæˆæœ€ç»ˆå›ç­”</li>
                            <li>â€¢ <strong>å¯è§£é‡Šæ€§</strong>: å±•ç¤ºæ¨ç†è·¯å¾„å’Œæ¥æº</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Chapter 3: å®ç°æ–¹æ¡ˆ -->
        <div class="glass-card">
            <h2 class="section-title">3. GraphRAGå®ç°æ–¹æ¡ˆ</h2>

            <div class="concept-card">
                <h3 class="text-xl font-bold text-blue-300 mb-3">æŠ€æœ¯æ ˆé€‰æ‹©</h3>
                <div class="grid md:grid-cols-3 gap-4 text-center">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="text-3xl mb-2">ğŸ¦œ</div>
                        <div class="font-bold text-blue-400">LangChain</div>
                        <div class="text-sm text-gray-400">æ¡†æ¶å±‚</div>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="text-3xl mb-2">ğŸ—„ï¸</div>
                        <div class="font-bold text-green-400">Neo4j</div>
                        <div class="text-sm text-gray-400">å›¾æ•°æ®åº“</div>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="text-3xl mb-2">ğŸ¤—</div>
                        <div class="font-bold text-purple-400">LLM API</div>
                        <div class="text-sm text-gray-400">ç”Ÿæˆæ¨¡å‹</div>
                    </div>
                </div>
            </div>

            <div class="animation-container">
                <div class="animation-title">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M10 20l4-16m4 4l4 4-4 4M6 16l-4-4 4-4"/>
                    </svg>
                    åŠ¨ç”»: æ–‡æ¡£åˆ°å›¾è°±çš„æ„å»ºæµç¨‹
                </div>
                <div id="pipeline-animation" class="animation-canvas"></div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="playPipelineAnimation()">â–¶ æ’­æ”¾æµç¨‹</button>
                    <button class="btn btn-secondary" onclick="resetPipelineAnimation()">â†º é‡ç½®</button>
                </div>
                <div id="pipeline-info" class="info-panel">
                    <div class="text-purple-400 font-bold mb-2">æµç¨‹è¯´æ˜:</div>
                    <div id="pipeline-description" class="text-gray-300">
                        ç‚¹å‡»"æ’­æ”¾æµç¨‹"æŸ¥çœ‹å¦‚ä½•ä»æ–‡æ¡£æ„å»ºçŸ¥è¯†å›¾è°±
                    </div>
                </div>
            </div>

            <div class="code-block">
                <div class="text-blue-400 font-bold mb-3">ç¤ºä¾‹ 1: ä½¿ç”¨LangChain + Neo4jæ„å»ºGraphRAG</div>
                <pre><span class="comment"># å®‰è£…ä¾èµ–</span>
<span class="comment"># pip install langchain langchain-openai neo4j</span>

<span class="keyword">from</span> langchain.graphs <span class="keyword">import</span> Neo4jGraph
<span class="keyword">from</span> langchain.chains <span class="keyword">import</span> GraphRAGChain
<span class="keyword">from</span> langchain_openai <span class="keyword">import</span> ChatOpenAI, OpenAIEmbeddings
<span class="keyword">from</span> langchain_community.graphs <span class="keyword">import</span> Neo4jGraph

<span class="comment"># 1. è¿æ¥Neo4jå›¾æ•°æ®åº“</span>
graph = Neo4jGraph(
    url=<span class="string">"bolt://localhost:7687"</span>,
    username=<span class="string">"neo4j"</span>,
    password=<span class="string">"password"</span>
)

<span class="comment"># 2. åˆå§‹åŒ–LLMå’ŒåµŒå…¥æ¨¡å‹</span>
llm = ChatOpenAI(temperature=<span class="number">0</span>, model=<span class="string">"gpt-4"</span>)
embeddings = OpenAIEmbeddings()

<span class="comment"># 3. åˆ›å»ºGraphRAGé“¾</span>
<span class="keyword">from</span> langchain.chains <span class="keyword">import</span> GraphRAGChain

rag_chain = GraphRAGChain(
    llm=llm,
    graph=graph,
    embeddings=embeddings,
    verbose=<span class="keyword">True</span>
)

<span class="comment"># 4. æ·»åŠ æ–‡æ¡£åˆ°å›¾è°±</span>
documents = [
    <span class="string">"åŸƒéš†Â·é©¬æ–¯å…‹æ˜¯ç‰¹æ–¯æ‹‰çš„CEOï¼Œåˆ›ç«‹äº2003å¹´"</span>,
    <span class="string">"é©¬æ–¯å…‹è¿˜åˆ›ç«‹äº†SpaceXï¼Œä¸€å®¶èˆªå¤©å…¬å¸"</span>,
    <span class="string">"ç‰¹æ–¯æ‹‰å’ŒSpaceXåœ¨æŠ€æœ¯ä¸Šæœ‰åˆä½œå…³ç³»"</span>
]

<span class="comment"># ä½¿ç”¨LLMæŠ½å–å®ä½“å’Œå…³ç³»</span>
<span class="keyword">from</span> langchain_experimental.graph_transformers <span class="keyword">import</span> LLMGraphTransformer

graph_transformer = LLMGraphTransformer(llm=llm)
graph_documents = graph_transformer.convert_to_graph_documents(documents)

<span class="comment"># å°†å›¾æ–‡æ¡£æ·»åŠ åˆ°Neo4j</span>
graph.add_graph_documents(graph_documents)

<span class="comment"># 5. æŸ¥è¯¢</span>
question = <span class="string">"åŸƒéš†Â·é©¬æ–¯å…‹çš„å…¬å¸ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»?"</span>
answer = rag_chain.run(question)

<span class="function">print</span>(<span class="string">f"é—®é¢˜: {question}"</span>)
<span class="function">print</span>(<span class="string">f"ç­”æ¡ˆ: {answer}"</span>)
<span class="function">print</span>(<span class="string">f"æ¨ç†è·¯å¾„: {rag_chain.get_reasoning_path()}"</span>)</pre>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">å…³é”®å®ç°æ­¥éª¤</h3>
                <div class="space-y-3">
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">1ï¸âƒ£</span>
                        <div>
                            <div class="font-bold text-blue-400">æ–‡æ¡£é¢„å¤„ç†</div>
                            <div class="text-sm text-gray-400">åˆ†è¯ã€å¥å­åˆ†å‰²ã€å®ä½“è¯†åˆ«(NER)</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">2ï¸âƒ£</span>
                        <div>
                            <div class="font-bold text-green-400">å®ä½“å…³ç³»æŠ½å–</div>
                            <div class="text-sm text-gray-400">ä½¿ç”¨LLMæŠ½å–(ä¸»è¯­, è°“è¯­, å®¾è¯­)ä¸‰å…ƒç»„</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">3ï¸âƒ£</span>
                        <div>
                            <div class="font-bold text-purple-400">å›¾è°±æ„å»º</div>
                            <div class="text-sm text-gray-400">å°†ä¸‰å…ƒç»„å­˜å…¥Neo4jï¼Œåˆ›å»ºèŠ‚ç‚¹å’Œè¾¹</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">4ï¸âƒ£</span>
                        <div>
                            <div class="font-bold text-yellow-400">å‘é‡åŒ–</div>
                            <div class="text-sm text-gray-400">ä¸ºå®ä½“å’Œæ–‡æ¡£ç”Ÿæˆå‘é‡åµŒå…¥</div>
                        </div>
                    </div>
                    <div class="flex items-start gap-3">
                        <span class="text-2xl">5ï¸âƒ£</span>
                        <div>
                            <div class="font-bold text-pink-400">æ£€ç´¢ä¸ç”Ÿæˆ</div>
                            <div class="text-sm text-gray-400">æ··åˆæ£€ç´¢ + LLMç”Ÿæˆç­”æ¡ˆ</div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="code-block">
                <div class="text-blue-400 font-bold mb-3">ç¤ºä¾‹ 2: æ‰‹åŠ¨æ„å»ºå›¾è°±æŸ¥è¯¢</div>
                <pre><span class="comment"># ä½¿ç”¨CypheræŸ¥è¯¢è¯­è¨€ç›´æ¥æ“ä½œå›¾è°±</span>

<span class="comment"># æŸ¥è¯¢åŸƒéš†Â·é©¬æ–¯å…‹ç›¸å…³çš„æ‰€æœ‰å…¬å¸</span>
cypher_query = <span class="string">"""
MATCH (p:Person {name: 'åŸƒéš†Â·é©¬æ–¯å…‹'})-[:CEO_of|FOUNDER_OF]->(c:Company)
RETURN p.name AS person, c.name AS company, c.industry AS industry
"""</span>

result = graph.query(cypher_query)
<span class="function">print</span>(<span class="string">f"æ‰¾åˆ° {len(result)} å®¶å…¬å¸"</span>)

<span class="comment"># å¤šè·³æŸ¥è¯¢: æ‰¾åˆ°å…¬å¸ä¹‹é—´çš„åˆä½œå…³ç³»</span>
cypher_query2 = <span class="string">"""
MATCH (c1:Company)-[:COOPERATES_WITH]->(c2:Company)
WHERE (c1)<-[:CEO_of|FOUNDER_OF]-(:Person {name: 'åŸƒéš†Â·é©¬æ–¯å…‹'})
RETURN c1.name, c2.name, c2.industry
"""</span>

result2 = graph.query(cypher_query2)</pre>
            </div>

            <div class="code-block">
                <div class="text-blue-400 font-bold mb-3">ç¤ºä¾‹ 3: è‡ªå®šä¹‰GraphRAGæ£€ç´¢å™¨</div>
                <pre><span class="keyword">from</span> typing <span class="keyword">import</span> List, Dict, Any
<span class="keyword">from</span> langchain.schema <span class="keyword">import</span> Document

<span class="keyword">class</span> <span class="function">GraphRAGRetriever</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, graph: Neo4jGraph, llm: ChatOpenAI):
        self.graph = graph
        self.llm = llm

    <span class="keyword">def</span> <span class="function">retrieve</span>(self, query: str, k: int = <span class="number">5</span>) -> List[Document]:
        <span class="string">"""
        æ··åˆæ£€ç´¢: å‘é‡æ£€ç´¢ + å›¾éå†
        """</span>

        <span class="comment"># Step 1: å®ä½“è¯†åˆ«</span>
        entities = self._extract_entities(query)

        <span class="comment"># Step 2: å›¾è°±æ£€ç´¢ (æ‰¾åˆ°ç›¸å…³èŠ‚ç‚¹)</span>
        graph_contexts = []
        <span class="keyword">for</span> entity <span class="keyword">in</span> entities:
            cypher = <span class="string">f"""
            MATCH (n {{name: '{entity}'}})-[r]-(m)
            RETURN n.name, type(r), m.name, r.description
            LIMIT {k}
            """</span>
            result = self.graph.query(cypher)
            graph_contexts.extend(result)

        <span class="comment"># Step 3: å‘é‡æ£€ç´¢ (è¯­ä¹‰ç›¸ä¼¼åº¦)</span>
        <span class="comment"># è¿™é‡Œä½¿ç”¨å‘é‡æ•°æ®åº“æŸ¥æ‰¾ç›¸ä¼¼æ–‡æ¡£</span>
        vector_results = self._vector_search(query, k=k)

        <span class="comment"># Step 4: åˆå¹¶ç»“æœ</span>
        combined_contexts = {
            <span class="string">"graph"</span>: graph_contexts,
            <span class="string">"vector"</span>: vector_results
        }

        <span class="keyword">return</span> self._format_contexts(combined_contexts)

    <span class="keyword">def</span> <span class="function">_extract_entities</span>(self, query: str) -> List[str]:
        <span class="string">"""ä½¿ç”¨LLMä»æŸ¥è¯¢ä¸­æŠ½å–å®ä½“"""</span>
        prompt = <span class="string">f"""ä»ä»¥ä¸‹æŸ¥è¯¢ä¸­æå–å®ä½“(äººåã€å…¬å¸åã€åœ°åç­‰):
        æŸ¥è¯¢: {query}

        åªè¿”å›å®ä½“åˆ—è¡¨ï¼Œç”¨é€—å·åˆ†éš”ã€‚
        """</span>
        response = self.llm.predict(prompt)
        <span class="keyword">return</span> [e.strip() <span class="keyword">for</span> e <span class="keyword">in</span> response.split(<span class="string">","</span>)]

    <span class="keyword">def</span> <span class="function">_vector_search</span>(self, query: str, k: int) -> List[Document]:
        <span class="string">"""å‘é‡æ£€ç´¢"""</span>
        <span class="comment"># ä½¿ç”¨å‘é‡æ•°æ®åº“(å¦‚Pineconeã€Weaviate)</span>
        <span class="keyword">pass</span>

    <span class="keyword">def</span> <span class="function">_format_contexts</span>(self, contexts: Dict) -> List[Document]:
        <span class="string">"""æ ¼å¼åŒ–ä¸ºLangChain Documentå¯¹è±¡"""</span>
        docs = []
        <span class="keyword">for</span> ctx <span class="keyword">in</span> contexts[<span class="string">"graph"</span>]:
            doc = Document(
                page_content=f"{ctx['n.name']} - {ctx['type(r)']} - {ctx['m.name']}",
                metadata={<span class="string">"source"</span>: <span class="string">"knowledge_graph"</span>}
            )
            docs.append(doc)
        <span class="keyword">return</span> docs

<span class="comment"># ä½¿ç”¨è‡ªå®šä¹‰æ£€ç´¢å™¨</span>
retriever = GraphRAGRetriever(graph=graph, llm=llm)
contexts = retriever.retrieve(<span class="string">"é©¬æ–¯å…‹çš„å…¬å¸ä¹‹é—´æœ‰ä»€ä¹ˆå…³ç³»?"</span>)</pre>
            </div>
        </div>

        <!-- Chapter 4: æ£€ç´¢ç­–ç•¥ -->
        <div class="glass-card">
            <h2 class="section-title">4. GraphRAGæ£€ç´¢ç­–ç•¥</h2>

            <div class="concept-card">
                <h3 class="text-xl font-bold text-blue-300 mb-3">ä¸‰ç§æ ¸å¿ƒæ£€ç´¢ç­–ç•¥</h3>
                <p class="text-gray-300 leading-relaxed">
                    GraphRAGæ”¯æŒå¤šç§æ£€ç´¢ç­–ç•¥ï¼Œæ ¹æ®é—®é¢˜ç±»å‹é€‰æ‹©æœ€åˆé€‚çš„æ–¹æ³•ã€‚
                </p>
            </div>

            <div class="animation-container">
                <div class="animation-title">
                    <svg class="w-6 h-6" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"/>
                    </svg>
                    åŠ¨ç”»: æ£€ç´¢ç­–ç•¥å¯¹æ¯”
                </div>
                <div id="strategy-animation" class="animation-canvas" style="min-height: 500px;"></div>
                <div class="controls">
                    <button class="btn btn-primary" onclick="playStrategyAnimation()">â–¶ æ’­æ”¾ç­–ç•¥å¯¹æ¯”</button>
                    <button class="btn btn-secondary" onclick="showGlobalStrategy()">å…¨å±€æ£€ç´¢</button>
                    <button class="btn btn-secondary" onclick="showLocalStrategy()">å±€éƒ¨æ£€ç´¢</button>
                    <button class="btn btn-secondary" onclick="showHybridStrategy()">æ··åˆæ£€ç´¢</button>
                </div>
                <div id="strategy-info" class="info-panel">
                    <div class="text-purple-400 font-bold mb-2">å½“å‰ç­–ç•¥:</div>
                    <div id="strategy-description" class="text-gray-300">
                        ç‚¹å‡»æŒ‰é’®æŸ¥çœ‹ä¸åŒæ£€ç´¢ç­–ç•¥çš„å·¥ä½œåŸç†
                    </div>
                </div>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">ç­–ç•¥å¯¹æ¯”è¡¨</h3>
                <div class="overflow-x-auto">
                    <table class="comparison-table">
                        <thead>
                            <tr>
                                <th>ç­–ç•¥</th>
                                <th>åŸç†</th>
                                <th>é€‚ç”¨åœºæ™¯</th>
                                <th>ä¼˜ç‚¹</th>
                                <th>ç¼ºç‚¹</th>
                            </tr>
                        </thead>
                        <tbody class="text-gray-300">
                            <tr>
                                <td class="font-bold text-blue-400">å…¨å±€æ£€ç´¢<br><span class="text-xs">Global Retrieval</span></td>
                                <td>å¯¹æ•´ä¸ªå›¾è°±è¿›è¡Œç¤¾åŒºæ£€æµ‹ï¼Œæå–å…¨å±€å…³é”®å®ä½“å’Œå…³ç³»</td>
                                <td>æ€»ç»“æ€§é—®é¢˜ã€å…¨å±€ç†è§£</td>
                                <td>æ•æ‰å®è§‚ç»“æ„ã€é¿å…é—æ¼å…³é”®ä¿¡æ¯</td>
                                <td>è®¡ç®—æˆæœ¬é«˜ã€å¯èƒ½è¿‡åº¦æ¦‚æ‹¬</td>
                            </tr>
                            <tr>
                                <td class="font-bold text-green-400">å±€éƒ¨æ£€ç´¢<br><span class="text-xs">Local Retrieval</span></td>
                                <td>ä»æŸ¥è¯¢å®ä½“å‡ºå‘ï¼Œè¿›è¡Œå¤šè·³å›¾éå†</td>
                                <td>å…·ä½“å…³ç³»ã€è·¯å¾„æŸ¥è¯¢</td>
                                <td>å¿«é€Ÿã€ç²¾ç¡®å®šä½ã€å¯è§£é‡Šæ€§å¼º</td>
                                <td>å¯èƒ½é”™è¿‡è¿œå¤„ç›¸å…³ä¿¡æ¯</td>
                            </tr>
                            <tr>
                                <td class="font-bold text-purple-400">æ··åˆæ£€ç´¢<br><span class="text-xs">Hybrid Retrieval</span></td>
                                <td>ç»“åˆå‘é‡æ£€ç´¢ + å›¾éå† + å…¨å±€æ‘˜è¦</td>
                                <td>å¤æ‚é—®é¢˜ã€å¤šå±‚çº§æŸ¥è¯¢</td>
                                <td>å¹³è¡¡ç²¾åº¦å’Œå¬å›ç‡ã€é€‚åº”æ€§å¼º</td>
                                <td>å®ç°å¤æ‚ã€éœ€è¦è°ƒå‚</td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>

            <div class="code-block">
                <div class="text-blue-400 font-bold mb-3">ç¤ºä¾‹ 4: å®ç°å±€éƒ¨æ£€ç´¢ (å¤šè·³æŸ¥è¯¢)</div>
                <pre><span class="keyword">from</span> typing <span class="keyword">import</span> List, Tuple

<span class="keyword">class</span> <span class="function">LocalRetriever</span>:
    <span class="keyword">def</span> <span class="function">__init__</span>(self, graph: Neo4jGraph, max_hops: int = <span class="number">3</span>):
        self.graph = graph
        self.max_hops = max_hops

    <span class="keyword">def</span> <span class="function">multi_hop_retrieve</span>(
        self,
        start_entity: str,
        relation_types: List[str] = <span class="keyword">None</span>
    ) -> List[Dict]:
        <span class="string">"""
        å¤šè·³æ£€ç´¢: ä»èµ·å§‹èŠ‚ç‚¹å‡ºå‘ï¼Œéå†æŒ‡å®šæ·±åº¦çš„é‚»å±…
        """</span>

        <span class="comment"># æ„å»ºCypheræŸ¥è¯¢</span>
        hop_pattern = <span class="string">""</span>
        <span class="keyword">for</span> i <span class="keyword">in</span> range(self.max_hops):
            hop_pattern += <span class="string">"-[r"</span> + str(i+<span class="number">1</span>) + <span class="string">"]-(n"</span> + str(i+<span class="number">1</span>) + <span class="string">")"</span>

        <span class="keyword">if</span> relation_types:
            rel_filter = <span class="string">"|"</span>.join(relation_types)
            query = <span class="string">f"""
            MATCH p = (start {{name: '{start_entity}'}}){hop_pattern}
            WHERE ALL(r IN relationships(p) WHERE type(r) IN ['{rel_filter}'])
            RETURN p,
                   [node IN nodes(p) | node.name] AS node_names,
                   [rel IN relationships(p) | type(rel)] AS rel_types
            """</span>
        <span class="keyword">else</span>:
            query = <span class="string">f"""
            MATCH p = (start {{name: '{start_entity}'}}){hop_pattern}
            RETURN p,
                   [node IN nodes(p) | node.name] AS node_names,
                   [rel IN relationships(p) | type(rel)] AS rel_types
            """</span>

        result = self.graph.query(query)
        <span class="keyword">return</span> self._format_paths(result)

    <span class="keyword">def</span> <span class="function">_format_paths</span>(self, paths: List) -> List[Dict]:
        <span class="string">"""æ ¼å¼åŒ–è·¯å¾„ä¸ºå¯è¯»æ ¼å¼"""</span>
        formatted = []
        <span class="keyword">for</span> path <span class="keyword">in</span> paths:
            formatted.append({
                <span class="string">"path"</span>: <span class="string">" -> "</span>.join(path[<span class="string">'node_names'</span>]),
                <span class="string">"relations"</span>: path[<span class="string">'rel_types'</span>],
                <span class="string">"hops"</span>: len(path[<span class="string">'rel_types'</span>])
            })
        <span class="keyword">return</span> formatted

<span class="comment"># ä½¿ç”¨å±€éƒ¨æ£€ç´¢å™¨</span>
local_retriever = LocalRetriever(graph, max_hops=<span class="number">2</span>)

<span class="comment"># æŸ¥è¯¢: é©¬æ–¯å…‹ -> CEO_of -> å…¬å¸ -> COOPERATES_WITH -> ?</span>
paths = local_retriever.multi_hop_retrieve(
    start_entity=<span class="string">"åŸƒéš†Â·é©¬æ–¯å…‹"</span>,
    relation_types=[<span class="string">"CEO_of"</span>, <span class="string">"FOUNDER_OF"</span>, <span class="string">"COOPERATES_WITH"</span>]
)

<span class="keyword">for</span> path <span class="keyword">in</span> paths:
    <span class="function">print</span>(<span class="string">f"è·¯å¾„: {path['path']}"</span>)
    <span class="function">print</span>(<span class="string">f"å…³ç³»: {path['relations']}"</span>)
    <span class="function">print</span>(<span class="string">f"è·³æ•°: {path['hops']}"</span>)
    <span class="function">print</span>(<span class="string">"---"</span>)</pre>
            </div>

            <div class="code-block">
                <div class="text-blue-400 font-bold mb-3">ç¤ºä¾‹ 5: å®ç°æ··åˆæ£€ç´¢</div>
                <pre><span class="keyword">from</span> sklearn.metrics.pairwise <span class="keyword">import</span> cosine_similarity
<span class="keyword">import</span> numpy <span class="keyword">as</span> np

<span class="keyword">class</span> <span class="function">HybridRetriever</span>:
    <span class="keyword">def</span> <span class="function">__init__(
        self,
        graph: Neo4jGraph,
        vector_store,
        graph_weight: float = <span class="number">0.5</span>
    </span>:
        self.graph = graph
        self.vector_store = vector_store
        self.graph_weight = graph_weight  <span class="comment"># å›¾æ£€ç´¢æƒé‡</span>
        self.vector_weight = <span class="number">1.0</span> - graph_weight  <span class="comment"># å‘é‡æ£€ç´¢æƒé‡</span>

    <span class="keyword">def</span> <span class="function">retrieve</span>(
        self,
        query: str,
        query_vector: np.ndarray,
        top_k: int = <span class="number">10</span>
    ) -> List[Document]:
        <span class="string">"""
        æ··åˆæ£€ç´¢: ç»“åˆå‘é‡ç›¸ä¼¼åº¦ + å›¾ç»“æ„ç›¸å…³æ€§
        """</span>

        <span class="comment"># Step 1: å‘é‡æ£€ç´¢</span>
        vector_results = self.vector_store.similarity_search_by_vector(
            query_vector,
            k=top_k * <span class="number">2</span>  <span class="comment"># è·å–æ›´å¤šå€™é€‰</span>
        )

        <span class="comment"># Step 2: å›¾è°±æ£€ç´¢</span>
        entities = self._extract_entities(query)
        graph_results = []
        <span class="keyword">for</span> entity <span class="keyword">in</span> entities:
            cypher = <span class="string">f"""
            MATCH (n {{name: '{entity}'}})-[r]-(m)
            RETURN n.name, type(r), m.name, m.description
            """</span>
            result = self.graph.query(cypher)
            graph_results.extend(result)

        <span class="comment"># Step 3: èåˆæ‰“åˆ†</span>
        scored_results = self._rerank(
            vector_results,
            graph_results,
            query_vector
        )

        <span class="comment"># Step 4: è¿”å›top-k</span>
        <span class="keyword">return</span> scored_results[:top_k]

    <span class="keyword">def</span> <span class="function">_rerank</span>(
        self,
        vector_results: List,
        graph_results: List,
        query_vector: np.ndarray
    ) -> List:
        <span class="string">"""é‡æ–°æ’åº: ç»“åˆå‘é‡ç›¸ä¼¼åº¦å’Œå›¾ç›¸å…³æ€§"""</span>

        scores = []
        <span class="keyword">for</span> doc <span class="keyword">in</span> vector_results:
            <span class="comment"># å‘é‡ç›¸ä¼¼åº¦åˆ†æ•°</span>
            vec_score = cosine_similarity(
                query_vector.reshape(<span class="number">1</span>, -<span class="number">1</span>),
                doc.embedding.reshape(<span class="number">1</span>, -<span class="number">1</span>)
            )[<span class="number">0</span>][<span class="number">0</span>]

            <span class="comment"># å›¾ç›¸å…³æ€§åˆ†æ•°</span>
            graph_score = self._calculate_graph_relevance(
                doc, graph_results
            )

            <span class="comment"># åŠ æƒèåˆ</span>
            final_score = (
                self.vector_weight * vec_score +
                self.graph_weight * graph_score
            )

            scores.append({
                <span class="string">'doc'</span>: doc,
                <span class="string">'score'</span>: final_score,
                <span class="string">'vec_score'</span>: vec_score,
                <span class="string">'graph_score'</span>: graph_score
            })

        <span class="comment"># æŒ‰æœ€ç»ˆåˆ†æ•°æ’åº</span>
        scores.sort(key=<span class="keyword">lambda</span> x: x[<span class="string">'score'</span>], reverse=<span class="keyword">True</span>)
        <span class="keyword">return</span> [s[<span class="string">'doc'</span>] <span class="keyword">for</span> s <span class="keyword">in</span> scores]

    <span class="keyword">def</span> <span class="function">_calculate_graph_relevance</span>(
        self,
        doc,
        graph_results: List
    ) -> float:
        <span class="string">"""è®¡ç®—æ–‡æ¡£ä¸å›¾è°±ç»“æœçš„ç›¸å…³æ€§"""</span>
        <span class="comment"># ç®€åŒ–ç‰ˆ: å¦‚æœæ–‡æ¡£åŒ…å«å›¾è°±ä¸­çš„å®ä½“ï¼ŒåŠ åˆ†</span>
        score = <span class="number">0.0</span>
        <span class="keyword">for</span> result <span class="keyword">in</span> graph_results:
            <span class="keyword">if</span> result[<span class="string">'n.name'</span>] <span class="keyword">in</span> doc.page_content:
                score += <span class="number">0.3</span>
            <span class="keyword">if</span> result[<span class="string">'m.name'</span>] <span class="keyword">in</span> doc.page_content:
                score += <span class="number">0.3</span>
        <span class="keyword">return</span> min(score, <span class="number">1.0</span>)</pre>
            </div>
        </div>

        <!-- Chapter 5: å®é™…åº”ç”¨æ¡ˆä¾‹ -->
        <div class="glass-card">
            <h2 class="section-title">5. å®é™…åº”ç”¨æ¡ˆä¾‹</h2>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">æ¡ˆä¾‹1: ä¼ä¸šçŸ¥è¯†åº“é—®ç­”ç³»ç»Ÿ</h3>
                <div class="bg-black/30 p-4 rounded-lg mb-4">
                    <div class="font-bold text-blue-400 mb-2">åœºæ™¯æè¿°</div>
                    <p class="text-gray-300 text-sm">
                        æŸå¤§å‹ä¼ä¸šæœ‰æ•°åƒä»½æ–‡æ¡£(PDFã€Wordã€Wiki)ï¼Œå‘˜å·¥éœ€è¦å¿«é€Ÿæ‰¾åˆ°ç›¸å…³ä¿¡æ¯å¹¶ç†è§£å¤æ‚å…³ç³»ã€‚
                    </p>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-red-400 mb-2">âŒ ä¼ ç»ŸRAGçš„é—®é¢˜</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ æ— æ³•ç†è§£é¡¹ç›®é—´ä¾èµ–å…³ç³»</li>
                            <li>â€¢ éš¾ä»¥å›ç­”"è°è´Ÿè´£XXé¡¹ç›®"çš„è·¨æ–‡æ¡£é—®é¢˜</li>
                            <li>â€¢ æ£€ç´¢ç»“æœç¢ç‰‡åŒ–ï¼Œéœ€è¦äººå·¥æ•´åˆ</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-green-400 mb-2">âœ… GraphRAGçš„è§£å†³æ–¹æ¡ˆ</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ æ„å»ºé¡¹ç›®-äººå‘˜-æŠ€æœ¯çŸ¥è¯†å›¾è°±</li>
                            <li>â€¢ æ”¯æŒå¤šè·³æŸ¥è¯¢: é¡¹ç›® -> è´Ÿè´£äºº -> ç›¸å…³é¡¹ç›®</li>
                            <li>â€¢ æä¾›å®Œæ•´çš„æ¨ç†è·¯å¾„å’Œæ¥æº</li>
                        </ul>
                    </div>
                </div>

                <div class="mt-4 p-4 bg-blue-500/10 rounded-lg border border-blue-500/30">
                    <div class="font-bold text-blue-400 mb-2">å®é™…æ•ˆæœ</div>
                    <ul class="text-gray-300 text-sm space-y-1">
                        <li>â€¢ æ£€ç´¢å‡†ç¡®ç‡æå‡ <span class="text-green-400 font-bold">35%</span></li>
                        <li>â€¢ å¤æ‚é—®é¢˜å›ç­”ç‡æå‡ <span class="text-green-400 font-bold">50%</span></li>
                        <li>â€¢ å‘˜å·¥æ»¡æ„åº¦æå‡ <span class="text-green-400 font-bold">40%</span></li>
                    </ul>
                </div>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">æ¡ˆä¾‹2: é‡‘èé£æ§ç³»ç»Ÿ</h3>
                <div class="bg-black/30 p-4 rounded-lg mb-4">
                    <div class="font-bold text-blue-400 mb-2">åœºæ™¯æè¿°</div>
                    <p class="text-gray-300 text-sm">
                        é“¶è¡Œéœ€è¦è¯†åˆ«æ½œåœ¨çš„é£é™©ç½‘ç»œï¼Œå¦‚å…³è”ä¼ä¸šã€æ‹…ä¿åœˆã€èµ„é‡‘æµå‘ç­‰ã€‚
                    </p>
                </div>

                <div class="mb-4">
                    <div class="font-bold text-purple-400 mb-2">å…¸å‹æŸ¥è¯¢</div>
                    <div class="bg-black/30 p-3 rounded-lg font-mono text-sm text-gray-300">
                        "å…¬å¸Aå’Œå…¬å¸Bä¹‹é—´æœ‰ä»€ä¹ˆéšå¼å…³è”?æ˜¯å¦å­˜åœ¨é£é™©ä¼ å¯¼è·¯å¾„?"
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-red-400 mb-2">âŒ ä¼ ç»Ÿæ–¹æ³•</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ åªèƒ½æŸ¥è¯¢å•ä¸€ä¼ä¸šçš„ç›´æ¥å…³ç³»</li>
                            <li>â€¢ éš¾ä»¥å‘ç°2-3å±‚ä»¥ä¸Šçš„éšæ€§å…³è”</li>
                            <li>â€¢ ä¾èµ–ä¸“å®¶ç»éªŒï¼Œæ˜“æ¼æŠ¥</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-green-400 mb-2">âœ… GraphRAGæ–¹æ¡ˆ</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ å›¾è°±éå†å‘ç°å¤šè·³å…³è”è·¯å¾„</li>
                            <li>â€¢ è¯†åˆ«å…±åŒè‚¡ä¸œã€æ‹…ä¿é“¾æ¡</li>
                            <li>â€¢ LLMç”Ÿæˆé£é™©åˆ†ææŠ¥å‘Š</li>
                        </ul>
                    </div>
                </div>

                <div class="mt-4 p-4 bg-green-500/10 rounded-lg border border-green-500/30">
                    <div class="font-bold text-green-400 mb-2">æŠ€æœ¯å®ç°</div>
                    <ul class="text-gray-300 text-sm space-y-1">
                        <li>â€¢ <strong>å›¾è°±å±‚</strong>: ä¼ä¸š-è‚¡ä¸œ-æ‹…ä¿-äº¤æ˜“å…³ç³»å›¾è°±</li>
                        <li>â€¢ <strong>ç®—æ³•</strong>: PageRankè¯†åˆ«å…³é”®èŠ‚ç‚¹ï¼ŒLouvainå‘ç°ç¤¾åŒº</li>
                        <li>â€¢ <strong>LLM</strong>: ç”Ÿæˆé£é™©è§£é‡Šå’Œå»ºè®®</li>
                    </ul>
                </div>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">æ¡ˆä¾‹3: åŒ»ç–—è¯Šæ–­è¾…åŠ©</h3>
                <div class="bg-black/30 p-4 rounded-lg mb-4">
                    <div class="font-bold text-blue-400 mb-2">åœºæ™¯æè¿°</div>
                    <p class="text-gray-300 text-sm">
                        åŒ»ç”Ÿéœ€è¦åŸºäºæ‚£è€…ç—‡çŠ¶ã€ç—…å²ã€åŒ»å­¦çŸ¥è¯†è¿›è¡Œè¯Šæ–­æ¨ç†ã€‚
                    </p>
                </div>

                <div class="mb-4">
                    <div class="font-bold text-purple-400 mb-2">å…¸å‹æŸ¥è¯¢</div>
                    <div class="bg-black/30 p-3 rounded-lg font-mono text-sm text-gray-300">
                        "æ‚£è€…æœ‰ç—‡çŠ¶Aå’ŒBï¼Œæœç”¨è¯ç‰©Cï¼Œå¯èƒ½çš„ç–¾ç—…æ˜¯ä»€ä¹ˆ?éœ€è¦æ³¨æ„ä»€ä¹ˆ?"
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-yellow-400 mb-2">ğŸ¥ çŸ¥è¯†å›¾è°±æ„å»º</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ ç–¾ç—… - ç—‡çŠ¶å…³ç³»</li>
                            <li>â€¢ è¯ç‰© - ç–¾ç—…æ²»ç–—å…³ç³»</li>
                            <li>â€¢ è¯ç‰© - è¯ç‰©ç›¸äº’ä½œç”¨</li>
                            <li>â€¢ ç–¾ç—… - å¹¶å‘ç—‡å…³ç³»</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-green-400 mb-2">âœ… GraphRAGä¼˜åŠ¿</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ å¤šè·³æ¨ç†: ç—‡çŠ¶ -> ç–¾ç—… -> è¯ç‰© -> å‰¯ä½œç”¨</li>
                            <li>â€¢ è§£é‡Šæ€§å¼º: å±•ç¤ºæ¨ç†è·¯å¾„</li>
                            <li>â€¢ å‡å°‘è¯¯è¯Š: æ•´åˆå¤šæºçŸ¥è¯†</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">æ¡ˆä¾‹4: æ³•å¾‹æ¡ˆä¾‹åˆ†æ</h3>
                <div class="bg-black/30 p-4 rounded-lg mb-4">
                    <div class="font-bold text-blue-400 mb-2">åœºæ™¯æè¿°</div>
                    <p class="text-gray-300 text-sm">
                        å¾‹å¸ˆéœ€è¦æŸ¥æ‰¾ç±»ä¼¼æ¡ˆä¾‹ã€æ³•æ¡å¼•ç”¨å…³ç³»ã€åˆ¤å†³è¶‹åŠ¿ç­‰ã€‚
                    </p>
                </div>

                <div class="grid md:grid-cols-3 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-purple-400 mb-2">ğŸ“Š å›¾è°±ç»“æ„</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ æ¡ˆä¾‹èŠ‚ç‚¹</li>
                            <li>â€¢ æ³•æ¡èŠ‚ç‚¹</li>
                            <li>â€¢ å¼•ç”¨å…³ç³»</li>
                            <li>â€¢ å½“äº‹äººå…³ç³»</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-green-400 mb-2">ğŸ¯ æŸ¥è¯¢èƒ½åŠ›</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ æ‰¾åˆ°å¼•ç”¨æŸæ³•æ¡çš„æ‰€æœ‰æ¡ˆä¾‹</li>
                            <li>â€¢ å‘ç°æ¡ˆä¾‹é—´çš„å¼•ç”¨é“¾</li>
                            <li>â€¢ åˆ†æåˆ¤å†³è¶‹åŠ¿å˜åŒ–</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-blue-400 mb-2">ğŸ“ˆ æ•ˆæœ</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ æ¡ˆä¾‹æ£€ç´¢é€Ÿåº¦æå‡10å€</li>
                            <li>â€¢ ç›¸å…³æ¡ˆä¾‹å¬å›ç‡æå‡40%</li>
                            <li>â€¢ è‡ªåŠ¨ç”Ÿæˆæ¡ˆæƒ…åˆ†ææŠ¥å‘Š</li>
                        </ul>
                    </div>
                </div>
            </div>

            <div class="highlight-box">
                <h3 class="text-xl font-bold text-green-300 mb-3">æ¡ˆä¾‹5: æ™ºèƒ½å®¢æœç³»ç»Ÿ</h3>
                <div class="bg-black/30 p-4 rounded-lg mb-4">
                    <div class="font-bold text-blue-400 mb-2">åœºæ™¯æè¿°</div>
                    <p class="text-gray-300 text-sm">
                        ç”µå•†å¹³å°çš„æ™ºèƒ½å®¢æœéœ€è¦ç†è§£äº§å“å…³ç³»ã€ç”¨æˆ·è´­ä¹°å†å²ã€å”®åæ”¿ç­–ç­‰ã€‚
                    </p>
                </div>

                <div class="mb-4">
                    <div class="font-bold text-purple-400 mb-2">å…¸å‹æŸ¥è¯¢</div>
                    <div class="bg-black/30 p-3 rounded-lg font-mono text-sm text-gray-300">
                        "æˆ‘ä¹°äº†æ‰‹æœºXï¼Œç°åœ¨æƒ³ä¹°è€³æœºï¼Œæœ‰ä»€ä¹ˆæ¨è?å®ƒä»¬ä¹‹é—´æœ‰ä»€ä¹ˆä¼˜æƒ ?"
                    </div>
                </div>

                <div class="grid md:grid-cols-2 gap-4">
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-pink-400 mb-2">ğŸ›’ çŸ¥è¯†å›¾è°±</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ äº§å“ - ç±»åˆ«å…³ç³»</li>
                            <li>â€¢ äº§å“ - é…ä»¶å…³ç³»</li>
                            <li>â€¢ äº§å“ - è¯„ä»·å…³ç³»</li>
                            <li>â€¢ ç”¨æˆ· - è´­ä¹°å†å²</li>
                        </ul>
                    </div>
                    <div class="bg-black/30 p-4 rounded-lg">
                        <div class="font-bold text-green-400 mb-2">âœ… GraphRAGèƒ½åŠ›</div>
                        <ul class="text-gray-300 text-sm space-y-1">
                            <li>â€¢ æ¨èç›¸å…³é…ä»¶</li>
                            <li>â€¢ è§£é‡Šäº§å“å…¼å®¹æ€§</li>
                            <li>â€¢ æ•´åˆä¼˜æƒ æ”¿ç­–</li>
                            <li>â€¢ æä¾›è´­ä¹°å»ºè®®</li>
                        </ul>
                    </div>
                </div>
            </div>
        </div>

        <!-- Summary -->
        <div class="glass-card">
            <h2 class="section-title">æ¨¡å—æ€»ç»“</h2>

            <div class="grid md:grid-cols-2 gap-4">
                <div class="concept-card">
                    <h3 class="text-xl font-bold text-green-400 mb-3">æ ¸å¿ƒè¦ç‚¹</h3>
                    <ul class="text-gray-300 space-y-2 text-sm">
                        <li>ğŸ”´ <strong>ä¼ ç»ŸRAGå±€é™</strong>: è¯­ä¹‰ç†è§£ä¸è¶³ã€å…³ç³»ç¼ºå¤±ã€æ¨ç†èƒ½åŠ›å¼±</li>
                        <li>ğŸŸ¢ <strong>GraphRAGä¼˜åŠ¿</strong>: ç»“æ„åŒ–çŸ¥è¯†ã€å¤šè·³æ¨ç†ã€å¯è§£é‡Šæ€§å¼º</li>
                        <li>ğŸ—ï¸ <strong>ä¸‰å±‚æ¶æ„</strong>: çŸ¥è¯†å›¾è°±å±‚ + æ£€ç´¢å±‚ + LLMç”Ÿæˆå±‚</li>
                        <li>ğŸ” <strong>æ£€ç´¢ç­–ç•¥</strong>: å…¨å±€ã€å±€éƒ¨ã€æ··åˆä¸‰ç§ç­–ç•¥</li>
                        <li>âš™ï¸ <strong>æŠ€æœ¯æ ˆ</strong>: LangChain + Neo4j + LLM API</li>
                    </ul>
                </div>

                <div class="concept-card">
                    <h3 class="text-xl font-bold text-blue-400 mb-3">å®è·µå»ºè®®</h3>
                    <ul class="text-gray-300 space-y-2 text-sm">
                        <li>âœ… <strong>ä»å°åšèµ·</strong>: å…ˆåœ¨ç‰¹å®šé¢†åŸŸéªŒè¯æ•ˆæœ</li>
                        <li>âœ… <strong>æ•°æ®è´¨é‡</strong>: å›¾è°±è´¨é‡å†³å®šRAGæ•ˆæœ</li>
                        <li>âœ… <strong>æ··åˆç­–ç•¥</strong>: ç»“åˆå‘é‡å’Œå›¾æ£€ç´¢</li>
                        <li>âœ… <strong>å¯è§£é‡Šæ€§</strong>: å±•ç¤ºæ¨ç†è·¯å¾„å¢å¼ºä¿¡ä»»</li>
                        <li>âœ… <strong>æŒç»­ä¼˜åŒ–</strong>: æ ¹æ®ç”¨æˆ·åé¦ˆè°ƒæ•´ç­–ç•¥</li>
                    </ul>
                </div>
            </div>

            <div class="highlight-box mt-6">
                <h3 class="text-xl font-bold text-purple-400 mb-3">å­¦ä¹ èµ„æº</h3>
                <ul class="text-gray-300 space-y-2 text-sm">
                    <li>ğŸ“š <strong>è®ºæ–‡</strong>: "GraphRAG: Unlocking LLM Discovery" (Microsoft Research)</li>
                    <li>ğŸ“š <strong>æ¡†æ¶</strong>: LangChain GraphRAG, LlamaIndex Property Graph Index</li>
                    <li>ğŸ“š <strong>å·¥å…·</strong>: Neo4j, NebulaGraph, TigerGraph</li>
                    <li>ğŸ“š <strong>ç¤¾åŒº</strong>: GraphRAG GitHub, Neo4j Discord</li>
                </ul>
            </div>

            <div class="concept-card mt-6">
                <h3 class="text-xl font-bold text-yellow-400 mb-3">ä¸‹ä¸€æ­¥å­¦ä¹ </h3>
                <p class="text-gray-300 mb-3">
                    å®Œæˆæœ¬æ¨¡å—åï¼Œå»ºè®®ç»§ç»­å­¦ä¹ :
                </p>
                <div class="space-y-2">
                    <a href="32-advanced-topics.html" class="text-blue-400 hover:text-blue-300 transition-colors inline-flex items-center gap-2">
                        æ¨¡å— 32: å‰æ²¿è¯é¢˜ä¸æœªæ¥è¶‹åŠ¿ - å¤šæ¨¡æ€çŸ¥è¯†å›¾è°±ã€ç¥ç»ç¬¦å·AI
                        <svg class="w-5 h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
                            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M13 7l5 5m0 0l-5 5m5-5H6"/>
                        </svg>
                    </a>
                </div>
            </div>
        </div>

        <!-- Footer -->
        <div class="text-center py-8 text-gray-500 text-sm">
            <p>çŸ¥è¯†å›¾è°±å­¦ä¹ å¹³å° Â· æ¨¡å— 31: GraphRAG - å›¾å¢å¼ºæ£€ç´¢ç”Ÿæˆ</p>
        </div>
    </div>

    <script>
        // ============================================================
        // åŠ¨ç”» 1: ä¼ ç»ŸRAG vs GraphRAGå¯¹æ¯”
        // ============================================================
        let comparisonSvg;
        let comparisonMode = 'both';

        function initRAGComparisonAnimation() {
            const container = document.getElementById("rag-comparison-animation");
            container.innerHTML = "";
            const width = container.clientWidth;
            const height = 500;

            comparisonSvg = d3.select("#rag-comparison-animation")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            // æ·»åŠ ç®­å¤´å®šä¹‰
            comparisonSvg.append("defs").append("marker")
                .attr("id", "arrow")
                .attr("viewBox", "0 0 10 10")
                .attr("refX", 8)
                .attr("refY", 5)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M 0 0 L 10 5 L 0 10 z")
                .attr("fill", "#6b7280");

            // æ ‡é¢˜
            comparisonSvg.append("text")
                .attr("x", width / 2)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .attr("fill", "#60a5fa")
                .attr("font-size", "20px")
                .attr("font-weight", "bold")
                .text("ä¼ ç»ŸRAG vs GraphRAG");
        }

        function showTraditionalRAG() {
            comparisonMode = 'traditional';
            drawComparison();
            document.getElementById("rag-description").innerHTML = `
                <div class="text-red-400 font-bold mb-2">ä¼ ç»ŸRAG:</div>
                <ul class="text-sm space-y-1">
                    <li>â€¢ æ–‡æ¡£ â†’ åˆ‡ç‰‡ â†’ å‘é‡åŒ–</li>
                    <li>â€¢ å‘é‡ç›¸ä¼¼åº¦æ£€ç´¢</li>
                    <li>â€¢ LLMç”Ÿæˆç­”æ¡ˆ</li>
                    <li>âŒ å…³ç³»æ–­è£‚ï¼Œéš¾ä»¥æ¨ç†</li>
                </ul>
            `;
        }

        function showGraphRAG() {
            comparisonMode = 'graph';
            drawComparison();
            document.getElementById("rag-description").innerHTML = `
                <div class="text-green-400 font-bold mb-2">GraphRAG:</div>
                <ul class="text-sm space-y-1">
                    <li>â€¢ æ–‡æ¡£ â†’ å®ä½“å…³ç³»æŠ½å– â†’ çŸ¥è¯†å›¾è°±</li>
                    <li>â€¢ å›¾éå† + å‘é‡æ£€ç´¢</li>
                    <li>â€¢ LLMç”Ÿæˆç­”æ¡ˆ + æ¨ç†è·¯å¾„</li>
                    <li>âœ… ç»“æ„åŒ–çŸ¥è¯†ï¼Œå¯è§£é‡Šæ€§å¼º</li>
                </ul>
            `;
        }

        function playRAGComparison() {
            comparisonMode = 'both';
            drawComparison();
            document.getElementById("rag-description").innerHTML = `
                <div class="text-purple-400 font-bold mb-2">å¯¹æ¯”æ¼”ç¤º:</div>
                <p class="text-sm">å·¦ä¾§ä¸ºä¼ ç»ŸRAGï¼Œå³ä¾§ä¸ºGraphRAGã€‚æ³¨æ„è§‚å¯Ÿæ•°æ®æµå’Œæ¨ç†èƒ½åŠ›çš„å·®å¼‚ã€‚</p>
            `;
        }

        function drawComparison() {
            if (!comparisonSvg) return;

            comparisonSvg.selectAll("*").remove();
            const width = comparisonSvg.attr("width");
            const height = 500;

            // é‡æ–°æ·»åŠ ç®­å¤´å®šä¹‰
            comparisonSvg.append("defs").append("marker")
                .attr("id", "arrow")
                .attr("viewBox", "0 0 10 10")
                .attr("refX", 8)
                .attr("refY", 5)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M 0 0 L 10 5 L 0 10 z")
                .attr("fill", "#6b7280");

            // æ ‡é¢˜
            comparisonSvg.append("text")
                .attr("x", width / 2)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .attr("fill", "#60a5fa")
                .attr("font-size", "20px")
                .attr("font-weight", "bold")
                .text("ä¼ ç»ŸRAG vs GraphRAG");

            if (comparisonMode === 'both' || comparisonMode === 'traditional') {
                drawTraditionalRAG(comparisonSvg, width * 0.25, 80, comparisonMode === 'both');
            }

            if (comparisonMode === 'both' || comparisonMode === 'graph') {
                drawGraphRAG(comparisonSvg, comparisonMode === 'both' ? width * 0.75 : width * 0.5, 80, comparisonMode === 'graph');
            }
        }

        function drawTraditionalRAG(svg, centerX, startY, isComparison) {
            const yOffset = isComparison ? 0 : 20;

            // æ ‡é¢˜
            svg.append("text")
                .attr("x", centerX)
                .attr("y", startY + yOffset)
                .attr("text-anchor", "middle")
                .attr("fill", "#ef4444")
                .attr("font-size", "16px")
                .attr("font-weight", "bold")
                .text("ä¼ ç»ŸRAG");

            const boxes = [
                { label: "æ–‡æ¡£", y: startY + 40 + yOffset, color: "#3b82f6" },
                { label: "åˆ‡ç‰‡", y: startY + 120 + yOffset, color: "#8b5cf6" },
                { label: "å‘é‡åŒ–", y: startY + 200 + yOffset, color: "#a855f7" },
                { label: "å‘é‡æ£€ç´¢", y: startY + 280 + yOffset, color: "#f59e0b" },
                { label: "LLMç”Ÿæˆ", y: startY + 360 + yOffset, color: "#22c55e" }
            ];

            boxes.forEach((box, i) => {
                // ç®­å¤´
                if (i > 0) {
                    svg.append("line")
                        .attr("x1", centerX)
                        .attr("y1", boxes[i - 1].y + 25)
                        .attr("x2", centerX)
                        .attr("y2", box.y - 25)
                        .attr("stroke", "#6b7280")
                        .attr("stroke-width", 2)
                        .attr("marker-end", "url(#arrow)");
                }

                // æ–¹æ¡†
                svg.append("rect")
                    .attr("x", centerX - 70)
                    .attr("y", box.y - 25)
                    .attr("width", 140)
                    .attr("height", 50)
                    .attr("rx", 8)
                    .attr("fill", box.color)
                    .attr("opacity", 0.3)
                    .attr("stroke", box.color)
                    .attr("stroke-width", 2);

                // æ–‡å­—
                svg.append("text")
                    .attr("x", centerX)
                    .attr("y", box.y + 5)
                    .attr("text-anchor", "middle")
                    .attr("fill", "white")
                    .attr("font-size", "14px")
                    .attr("font-weight", "bold")
                    .text(box.label);
            });

            // é—®é¢˜æ ‡æ³¨
            svg.append("text")
                .attr("x", centerX)
                .attr("y", startY + 440 + yOffset)
                .attr("text-anchor", "middle")
                .attr("fill", "#ef4444")
                .attr("font-size", "12px")
                .text("âŒ å…³ç³»æ–­è£‚ï¼Œéš¾ä»¥æ¨ç†");
        }

        function drawGraphRAG(svg, centerX, startY, isFullWidth) {
            const yOffset = isFullWidth ? 0 : 20;

            // æ ‡é¢˜
            svg.append("text")
                .attr("x", centerX)
                .attr("y", startY + yOffset)
                .attr("text-anchor", "middle")
                .attr("fill", "#22c55e")
                .attr("font-size", "16px")
                .attr("font-weight", "bold")
                .text("GraphRAG");

            const boxes = [
                { label: "æ–‡æ¡£", y: startY + 40 + yOffset, color: "#3b82f6" },
                { label: "å®ä½“æŠ½å–", y: startY + 120 + yOffset, color: "#8b5cf6" },
                { label: "å…³ç³»æŠ½å–", y: startY + 200 + yOffset, color: "#a855f7" },
                { label: "çŸ¥è¯†å›¾è°±", y: startY + 260 + yOffset, color: "#ec4899", width: 160 },
                { label: "å›¾æ£€ç´¢+å‘é‡", y: startY + 340 + yOffset, color: "#f59e0b" },
                { label: "LLMç”Ÿæˆ", y: startY + 400 + yOffset, color: "#22c55e" }
            ];

            boxes.forEach((box, i) => {
                const boxWidth = box.width || 140;

                // ç®­å¤´
                if (i > 0) {
                    svg.append("line")
                        .attr("x1", centerX)
                        .attr("y1", boxes[i - 1].y + 25)
                        .attr("x2", centerX)
                        .attr("y2", box.y - 25)
                        .attr("stroke", "#6b7280")
                        .attr("stroke-width", 2)
                        .attr("marker-end", "url(#arrow)");
                }

                // æ–¹æ¡†
                svg.append("rect")
                    .attr("x", centerX - boxWidth / 2)
                    .attr("y", box.y - 25)
                    .attr("width", boxWidth)
                    .attr("height", 50)
                    .attr("rx", 8)
                    .attr("fill", box.color)
                    .attr("opacity", 0.3)
                    .attr("stroke", box.color)
                    .attr("stroke-width", 2);

                // æ–‡å­—
                svg.append("text")
                    .attr("x", centerX)
                    .attr("y", box.y + 5)
                    .attr("text-anchor", "middle")
                    .attr("fill", "white")
                    .attr("font-size", "14px")
                    .attr("font-weight", "bold")
                    .text(box.label);
            });

            // ä¼˜åŠ¿æ ‡æ³¨
            svg.append("text")
                .attr("x", centerX)
                .attr("y", startY + 460 + yOffset)
                .attr("text-anchor", "middle")
                .attr("fill", "#22c55e")
                .attr("font-size", "12px")
                .text("âœ… ç»“æ„åŒ–çŸ¥è¯† + å¯è§£é‡Šæ¨ç†è·¯å¾„");

            // ç»˜åˆ¶å°çš„å›¾è°±ç¤ºæ„å›¾
            const graphCenterX = centerX - 80;
            const graphCenterY = startY + 260 + yOffset;

            svg.append("circle")
                .attr("cx", graphCenterX)
                .attr("cy", graphCenterY)
                .attr("r", 15)
                .attr("fill", "#3b82f6")
                .attr("opacity", 0.6);

            svg.append("circle")
                .attr("cx", graphCenterX + 30)
                .attr("cy", graphCenterY - 15)
                .attr("r", 12)
                .attr("fill", "#22c55e")
                .attr("opacity", 0.6);

            svg.append("circle")
                .attr("cx", graphCenterX + 30)
                .attr("cy", graphCenterY + 15)
                .attr("r", 12)
                .attr("fill", "#f59e0b")
                .attr("opacity", 0.6);

            // è¿æ¥çº¿
            svg.append("line")
                .attr("x1", graphCenterX)
                .attr("y1", graphCenterY)
                .attr("x2", graphCenterX + 30)
                .attr("y2", graphCenterY - 15)
                .attr("stroke", "#22c55e")
                .attr("stroke-width", 2);

            svg.append("line")
                .attr("x1", graphCenterX)
                .attr("y1", graphCenterY)
                .attr("x2", graphCenterX + 30)
                .attr("y2", graphCenterY + 15)
                .attr("stroke", "#f59e0b")
                .attr("stroke-width", 2);
        }

        // ============================================================
        // åŠ¨ç”» 2: GraphRAGæ¶æ„æµç¨‹
        // ============================================================
        let architectureSvg;
        let currentLayer = 0;
        const layers = [
            {
                name: "çŸ¥è¯†å›¾è°±å±‚",
                color: "#3b82f6",
                description: "å®ä½“æŠ½å– â†’ å…³ç³»æŠ½å– â†’ å›¾å­˜å‚¨",
                items: ["æ–‡æ¡£", "NER", "RE", "Neo4j"]
            },
            {
                name: "æ£€ç´¢å±‚",
                color: "#a855f7",
                description: "å‘é‡æ£€ç´¢ + å›¾éå† + æ··åˆæ£€ç´¢",
                items: ["å‘é‡DB", "å›¾éå†", "æ··åˆç­–ç•¥"]
            },
            {
                name: "LLMç”Ÿæˆå±‚",
                color: "#22c55e",
                description: "ä¸Šä¸‹æ–‡æ„å»º â†’ Promptå·¥ç¨‹ â†’ ç­”æ¡ˆç”Ÿæˆ",
                items: ["ä¸Šä¸‹æ–‡", "Prompt", "LLM", "ç­”æ¡ˆ"]
            }
        ];

        function initArchitectureAnimation() {
            const container = document.getElementById("graphrag-architecture-animation");
            container.innerHTML = "";
            const width = container.clientWidth;
            const height = 600;

            architectureSvg = d3.select("#graphrag-architecture-animation")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            // æ ‡é¢˜
            architectureSvg.append("text")
                .attr("x", width / 2)
                .attr("y", 40)
                .attr("text-anchor", "middle")
                .attr("fill", "#60a5fa")
                .attr("font-size", "20px")
                .attr("font-weight", "bold")
                .text("GraphRAGä¸‰å±‚æ¶æ„");
        }

        function playArchitectureAnimation() {
            currentLayer = 0;
            layers.forEach((layer, index) => {
                setTimeout(() => {
                    showLayer(index);
                }, index * 2000);
            });
        }

        function showNextLayer() {
            currentLayer = (currentLayer + 1) % (layers.length + 1);
            if (currentLayer === layers.length) {
                resetArchitectureAnimation();
            } else {
                showLayer(currentLayer);
            }
        }

        function showLayer(index) {
            currentLayer = index;
            const layer = layers[index];
            const width = architectureSvg.attr("width");
            const height = 600;
            const baseY = 100;
            const layerHeight = 140;

            // æ¸…é™¤å½“å‰å±‚
            architectureSvg.selectAll(`.layer-${index}`).remove();

            const g = architectureSvg.append("g").attr("class", `layer-${index}`);

            // å±‚èƒŒæ™¯
            g.append("rect")
                .attr("x", 50)
                .attr("y", baseY + index * layerHeight)
                .attr("width", width - 100)
                .attr("height", layerHeight - 10)
                .attr("rx", 10)
                .attr("fill", layer.color)
                .attr("opacity", 0.1)
                .attr("stroke", layer.color)
                .attr("stroke-width", 2)
                .style("opacity", 0)
                .transition()
                .duration(500)
                .style("opacity", 1);

            // å±‚æ ‡é¢˜
            g.append("text")
                .attr("x", 70)
                .attr("y", baseY + index * layerHeight + 30)
                .attr("fill", layer.color)
                .attr("font-size", "16px")
                .attr("font-weight", "bold")
                .text(layer.name)
                .style("opacity", 0)
                .transition()
                .delay(200)
                .duration(500)
                .style("opacity", 1);

            // å±‚æè¿°
            g.append("text")
                .attr("x", 70)
                .attr("y", baseY + index * layerHeight + 55)
                .attr("fill", "#9ca3af")
                .attr("font-size", "12px")
                .text(layer.description)
                .style("opacity", 0)
                .transition()
                .delay(400)
                .duration(500)
                .style("opacity", 1);

            // ç»„ä»¶
            const componentWidth = (width - 200) / layer.items.length;
            layer.items.forEach((item, i) => {
                const x = 70 + i * componentWidth + 20;
                const y = baseY + index * layerHeight + 85;

                g.append("rect")
                    .attr("x", x)
                    .attr("y", y)
                    .attr("width", componentWidth - 40)
                    .attr("height", 35)
                    .attr("rx", 5)
                    .attr("fill", layer.color)
                    .attr("opacity", 0.3)
                    .attr("stroke", layer.color)
                    .attr("stroke-width", 1)
                    .style("opacity", 0)
                    .transition()
                    .delay(600 + i * 150)
                    .duration(500)
                    .style("opacity", 1);

                g.append("text")
                    .attr("x", x + (componentWidth - 40) / 2)
                    .attr("y", y + 22)
                    .attr("text-anchor", "middle")
                    .attr("fill", "white")
                    .attr("font-size", "12px")
                    .text(item)
                    .style("opacity", 0)
                    .transition()
                    .delay(700 + i * 150)
                    .duration(500)
                    .style("opacity", 1);
            });

            // æ›´æ–°è¯´æ˜
            document.getElementById("architecture-description").innerHTML = `
                <div class="font-bold text-${index === 0 ? 'blue' : index === 1 ? 'purple' : 'green'}-400 mb-2">${layer.name}</div>
                <div class="text-sm">${layer.description}</div>
                <div class="text-sm text-gray-400 mt-2">ç»„ä»¶: ${layer.items.join(" â†’ ")}</div>
            `;
        }

        function resetArchitectureAnimation() {
            if (architectureSvg) {
                architectureSvg.selectAll("*").remove();
                initArchitectureAnimation();
            }
            currentLayer = 0;
            document.getElementById("architecture-description").innerHTML = 'ç‚¹å‡»"æ’­æ”¾æ¶æ„æµç¨‹"æŸ¥çœ‹GraphRAGçš„å®Œæ•´æ¶æ„';
        }

        // ============================================================
        // åŠ¨ç”» 3: æ–‡æ¡£åˆ°å›¾è°±æ„å»ºæµç¨‹
        // ============================================================
        let pipelineSvg;
        let pipelineStep = 0;

        const pipelineSteps = [
            {
                name: "åŸå§‹æ–‡æ¡£",
                description: "è¾“å…¥: å¤šä¸ªæ–‡æœ¬æ–‡æ¡£",
                color: "#3b82f6"
            },
            {
                name: "æ–‡æœ¬å¤„ç†",
                description: "åˆ†è¯ã€å¥å­åˆ†å‰²ã€è¯æ€§æ ‡æ³¨",
                color: "#8b5cf6"
            },
            {
                name: "å®ä½“è¯†åˆ« (NER)",
                description: "è¯†åˆ«äººåã€åœ°åã€ç»„ç»‡ç­‰",
                color: "#a855f7"
            },
            {
                name: "å…³ç³»æŠ½å– (RE)",
                description: "è¯†åˆ«å®ä½“é—´å…³ç³»",
                color: "#ec4899"
            },
            {
                name: "ä¸‰å…ƒç»„ç”Ÿæˆ",
                description: "(å®ä½“, å…³ç³», å®ä½“)",
                color: "#f59e0b"
            },
            {
                name: "çŸ¥è¯†å›¾è°±",
                description: "å­˜å…¥Neo4jå›¾æ•°æ®åº“",
                color: "#22c55e"
            }
        ];

        function initPipelineAnimation() {
            const container = document.getElementById("pipeline-animation");
            container.innerHTML = "";
            const width = container.clientWidth;
            const height = 400;

            pipelineSvg = d3.select("#pipeline-animation")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            pipelineSvg.append("text")
                .attr("x", width / 2)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .attr("fill", "#a855f7")
                .attr("font-size", "18px")
                .attr("font-weight", "bold")
                .text("æ–‡æ¡£ â†’ çŸ¥è¯†å›¾è°±æ„å»ºæµç¨‹");
        }

        function playPipelineAnimation() {
            pipelineStep = 0;
            pipelineSteps.forEach((step, index) => {
                setTimeout(() => {
                    showPipelineStep(index);
                }, index * 1500);
            });
        }

        function showPipelineStep(index) {
            pipelineStep = index;
            const step = pipelineSteps[index];
            const width = pipelineSvg.attr("width");
            const height = 400;
            const stepWidth = (width - 100) / pipelineSteps.length;
            const x = 50 + index * stepWidth;
            const y = 150;

            const g = pipelineSvg.append("g")
                .attr("class", `pipeline-step-${index}`)
                .style("opacity", 0);

            // ç®­å¤´(é™¤äº†ç¬¬ä¸€æ­¥)
            if (index > 0) {
                g.append("line")
                    .attr("x1", x - stepWidth / 2)
                    .attr("y1", y + 25)
                    .attr("x2", x - 10)
                    .attr("y2", y + 25)
                    .attr("stroke", "#6b7280")
                    .attr("stroke-width", 2)
                    .attr("marker-end", "url(#arrow)")
                    .style("opacity", 0)
                    .transition()
                    .duration(500)
                    .style("opacity", 1);
            }

            // æ–¹æ¡†
            g.append("rect")
                .attr("x", x)
                .attr("y", y)
                .attr("width", stepWidth - 20)
                .attr("height", 50)
                .attr("rx", 8)
                .attr("fill", step.color)
                .attr("opacity", 0.3)
                .attr("stroke", step.color)
                .attr("stroke-width", 2);

            // æ–‡å­—
            g.append("text")
                .attr("x", x + (stepWidth - 20) / 2)
                .attr("y", y + 30)
                .attr("text-anchor", "middle")
                .attr("fill", "white")
                .attr("font-size", "13px")
                .attr("font-weight", "bold")
                .text(step.name);

            // æ˜¾ç¤ºåŠ¨ç”»
            g.transition()
                .duration(500)
                .style("opacity", 1);

            // å¦‚æœæ˜¯æœ€åä¸€æ­¥ï¼Œç»˜åˆ¶çŸ¥è¯†å›¾è°±
            if (index === pipelineSteps.length - 1) {
                setTimeout(() => {
                    drawMiniGraph(pipelineSvg, width / 2, 300);
                }, 800);
            }

            // æ›´æ–°è¯´æ˜
            document.getElementById("pipeline-description").innerHTML = `
                <div class="font-bold" style="color: ${step.color}">${index + 1}. ${step.name}</div>
                <div class="text-sm text-gray-400 mt-1">${step.description}</div>
            `;
        }

        function drawMiniGraph(svg, centerX, centerY) {
            const nodes = [
                { x: centerX - 40, y: centerY, color: "#3b82f6", label: "äºº" },
                { x: centerX + 40, y: centerY, color: "#22c55e", label: "ç»„ç»‡" },
                { x: centerX, y: centerY + 40, color: "#f59e0b", label: "åœ°ç‚¹" }
            ];

            nodes.forEach(node => {
                svg.append("circle")
                    .attr("cx", node.x)
                    .attr("cy", node.y)
                    .attr("r", 15)
                    .attr("fill", node.color)
                    .attr("opacity", 0)
                    .transition()
                    .duration(500)
                    .attr("opacity", 0.6);

                svg.append("text")
                    .attr("x", node.x)
                    .attr("y", node.y + 4)
                    .attr("text-anchor", "middle")
                    .attr("fill", "white")
                    .attr("font-size", "10px")
                    .text(node.label)
                    .style("opacity", 0)
                    .transition()
                    .delay(300)
                    .duration(500)
                    .style("opacity", 1);
            });

            // è¿æ¥çº¿
            svg.append("line")
                .attr("x1", centerX - 40)
                .attr("y1", centerY)
                .attr("x2", centerX + 40)
                .attr("y2", centerY)
                .attr("stroke", "#22c55e")
                .attr("stroke-width", 2)
                .style("opacity", 0)
                .transition()
                .delay(500)
                .duration(500)
                .style("opacity", 1);
        }

        function resetPipelineAnimation() {
            if (pipelineSvg) {
                pipelineSvg.selectAll("*").remove();
                initPipelineAnimation();
            }
            pipelineStep = 0;
            document.getElementById("pipeline-description").innerHTML = 'ç‚¹å‡»"æ’­æ”¾æµç¨‹"æŸ¥çœ‹å¦‚ä½•ä»æ–‡æ¡£æ„å»ºçŸ¥è¯†å›¾è°±';
        }

        // ============================================================
        // åŠ¨ç”» 4: æ£€ç´¢ç­–ç•¥å¯¹æ¯”
        // ============================================================
        let strategySvg;
        let currentStrategy = 'none';

        function initStrategyAnimation() {
            const container = document.getElementById("strategy-animation");
            container.innerHTML = "";
            const width = container.clientWidth;
            const height = 500;

            strategySvg = d3.select("#strategy-animation")
                .append("svg")
                .attr("width", width)
                .attr("height", height);

            strategySvg.append("text")
                .attr("x", width / 2)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .attr("fill", "#60a5fa")
                .attr("font-size", "20px")
                .attr("font-weight", "bold")
                .text("GraphRAGæ£€ç´¢ç­–ç•¥å¯¹æ¯”");
        }

        function playStrategyAnimation() {
            showGlobalStrategy();
            setTimeout(() => showLocalStrategy(), 3000);
            setTimeout(() => showHybridStrategy(), 6000);
        }

        function showGlobalStrategy() {
            currentStrategy = 'global';
            drawStrategy('global');
            document.getElementById("strategy-description").innerHTML = `
                <div class="text-blue-400 font-bold mb-2">å…¨å±€æ£€ç´¢ (Global Retrieval)</div>
                <ul class="text-sm space-y-1">
                    <li>â€¢ å¯¹æ•´ä¸ªå›¾è°±è¿›è¡Œç¤¾åŒºæ£€æµ‹</li>
                    <li>â€¢ æå–å…¨å±€å…³é”®å®ä½“å’Œå…³ç³»</li>
                    <li>â€¢ é€‚ç”¨äº: æ€»ç»“æ€§é—®é¢˜ã€å…¨å±€ç†è§£</li>
                    <li>â€¢ ä¼˜ç‚¹: æ•æ‰å®è§‚ç»“æ„</li>
                    <li>â€¢ ç¼ºç‚¹: è®¡ç®—æˆæœ¬é«˜</li>
                </ul>
            `;
        }

        function showLocalStrategy() {
            currentStrategy = 'local';
            drawStrategy('local');
            document.getElementById("strategy-description").innerHTML = `
                <div class="text-green-400 font-bold mb-2">å±€éƒ¨æ£€ç´¢ (Local Retrieval)</div>
                <ul class="text-sm space-y-1">
                    <li>â€¢ ä»æŸ¥è¯¢å®ä½“å‡ºå‘ï¼Œå¤šè·³å›¾éå†</li>
                    <li>â€¢ æ²¿ç€å…³ç³»è¾¹æŸ¥æ‰¾ç›¸å…³èŠ‚ç‚¹</li>
                    <li>â€¢ é€‚ç”¨äº: å…·ä½“å…³ç³»ã€è·¯å¾„æŸ¥è¯¢</li>
                    <li>â€¢ ä¼˜ç‚¹: å¿«é€Ÿã€ç²¾ç¡®ã€å¯è§£é‡Š</li>
                    <li>â€¢ ç¼ºç‚¹: å¯èƒ½é”™è¿‡è¿œå¤„ä¿¡æ¯</li>
                </ul>
            `;
        }

        function showHybridStrategy() {
            currentStrategy = 'hybrid';
            drawStrategy('hybrid');
            document.getElementById("strategy-description").innerHTML = `
                <div class="text-purple-400 font-bold mb-2">æ··åˆæ£€ç´¢ (Hybrid Retrieval)</div>
                <ul class="text-sm space-y-1">
                    <li>â€¢ ç»“åˆå‘é‡æ£€ç´¢ + å›¾éå† + å…¨å±€æ‘˜è¦</li>
                    <li>â€¢ å¹³è¡¡ç²¾åº¦å’Œå¬å›ç‡</li>
                    <li>â€¢ é€‚ç”¨äº: å¤æ‚é—®é¢˜ã€å¤šå±‚çº§æŸ¥è¯¢</li>
                    <li>â€¢ ä¼˜ç‚¹: é€‚åº”æ€§å¼ºã€æ•ˆæœæœ€å¥½</li>
                    <li>â€¢ ç¼ºç‚¹: å®ç°å¤æ‚ã€éœ€è¦è°ƒå‚</li>
                </ul>
            `;
        }

        function drawStrategy(strategy) {
            if (!strategySvg) return;

            strategySvg.selectAll("*").remove();
            const width = strategySvg.attr("width");
            const height = 500;
            const centerX = width / 2;
            const centerY = 280;

            // æ ‡é¢˜
            strategySvg.append("text")
                .attr("x", width / 2)
                .attr("y", 30)
                .attr("text-anchor", "middle")
                .attr("fill", "#60a5fa")
                .attr("font-size", "20px")
                .attr("font-weight", "bold")
                .text("GraphRAGæ£€ç´¢ç­–ç•¥å¯¹æ¯”");

            // æ·»åŠ ç®­å¤´å®šä¹‰
            strategySvg.append("defs").append("marker")
                .attr("id", "arrow")
                .attr("viewBox", "0 0 10 10")
                .attr("refX", 8)
                .attr("refY", 5)
                .attr("markerWidth", 6)
                .attr("markerHeight", 6)
                .attr("orient", "auto")
                .append("path")
                .attr("d", "M 0 0 L 10 5 L 0 10 z")
                .attr("fill", "#6b7280");

            if (strategy === 'global') {
                drawGlobalStrategy(strategySvg, centerX, centerY);
            } else if (strategy === 'local') {
                drawLocalStrategy(strategySvg, centerX, centerY);
            } else if (strategy === 'hybrid') {
                drawHybridStrategy(strategySvg, centerX, centerY);
            }
        }

        function drawGlobalStrategy(svg, centerX, centerY) {
            // ç»˜åˆ¶å¤šä¸ªç¤¾åŒº
            const communities = [
                { x: centerX - 100, y: centerY, color: "#3b82f6", label: "ç¤¾åŒº1" },
                { x: centerX + 100, y: centerY, color: "#22c55e", label: "ç¤¾åŒº2" },
                { x: centerX, y: centerY + 100, color: "#f59e0b", label: "ç¤¾åŒº3" }
            ];

            communities.forEach((comm, i) => {
                svg.append("circle")
                    .attr("cx", comm.x)
                    .attr("cy", comm.y)
                    .attr("r", 60)
                    .attr("fill", comm.color)
                    .attr("opacity", 0)
                    .transition()
                    .delay(i * 200)
                    .duration(500)
                    .attr("opacity", 0.2);

                svg.append("text")
                    .attr("x", comm.x)
                    .attr("y", comm.y)
                    .attr("text-anchor", "middle")
                    .attr("fill", comm.color)
                    .attr("font-size", "14px")
                    .attr("font-weight", "bold")
                    .text(comm.label)
                    .style("opacity", 0)
                    .transition()
                    .delay(i * 200 + 300)
                    .duration(500)
                    .style("opacity", 1);
            });

            // å…¨å±€æ‘˜è¦
            svg.append("rect")
                .attr("x", centerX - 70)
                .attr("y", centerY - 140)
                .attr("width", 140)
                .attr("height", 50)
                .attr("rx", 8)
                .attr("fill", "#3b82f6")
                .attr("opacity", 0)
                .transition()
                .delay(800)
                .duration(500)
                .attr("opacity", 0.3);

            svg.append("text")
                .attr("x", centerX)
                .attr("y", centerY - 110)
                .attr("text-anchor", "middle")
                .attr("fill", "white")
                .attr("font-size", "12px")
                .text("å…¨å±€æ‘˜è¦")
                .style("opacity", 0)
                .transition()
                .delay(1000)
                .duration(500)
                .style("opacity", 1);

            // ç®­å¤´
            svg.selectAll("line")
                .data([[0, -100], [1, -100], [2, -100]])
                .enter()
                .append("line")
                .attr("x1", (d, i) => communities[i].x)
                .attr("y1", (d, i) => communities[i].y - 60)
                .attr("x2", centerX)
                .attr("y2", centerY - 90)
                .attr("stroke", "#6b7280")
                .attr("stroke-width", 2)
                .attr("marker-end", "url(#arrow)")
                .style("opacity", 0)
                .transition()
                .delay(1200)
                .duration(500)
                .style("opacity", 1);
        }

        function drawLocalStrategy(svg, centerX, centerY) {
            // èµ·å§‹èŠ‚ç‚¹
            svg.append("circle")
                .attr("cx", centerX)
                .attr("cy", centerY)
                .attr("r", 40)
                .attr("fill", "#3b82f6")
                .attr("opacity", 0)
                .transition()
                .duration(500)
                .attr("opacity", 0.6);

            svg.append("text")
                .attr("x", centerX)
                .attr("y", centerY + 5)
                .attr("text-anchor", "middle")
                .attr("fill", "white")
                .attr("font-size", "12px")
                .attr("font-weight", "bold")
                .text("æŸ¥è¯¢èŠ‚ç‚¹")
                .style("opacity", 0)
                .transition()
                .delay(300)
                .duration(500)
                .style("opacity", 1);

            // 1è·³é‚»å±…
            const hop1 = [
                { x: centerX - 80, y: centerY - 50, color: "#22c55e" },
                { x: centerX + 80, y: centerY - 50, color: "#22c55e" },
                { x: centerX, y: centerY + 80, color: "#22c55e" }
            ];

            hop1.forEach((node, i) => {
                svg.append("line")
                    .attr("x1", centerX)
                    .attr("y1", centerY)
                    .attr("x2", node.x)
                    .attr("y2", node.y)
                    .attr("stroke", "#22c55e")
                    .attr("stroke-width", 2)
                    .style("opacity", 0)
                    .transition()
                    .delay(600 + i * 200)
                    .duration(500)
                    .style("opacity", 1);

                svg.append("circle")
                    .attr("cx", node.x)
                    .attr("cy", node.y)
                    .attr("r", 25)
                    .attr("fill", node.color)
                    .attr("opacity", 0)
                    .transition()
                    .delay(800 + i * 200)
                    .duration(500)
                    .attr("opacity", 0.6);

                svg.append("text")
                    .attr("x", node.x)
                    .attr("y", node.y + 4)
                    .attr("text-anchor", "middle")
                    .attr("fill", "white")
                    .attr("font-size", "10px")
                    .text(`1è·³-${i + 1}`)
                    .style("opacity", 0)
                    .transition()
                    .delay(1000 + i * 200)
                    .duration(500)
                    .style("opacity", 1);
            });

            // 2è·³é‚»å±…
            setTimeout(() => {
                const hop2 = [
                    { x: centerX - 120, y: centerY - 100, color: "#f59e0b" },
                    { x: centerX + 120, y: centerY - 100, color: "#f59e0b" }
                ];

                hop2.forEach((node, i) => {
                    svg.append("line")
                        .attr("x1", hop1[i].x)
                        .attr("y1", hop1[i].y)
                        .attr("x2", node.x)
                        .attr("y2", node.y)
                        .attr("stroke", "#f59e0b")
                        .attr("stroke-width", 2)
                        .attr("stroke-dasharray", "5,5")
                        .style("opacity", 0)
                        .transition()
                        .duration(500)
                        .style("opacity", 1);

                    svg.append("circle")
                        .attr("cx", node.x)
                        .attr("cy", node.y)
                        .attr("r", 20)
                        .attr("fill", node.color)
                        .attr("opacity", 0)
                        .transition()
                        .delay(200)
                        .duration(500)
                        .attr("opacity", 0.6);

                    svg.append("text")
                        .attr("x", node.x)
                        .attr("y", node.y + 4)
                        .attr("text-anchor", "middle")
                        .attr("fill", "white")
                        .attr("font-size", "10px")
                        .text(`2è·³`)
                        .style("opacity", 0)
                        .transition()
                        .delay(400)
                        .duration(500)
                        .style("opacity", 1);
                });
            }, 2000);

            // è¯´æ˜
            svg.append("text")
                .attr("x", centerX)
                .attr("y", centerY + 140)
                .attr("text-anchor", "middle")
                .attr("fill", "#22c55e")
                .attr("font-size", "14px")
                .text("å¤šè·³éå†: æ²¿å…³ç³»è¾¹æŸ¥æ‰¾")
                .style("opacity", 0)
                .transition()
                .delay(2500)
                .duration(500)
                .style("opacity", 1);
        }

        function drawHybridStrategy(svg, centerX, centerY) {
            // å‘é‡æ£€ç´¢éƒ¨åˆ†
            svg.append("rect")
                .attr("x", centerX - 150)
                .attr("y", centerY - 120)
                .attr("width", 120)
                .attr("height", 80)
                .attr("rx", 8)
                .attr("fill", "#3b82f6")
                .attr("opacity", 0)
                .transition()
                .duration(500)
                .attr("opacity", 0.3);

            svg.append("text")
                .attr("x", centerX - 90)
                .attr("y", centerY - 75)
                .attr("text-anchor", "middle")
                .attr("fill", "white")
                .attr("font-size", "12px")
                .attr("font-weight", "bold")
                .text("å‘é‡æ£€ç´¢")
                .style("opacity", 0)
                .transition()
                .delay(200)
                .duration(500)
                .style("opacity", 1);

            // å›¾éå†éƒ¨åˆ†
            svg.append("rect")
                .attr("x", centerX + 30)
                .attr("y", centerY - 120)
                .attr("width", 120)
                .attr("height", 80)
                .attr("rx", 8)
                .attr("fill", "#22c55e")
                .attr("opacity", 0)
                .transition()
                .delay(400)
                .duration(500)
                .attr("opacity", 0.3);

            svg.append("text")
                .attr("x", centerX + 90)
                .attr("y", centerY - 75)
                .attr("text-anchor", "middle")
                .attr("fill", "white")
                .attr("font-size", "12px")
                .attr("font-weight", "bold")
                .text("å›¾éå†")
                .style("opacity", 0)
                .transition()
                .delay(600)
                .duration(500)
                .style("opacity", 1);

            // èåˆ
            svg.append("rect")
                .attr("x", centerX - 70)
                .attr("y", centerY + 20)
                .attr("width", 140)
                .attr("height", 60)
                .attr("rx", 8)
                .attr("fill", "#a855f7")
                .attr("opacity", 0)
                .transition()
                .delay(800)
                .duration(500)
                .attr("opacity", 0.3);

            svg.append("text")
                .attr("x", centerX)
                .attr("y", centerY + 55)
                .attr("text-anchor", "middle")
                .attr("fill", "white")
                .attr("font-size", "12px")
                .attr("font-weight", "bold")
                .text("æ··åˆèåˆ")
                .style("opacity", 0)
                .transition()
                .delay(1000)
                .duration(500)
                .style("opacity", 1);

            // ç®­å¤´
            svg.append("line")
                .attr("x1", centerX - 90)
                .attr("y1", centerY - 40)
                .attr("x2", centerX - 50)
                .attr("y2", centerY + 20)
                .attr("stroke", "#6b7280")
                .attr("stroke-width", 2)
                .attr("marker-end", "url(#arrow)")
                .style("opacity", 0)
                .transition()
                .delay(1200)
                .duration(500)
                .style("opacity", 1);

            svg.append("line")
                .attr("x1", centerX + 90)
                .attr("y1", centerY - 40)
                .attr("x2", centerX + 50)
                .attr("y2", centerY + 20)
                .attr("stroke", "#6b7280")
                .attr("stroke-width", 2)
                .attr("marker-end", "url(#arrow)")
                .style("opacity", 0)
                .transition()
                .delay(1400)
                .duration(500)
                .style("opacity", 1);

            // æƒé‡è¯´æ˜
            svg.append("text")
                .attr("x", centerX - 90)
                .attr("y", centerY - 55)
                .attr("text-anchor", "middle")
                .attr("fill", "#9ca3af")
                .attr("font-size", "10px")
                .text("æƒé‡: 0.4")
                .style("opacity", 0)
                .transition()
                .delay(1600)
                .duration(500)
                .style("opacity", 1);

            svg.append("text")
                .attr("x", centerX + 90)
                .attr("y", centerY - 55)
                .attr("text-anchor", "middle")
                .attr("fill", "#9ca3af")
                .attr("font-size", "10px")
                .text("æƒé‡: 0.6")
                .style("opacity", 0)
                .transition()
                .delay(1800)
                .duration(500)
                .style("opacity", 1);
        }

        // ============================================================
        // åˆå§‹åŒ–
        // ============================================================
        document.addEventListener("DOMContentLoaded", function() {
            initRAGComparisonAnimation();
            initArchitectureAnimation();
            initPipelineAnimation();
            initStrategyAnimation();

            // é»˜è®¤æ˜¾ç¤ºå¯¹æ¯”
            setTimeout(() => {
                playRAGComparison();
            }, 500);
        });
    </script>
</body>
</html>
